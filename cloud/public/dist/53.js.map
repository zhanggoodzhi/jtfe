{"version":3,"sources":["webpack:///./pages/knowledge/material/index/resourceUtils/index.less?fce7","webpack:///./pages/knowledge/material/index/resourceUtils/index.ts?5225"],"names":[],"mappings":"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","file":"53.js","sourcesContent":["// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/knowledge/material/index/resourceUtils/index.less\n// module id = 291\n// module chunks = 1 53","import './index.less';\r\nimport { confirmModal, alertMessage, loadingBtn, cleanObject, addLoadingBg } from 'utils';\r\nimport 'select';\r\nimport * as tables from 'new-table';\r\ndeclare const kbRestUrl;\r\ndeclare const appid;\r\ndeclare const sendGroup;\r\ndeclare const idParam;\r\ndeclare const typeParam;\r\n// 素材部分公用函数start\r\nexport function uploadResource(type, thisFile, cb: Function, cb2?: Function) {\r\n\tif (thisFile) {\r\n\t\tconst mimeType = thisFile.type;\r\n\t\t$.ajax({\r\n\t\t\turl: `${kbRestUrl}/resource/file/upload/${thisFile.name}/${type}/${appid}`,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tcontentType: mimeType,\r\n\t\t\tdata: thisFile,\r\n\t\t\tprocessData: false,\r\n\t\t\tsuccess: function (data) {\r\n\t\t\t\tcb(data);\r\n\t\t\t},\r\n\t\t\terror: function (e) {\r\n\t\t\t\tif (cb2) {\r\n\t\t\t\t\tcb2();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\nexport function renderBtn(id, type) {\r\n\treturn `\r\n\t\t<div class=\"btnToolbox\">\r\n\t\t\t<div class=\"icon-wrap view-edit\" data-id='${id}' title='编辑'>\r\n\t\t\t\t<img src=\"${ctx}/images/materialIcon/editIconD.png\" width=\"20px\" height=\"20px\">\r\n\t\t\t</div>\r\n\t\t\t<div class=\"icon-wrap view-delete\" data-id='${id}' title='删除'>\r\n\t\t\t\t<img src=\"${ctx}/images/materialIcon/delIconD.png\" width=\"20px\" height=\"20px\">\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t`;\r\n}\r\n\r\n/**\r\n * 搜索回车事件，搜索按钮事件\r\n * @export\r\n * @param {any} type\r\n * @param {any} cb\r\n */\r\nexport function bindSearchEvent(type, cb) {\r\n\t$(`#${type}-search-btn`).on('click', () => {\r\n\t\tcb();\r\n\t});\r\n\t$(`#${type}-search-title`).on('keydown', (e) => {\r\n\t\tif (e && e.keyCode === 13) {\r\n\t\t\tcb();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n}\r\nexport function resourceCreateAjax(data, cb) {\r\n\tconsole.log(data);\r\n\treturn $.ajax({\r\n\t\turl: `${kbRestUrl}/resource/create/${appid}`,\r\n\t\tmethod: 'POST',\r\n\t\tdata: JSON.stringify(data),\r\n\t\txhrFields: {\r\n\t\t\twithCredentials: true\r\n\t\t},\r\n\t\tcontentType: 'application/json'\r\n\t}).done((msg) => {\r\n\t\tcb(msg);\r\n\t});\r\n}\r\nexport function resourceUpdateAjax(data, cb) {\r\n\treturn $.ajax({\r\n\t\turl: `${kbRestUrl}/resource/update`,\r\n\t\tmethod: 'PUT',\r\n\t\tdata: JSON.stringify(data),\r\n\t\tcontentType: 'application/json'\r\n\t}).done((msg) => {\r\n\t\tcb(msg);\r\n\t});\r\n}\r\nexport function bindResourceEditEvent(type, cb) {\r\n\t$(`#${type}-tab`).on('click', '.view-edit', function () {\r\n\t\tconst el = $(this);\r\n\t\tconst id = el.data().id;\r\n\t\tcb(id, el);\r\n\t});\r\n}\r\nexport function bindResourceDownloadEvent(type) {\r\n\t$(`#${type}-tab`).on('click', '.view-download', function () {\r\n\t\tconst a = document.createElement('a');\r\n\t\ta.href = $(this).data().url;\r\n\t\ta.download = '';\r\n\t\ta.click();\r\n\t});\r\n}\r\n\r\n// 图文组接口不同\r\n/*export function bindDeleteEvent(type, cb) {\r\n\tlet text;\r\n\tswitch (type) {\r\n\t\tcase 'text': text = '文本'; break;\r\n\t\tcase 'image': text = '图片'; break;\r\n\t\tcase 'voice': text = '语音'; break;\r\n\t\tcase 'video': text = '视频'; break;\r\n\t\tcase 'music': text = '音乐'; break;\r\n\t\tcase 'link': text = '链接'; break;\r\n\t\tcase 'file': text = '文件'; break;\r\n\t\tdefault: text = '~~~~type错误~~~~~'; break;\r\n\t}\r\n\r\n\t$(`#${type}-tab`).on('click', '.view-delete', function () {\r\n\t\tconst el = $(this);\r\n\t\tconst id = el.data().id;\r\n\t\tconfirmModal({\r\n\t\t\tmsg: `确认删除该${text}吗?`,\r\n\t\t\tcb: (modal, btn) => {\r\n\t\t\t\tconst end = loadingBtn(btn);\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: 'weixinv2/material/deleteMedia',\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tmediaId: id\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (!res.error) {\r\n\t\t\t\t\t\t\tcb(res, el);\r\n\t\t\t\t\t\t\tmodal.modal('hide');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\talertMessage(res.msg, !res.error);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tend();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}*/\r\nexport function bindResourceDeleteEvent(type, cb) {\r\n\tlet text;\r\n\tswitch (type) {\r\n\t\tcase 'text': text = '文本'; break;\r\n\t\tcase 'image': text = '图片'; break;\r\n\t\tcase 'voice': text = '语音'; break;\r\n\t\tcase 'video': text = '视频'; break;\r\n\t\tcase 'music': text = '音乐'; break;\r\n\t\tcase 'news': text = '图文'; break;\r\n\t\tcase 'link': text = '链接'; break;\r\n\t\tcase 'file': text = '文件'; break;\r\n\t\tdefault: text = '~~~~type错误~~~~~'; break;\r\n\t}\r\n\t$(`#${type}-tab`).on('click', '.view-delete', function () {\r\n\t\tconst el = $(this);\r\n\t\tconst id = el.data().id;\r\n\t\tconfirmModal({\r\n\t\t\tmsg: `确认删除该${text}吗?（该素材关联的语料将被一同删除，请知悉！）`,\r\n\t\t\tcb: (modal, btn) => {\r\n\t\t\t\tconst endLoading = loadingBtn(btn);\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: `${ctx}/knowledge/material/delete?materialId=${id}&type=${type}`/* `${kbRestUrl}/resource/delete/${appid}/${id}/${type}` */,\r\n\t\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.success) {\r\n\t\t\t\t\t\t\tcb();\r\n\t\t\t\t\t\t\talertMessage('删除成功！', true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talertMessage(res.msg, res.success);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmodal.modal('hide');\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\tendLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\nexport function triggerAddEvent() {\r\n\tif ((window as any).ifResolveHrefParam) {\r\n\t\treturn;\r\n\t}\r\n\t$(`#${typeParam}-link`).trigger('addResource');\r\n\t(window as any).ifResolveHrefParam = true;\r\n}\r\nexport function triggerEditEvent(cb) {\r\n\tif (!idParam) {\r\n\t\treturn;\r\n\t}\r\n\t$.ajax(`${kbRestUrl}/resource/search/${appid}`, {\r\n\t\tmethod: 'POST',\r\n\t\tdata: cleanObject({\r\n\t\t\ttype: typeParam,\r\n\t\t\tgroup: sendGroup,\r\n\t\t\tappid: appid,\r\n\t\t\tpage: 1,\r\n\t\t\tsize: 10,\r\n\t\t\tid: idParam\r\n\t\t})\r\n\t})\r\n\t\t.done(res => {\r\n\t\t\tif (cb) {\r\n\t\t\t\tcb(res);\r\n\t\t\t}\r\n\t\t});\r\n}\r\nexport function resourceFileDeleteMoreEvent(ids, cb?: Function) {\r\n\tif (ids.length === 0) {\r\n\t\treturn;\r\n\t}\r\n\tids.forEach(v => {\r\n\t\tconst meI = encodeURIComponent(v);\r\n\t\t$.ajax({\r\n\t\t\turl: `${kbRestUrl}/resource/file/delete?mediaId=${meI}`,\r\n\t\t\tmethod: 'DELETE',\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tif (cb) {\r\n\t\t\t\t\tcb();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\nexport function noResourceHtml() {\r\n\treturn '<p class=\"cloud-no-resource\">没有检索到数据</p>';\r\n}\r\n// 素材部分公用函数end\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/knowledge/material/index/resourceUtils/index.ts"],"sourceRoot":""}