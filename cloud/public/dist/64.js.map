{"version":3,"sources":["webpack:///./pages/index/index.ts","webpack:///./pages/index/index.less"],"names":[],"mappings":"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","file":"64.js","sourcesContent":["import { alertMessage } from 'utils';\r\nimport 'time';\r\nimport './index.less';\r\n\r\ndeclare const unresolveduProblemCount: number;\r\ndeclare const unreviewedPairCount: number;\r\ndeclare const enterIndexCount: number;\r\n\r\n\r\ninterface IMessage {\r\n\tcontentHtml: string;\r\n\tcreateTime: string;\r\n\tdid: number;\r\n\tid: number;\r\n\tplainText: string;\r\n\ttitle: string;\r\n}\r\n\r\nconst messageList = $('#message-list');\r\nconst messageContent = $('#message-content');\r\n\r\nfunction fetchMessages() {\r\n\treturn $.ajax('bulletin/queryBulletinSystem', {\r\n\t\tmethod: 'POST'\r\n\t});\r\n}\r\n\r\nfunction updateMessageContent(content: string) {\r\n\tmessageContent.html(content);\r\n}\r\n\r\nfunction updateActiveMessage(item: JQuery) {\r\n\tif (item.hasClass('active')) {\r\n\t\treturn;\r\n\t}\r\n\tmessageList.find('.active').removeClass('active');\r\n\ttry {\r\n\t\tconst data: IMessage = item.data('data');\r\n\t\tupdateMessageContent(data.contentHtml);\r\n\t\titem.addClass('active');\r\n\t}\r\n\tcatch (error) {\r\n\t\tupdateMessageContent('<p class=\"text-center\">获取数据异常</p>');\r\n\t}\r\n}\r\n\r\n\r\n(function () {\r\n\tconst unviewedModal = $('#unreviewed-modal');\r\n\r\n\tif (unviewedModal.modal.length > 0) {\r\n\t\tunviewedModal.modal('show');\r\n\t}\r\n\r\n\tif (enterIndexCount === 1 && unresolveduProblemCount > 0) {\r\n\t\talertMessage(\r\n\t\t\t`系统中有<span class=\"text-danger\">${unresolveduProblemCount}</span>次会话被用户评价为未解决问题，请尽快去会话统计页面查看详情`,\r\n\t\t\t'warn'\r\n\t\t);\r\n\t}\r\n\r\n\tmessageList.on('click', '.message-item', e => {\r\n\t\tconst item = $(e.currentTarget);\r\n\t\tupdateActiveMessage(item);\r\n\t});\r\n\r\n\tfetchMessages()\r\n\t\t.then((res) => {\r\n\t\t\tif (!res) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst messages: IMessage[] = JSON.parse(res);\r\n\t\t\tmessageList.empty();\r\n\t\t\tif (messages && messages.length > 0) {\r\n\t\t\t\tmessages.forEach((data, index) => {\r\n\t\t\t\t\tconst item = $(`<tr class=\"message-item\">\r\n\t\t\t\t\t\t<td>${data.title}</td>\r\n\t\t\t\t\t\t<td>${moment(data.createTime).format('YYYY-MM-DD')}</td>\r\n\t\t\t\t\t</tr>`);\r\n\r\n\t\t\t\t\titem.data('data', data);\r\n\r\n\t\t\t\t\tmessageList.append(item);\r\n\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\titem.find('td:first').append('<img src=\"images/new.png\">');\r\n\t\t\t\t\t\tupdateActiveMessage(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tmessageList.append('<tr class=\"text-center\"><td colspan=\"2\">暂无数据</td></tr>');\r\n\t\t\t}\r\n\t\t});\r\n\r\n}());\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/index/index.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/index/index.less\n// module id = 908\n// module chunks = 64"],"sourceRoot":""}