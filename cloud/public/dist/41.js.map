{"version":3,"sources":["webpack:///./pages/superadmin/bulletin/index/index.ts","webpack:///./pages/superadmin/bulletin/index/index.less"],"names":[],"mappings":"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","file":"41.js","sourcesContent":["import * as utils from 'utils';\r\nimport 'new-table';\r\nimport 'daterangepicker';\r\nimport 'editor';\r\nimport * as tables from 'tables';\r\nimport './index.less';\r\nnamespace SuperadminBulletinIndex {\r\n\tlet state: string;\r\n\tlet editor;\r\n\t$(initTable);\r\n\tfunction initTable() {\r\n\t\tconst width = tables.VARIABLES.width;\r\n\t\tconst date = new utils.CommonDate({\r\n\t\t\tel: $('#create-date')\r\n\t\t});\r\n\t\t$('#table').DataTable(Object.assign(tables.commonConfig(),\r\n\t\t\t{\r\n\t\t\t\tajax: {\r\n\t\t\t\t\turl: 'superadmin/bulletin/list',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tdataSrc: data => data.rows,\r\n\t\t\t\t\tdata: data => {\r\n\t\t\t\t\t\treturn utils.cleanObject({\r\n\t\t\t\t\t\t\tpage: tables.getPage(data),\r\n\t\t\t\t\t\t\trows: data.length,\r\n\t\t\t\t\t\t\ttitle: $('#search-title').val(),\r\n\t\t\t\t\t\t\tplainText: $('#search-plainText').val(),\r\n\t\t\t\t\t\t\tbeginTime: date.getDate('start'),\r\n\t\t\t\t\t\t\tendTime: date.getDate('end')\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcolumns: [\r\n\t\t\t\t\t{ data: 'title', title: '公告标题', createdCell: tables.createAddTitle },\r\n\t\t\t\t\t{ data: 'adminUserName', title: '用户' },\r\n\t\t\t\t\t{ data: 'plainText', title: '公告内容', createdCell: tables.createAddTitle },\r\n\t\t\t\t\t{ data: 'createTime', width: width.commonTime, title: '创建时间', render: utils.renderCommonTime }\r\n\t\t\t\t],\r\n\t\t\t\tinitComplete: initComplete\r\n\t\t\t}\r\n\t\t));\r\n\t}\r\n\tfunction initEditor() {\r\n\t\teditor = new utils.Editor({\r\n\t\t\tel: $('#plainText')\r\n\t\t}).editorElement;\r\n\t}\r\n\tfunction initComplete() {\r\n\t\tconst table = $('#table').DataTable();\r\n\t\t// 查询功能\r\n\t\tinitEditor();\r\n\t\t$('#search-btn').on('click', () => {\r\n\t\t\ttable.draw();\r\n\t\t});\r\n\r\n\t\ttables.bindPageChange(table); // 绑定修改分页\r\n\r\n\t\t// 删除功能\r\n\t\ttables.delBtnClick({\r\n\t\t\tel: $('#delete-btn'),\r\n\t\t\ttable: table,\r\n\t\t\tname: '公告',\r\n\t\t\turl: 'superadmin/bulletin/delete'\r\n\t\t});\r\n\r\n\t\t// 编辑功能\r\n\t\t$('#edit-btn').on('click', () => {\r\n\t\t\ttables.checkLength({\r\n\t\t\t\taction: '编辑',\r\n\t\t\t\tname: '公告',\r\n\t\t\t\ttable: table,\r\n\t\t\t\tunique: true,\r\n\t\t\t\tcb: (data, row) => {\r\n\t\t\t\t\t$('#create-modal').modal('show').find('.modal-title').text('编辑公告');\r\n\t\t\t\t\tstate = 'update';\r\n\t\t\t\t\t$('#title').val(data.title);\r\n\t\t\t\t\teditor.$txt.html(data.contentHtml);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// 添加功能\r\n\t\t$('#add-btn').on('click', () => {\r\n\t\t\t$('#create-modal').modal('show').find('.modal-title').text('添加公告');\r\n\t\t\tstate = 'add';\r\n\t\t});\r\n\r\n\t\t// 确定编辑\r\n\t\t$('#create-submit-btn').on('click', function () {\r\n\t\t\tlet id: any;\r\n\t\t\tconst title = $('#title').val();\r\n\t\t\tconst plainText = editor.$txt.html();\r\n\t\t\tif (state === 'add') {\r\n\t\t\t\tid = undefined;\r\n\t\t\t} else {\r\n\t\t\t\tconst tableData: any = tables.getSelected(table)[0];\r\n\t\t\t\tid = tableData.id;\r\n\t\t\t};\r\n\t\t\tconst data: any = {\r\n\t\t\t\tid: id,\r\n\t\t\t\ttitle: title,\r\n\t\t\t\tplainText: utils.formatText(plainText),\r\n\t\t\t\tcontentHtml: plainText\r\n\t\t\t};\r\n\t\t\tconst el = $(this);\r\n\t\t\tif (!title) {\r\n\t\t\t\tutils.alertMessage('请填写公告标题!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (title.lenth > 50) {\r\n\t\t\t\tutils.alertMessage('公告标题不能超过50个字!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (plainText === '<p><br></p>' || !plainText) {\r\n\t\t\t\tutils.alertMessage('请填写公告内容!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tutils.loadingBtn(el);\r\n\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: 'superadmin/bulletin/' + state,\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdata: utils.cleanObject(data),\r\n\t\t\t\tsuccess: function (msg) {\r\n\t\t\t\t\tif (!msg.error) {\r\n\t\t\t\t\t\t$('#create-modal').modal('hide');\r\n\t\t\t\t\t\ttable.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tutils.alertMessage(msg.msg, !msg.error);\r\n\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: function () {\r\n\t\t\t\t\tutils.endLoadingBtn(el);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// 清空模态框\r\n\t\t$('#create-modal').on('hidden.bs.modal', function () {\r\n\t\t\t$('#title').val(null);\r\n\t\t\teditor.$txt.html('');\r\n\t\t});\r\n\t}\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/superadmin/bulletin/index/index.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/superadmin/bulletin/index/index.less\n// module id = 955\n// module chunks = 41"],"sourceRoot":""}