{"version":3,"sources":["webpack:///./pages/knowledge/dialog.bak/index/index.ts","webpack:///./pages/knowledge/dialog.bak/index/index.less"],"names":[],"mappings":"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","file":"60.js","sourcesContent":["import './index.less';\r\nimport { alertMessage, loadingBtn, endLoadingBtn, cleanObject, renderSimpleTime, confirmModal } from 'utils';\r\nimport 'new-table';\r\nimport { createAddTitle, VARIABLES, commonConfig, Table, bindPageChange } from 'tables';\r\nimport { SimpleDate } from 'daterangepicker';\r\nnamespace DialogIndex {\r\n\tlet table: any, state: any;\r\n\tlet t;\r\n\t$(function () {\r\n\t\tinitDataTables();\r\n\t\tinitBtn();\r\n\t\tinitDate();\r\n\t});\r\n\tfunction initDataTables() {\r\n\t\tconst width = VARIABLES.width;\r\n\t\ttable = $('#key-table').DataTable(\r\n\t\t\tObject.assign(\r\n\t\t\t\tcommonConfig(),\r\n\t\t\t\t{\r\n\t\t\t\t\tajax: {\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: 'knowledge/dialog/list',\r\n\t\t\t\t\t\tdataSrc: data => { return data.rows; },\r\n\t\t\t\t\t\tdata: d => {\r\n\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\tpage: Math.floor((d.start + d.length) / d.length),\r\n\t\t\t\t\t\t\t\trows: d.length\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\treturn cleanObject(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t{ data: 'dialogName', title: '对话模型名称', createdCell: createAddTitle },\r\n\t\t\t\t\t\t{ data: 'character.vname', width: 8 * width.char, title: '应用到的虚拟角色' },\r\n\t\t\t\t\t\t{ data: 'startTime', width: width.simpleTime, title: '生效时间', render: renderSimpleTime },\r\n\t\t\t\t\t\t{ data: 'endTime', width: width.simpleTime, title: '失效时间', render: renderSimpleTime },\r\n\t\t\t\t\t\t{ data: 'isReaccess', width: 8 * width.char, title: '是否允许重复进入', render: renderAccess }\r\n\t\t\t\t\t]\r\n\t\t\t\t}));\r\n\t\tt = new Table(table);\r\n\t\t$('#search-btn').on('click', function () {\r\n\t\t\t// table.draw();\r\n\t\t\tt.refresh(true);\r\n\t\t});\r\n\t\tbindPageChange(table, $('#page-change'));\r\n        /*$('#page-change').on('change', function () {\r\n            let len = $(this).val();\r\n            table.page.len(len).draw();\r\n        });*/\r\n\r\n\t}\r\n\r\n\tfunction renderAccess(status) {\r\n\t\tswitch (status) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn '不允许';\r\n\t\t\tcase 1:\r\n\t\t\t\treturn '允许';\r\n\t\t\tdefault:\r\n\t\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction initBtnEditDetails() {\r\n\t\t$('#edit-more-btn').on('click', function () {\r\n\t\t\tlet select = $('.selected');\r\n\t\t\tif (select.length > 1) {\r\n\t\t\t\talertMessage('只能编辑一个对话模型!');\r\n\t\t\t}\r\n\t\t\telse if (select.length < 1) {\r\n\t\t\t\talertMessage('请选择要编辑的对话模型!');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet id = table.row(select).data().id;\r\n\t\t\t\twindow.location.href = ctx + '/knowledge/dialog/update?id=' + id;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction initBtn() {\r\n\t\tinitBtnCreate();\r\n\t\tinitBtnDelete();\r\n\t\tinitBtnEditDetails();\r\n\t\tinitBtnEdit();\r\n\t\tinitSubmit();\r\n\t}\r\n\r\n\tfunction initSubmit() {\r\n\t\t$('#create-submit-btn').on('click', function () {\r\n\t\t\tconst dialogName = $.trim($('#dialogName').val()),\r\n\t\t\t\treg = /^[a-zA-Z0-9\\u4E00-\\u9FA5]+$/,\r\n\t\t\t\tir = $('#isReaccess').prop('checked') ? 1 : 0,\r\n\t\t\t\tdata: any = {\r\n\t\t\t\t\tdialogName: dialogName,\r\n\t\t\t\t\tcharacter: $('#select-character').val(),\r\n\t\t\t\t\tstartTime: $('#start-date').val(),\r\n\t\t\t\t\tendTime: $('#end-date').val(),\r\n\t\t\t\t\tisReaccess: ir\r\n\t\t\t\t},\r\n\t\t\t\tel = $(this);\r\n\t\t\tif (!dialogName) {\r\n\t\t\t\talertMessage('请填写对话模型名称!');\r\n\t\t\t}\r\n\t\t\telse if (!dialogName.match(reg)) {\r\n\t\t\t\talertMessage('对话模型名称只能是数字,英文或中文!');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tloadingBtn(el);\r\n\t\t\t\tlet url;\r\n\t\t\t\tlet bool;\r\n\t\t\t\tif (state === 'add') {\r\n\t\t\t\t\turl = 'knowledge/dialog/add';\r\n\t\t\t\t\tbool = true;\r\n\t\t\t\t}\r\n\t\t\t\telse if (state === 'edit') {\r\n\t\t\t\t\turl = 'knowledge/dialog/modify';\r\n\t\t\t\t\tdata.id = table.row($('.selected')).data().id;\r\n\t\t\t\t\tbool = false;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tdata: data,\r\n\t\t\t\t\tsuccess: function (msg) {\r\n\t\t\t\t\t\tif (!msg.error) {\r\n\t\t\t\t\t\t\t$('#create-modal').modal('hide');\r\n\t\t\t\t\t\t\tt.refresh(bool);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\talertMessage(msg.msg, msg.code);\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: function () {\r\n\t\t\t\t\t\tendLoadingBtn(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('#create-modal').on('hidden.bs.modal', function () {\r\n\t\t\tlet select = $('#select-character');\r\n\t\t\tlet btn = $('#create-submit-btn');\r\n\t\t\t$('#dialogName').val(null);\r\n\t\t\t$('#isReaccess').prop('checked', null);\r\n\t\t\tselect.val(select.find('option').first().val())\r\n\t\t\t\t.prop('disabled', null);\r\n\t\t\t$('#start-date').val(moment().format('YYYY-MM-DD'));\r\n\t\t\t$('#end-date').val(moment().add(5, 'year').format('YYYY-MM-DD'));\r\n\t\t\tif (btn.prop('disabled')) {\r\n\t\t\t\tendLoadingBtn(btn);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction initBtnCreate() {\r\n\t\t$('#add-btn').on('click', function () {\r\n\t\t\t$('#create-modal').modal('show').find('.modal-title').text('创建对话模型');\r\n\t\t\tstate = 'add';\r\n\t\t});\r\n\t}\r\n\tfunction initBtnDelete() {\r\n\t\t$('#del-btn').on('click', function () {\r\n\t\t\tlet select = $('.selected');\r\n\t\t\tif (select.length < 1) {\r\n\t\t\t\talertMessage('请选择要删除的对话模型!');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet ids = Array.prototype.map.call(select, function (v) {\r\n\t\t\t\t\tlet data = table.row(v).data();\r\n\t\t\t\t\treturn data.id;\r\n\t\t\t\t});\r\n\t\t\t\tids = ids.join(',');\r\n\r\n\t\t\t\tconfirmModal({\r\n\t\t\t\t\tmsg: '确认删除选中对话吗？',\r\n\t\t\t\t\tcb: (modal, btn) => {\r\n\t\t\t\t\t\tconst end = loadingBtn(btn);\r\n\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\turl: 'knowledge/dialog/delete',\r\n\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tids: ids\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: function (msg) {\r\n\t\t\t\t\t\t\t\talertMessage(msg.msg, msg.code);\r\n\t\t\t\t\t\t\t\tt.refresh();\r\n\t\t\t\t\t\t\t\tmodal.modal('hide');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\t\t\tend();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// BootstrapDialog.show({\r\n\t\t\t\t// \ttitle: '温馨提示',\r\n\t\t\t\t// \tmessage: '确认删除选中对话吗？',\r\n\t\t\t\t// \tsize: BootstrapDialog.SIZE_SMALL,\r\n\t\t\t\t// \tbuttons: [\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\tlabel: '确认',\r\n\t\t\t\t// \t\t\tcssClass: 'btn-danger',\r\n\t\t\t\t// \t\t\taction: function (dialogItself) {\r\n\t\t\t\t// \t\t\t\tdeleteByIds(ids);\r\n\t\t\t\t// \t\t\t\tdialogItself.close();\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t},\r\n\t\t\t\t// \t\t{\r\n\t\t\t\t// \t\t\tlabel: '取消',\r\n\t\t\t\t// \t\t\tcssClass: 'btn-default',\r\n\t\t\t\t// \t\t\taction: function (dialogItself) {\r\n\t\t\t\t// \t\t\t\tdialogItself.close();\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t]\r\n\t\t\t\t// });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction initDate() {\r\n\t\tnew SimpleDate({\r\n\t\t\tel: $('#start-date')\r\n\t\t});\r\n\t\tnew SimpleDate({\r\n\t\t\tel: $('#end-date'),\r\n\t\t\tdate: moment().add(5, 'year')\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction initBtnEdit() {\r\n\t\t$('#edit-btn').on('click', function () {\r\n\t\t\tlet select = $('.selected');\r\n\t\t\tif (select.length > 1) {\r\n\t\t\t\talertMessage('只能编辑一个对话模型!');\r\n\t\t\t}\r\n\t\t\telse if (select.length < 1) {\r\n\t\t\t\talertMessage('请选择要编辑的对话模型!');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet data = table.row(select).data();\r\n\t\t\t\t$('#create-modal').modal('show').find('.modal-title').text('编辑基本信息');\r\n\t\t\t\tstate = 'edit';\r\n\t\t\t\t$('#dialogName').val(data.dialogName);\r\n\t\t\t\t$('#select-character').val(data.character.id).prop('disabled', true);\r\n\t\t\t\t$('#start-date').val(renderSimpleTime(data.startTime));\r\n\t\t\t\t$('#end-date').val(renderSimpleTime(data.endTime));\r\n\t\t\t\tif (data.isReaccess === 0) {\r\n\t\t\t\t\t$('#isReaccess').prop('checked', null);\r\n\t\t\t\t}\r\n\t\t\t\tif (data.isReaccess === 1) {\r\n\t\t\t\t\t$('#isReaccess').prop('checked', true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/knowledge/dialog.bak/index/index.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/knowledge/dialog.bak/index/index.less\n// module id = 916\n// module chunks = 60"],"sourceRoot":""}