{"version":3,"sources":["webpack:///./pages/setting/cs/index2/index.ts"],"names":[],"mappings":"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","file":"71.js","sourcesContent":["import * as utils from 'utils';\r\n\r\ninterface IItem {\r\n\ttitle: string;\r\n\toptions: Array<{\r\n\t\tlabel: string;\r\n\t\tvalue: number;\r\n\t\tinfo?: string;\r\n\t}>;\r\n}\r\n\r\n\r\n\r\nconst form = $('#form');\r\nconst radioArea = $('#radio-area');\r\nconst greetings = $('#greetings');\r\nconst btn = $('#edit-greetings-btn');\r\n\r\nconst radioItems: { [key: string]: IItem } = {\r\n\tisMessage: {\r\n\t\ttitle: '留言功能是否开启',\r\n\t\toptions: [{\r\n\t\t\tlabel: '开启',\r\n\t\t\tvalue: 0\r\n\t\t}, {\r\n\t\t\tlabel: '关闭',\r\n\t\t\tvalue: 1\r\n\t\t}]\r\n\t},\r\n\tserviceMode: {\r\n\t\ttitle: '服务模式',\r\n\t\toptions: [{\r\n\t\t\tlabel: '仅智能客服模式',\r\n\t\t\tvalue: 1,\r\n\t\t\tinfo: '不启用人工客服，所有会话全都由机器人客服进行回复'\r\n\t\t}, {\r\n\t\t\tlabel: '仅人工客服模式',\r\n\t\t\tvalue: 2,\r\n\t\t\tinfo: '不启用智能机器人客服，所有会话全部接入人工客服'\r\n\t\t}, {\r\n\t\t\tlabel: '智能客服+人工客服模式',\r\n\t\t\tvalue: 3,\r\n\t\t\tinfo: '同时启用机器人和人工客服，访客发起对话后优先接入机器人，同时由访客自主选择是否要转接人工客服'\r\n\t\t}]\r\n\t}\r\n};\r\n\r\nfunction fillConfig() {\r\n\t$.post('setting/cs/getAppServiceMode')\r\n\t\t.done(res => {\r\n\t\t\tif (!res.error) {\r\n\t\t\t\tconst data = res.data;\r\n\r\n\t\t\t\tgreetings.val(data.greetings);\r\n\r\n\t\t\t\tradioArea.html(Object.keys(radioItems).map(key => {\r\n\t\t\t\t\tconst item = radioItems[key];\r\n\t\t\t\t\treturn `\r\n\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t<label>${item.title}</label>\r\n\t\t\t\t\t${item.options.map(\r\n\t\t\t\t\t\t\top =>\r\n\t\t\t\t\t\t\t\t`<div class=\"radio\">\r\n\t\t\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"${key}\" value=\"${op.value}\" ${op.value === data[key] ? 'checked' : ''}/>\r\n\t\t\t\t\t\t\t\t\t\t${op.label}\r\n\t\t\t\t\t\t\t\t\t\t&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n\t\t\t\t\t\t\t\t\t\t${op.info || ''}\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>`\r\n\t\t\t\t\t\t).join('')}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t`;\r\n\r\n\t\t\t\t}).join(''));\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\n\r\nfunction updateConfig(data) {\r\n\tconst originData = form.serializeArray().reduce((result, item) => {\r\n\t\tresult[item.name] = item.value;\r\n\t\treturn result;\r\n\t}, {});\r\n\r\n\tconst greet = greetings.val().trim();\r\n\r\n\tObject.assign(originData, {\r\n\t\tgreetings: greet\r\n\t});\r\n\r\n\treturn $.ajax('setting/cs/appServiceMode', {\r\n\t\tmethod: 'POST',\r\n\t\tdata: Object.assign(originData, data)\r\n\t})\r\n\t\t.done(res => {\r\n\t\t\tif (res.error) {\r\n\t\t\t\tfillConfig();\r\n\t\t\t}\r\n\t\t\tutils.alertMessage(res.msg, !res.error);\r\n\t\t});\r\n}\r\n\r\n\r\n\r\nbtn.on('click', () => {\r\n\tconst save = !greetings.prop('readonly');\r\n\tif (save) {\r\n\t\tconst value = greetings.val().trim();\r\n\t\tif (!value) {\r\n\t\t\tutils.alertMessage('人工客服欢迎语不能为空');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst end = utils.loadingBtn(btn);\r\n\t\tconst cb = () => end();\r\n\r\n\t\tupdateConfig({ greetings: value })\r\n\t\t\t.then((res) => {\r\n\t\t\t\tif (!res.error) {\r\n\t\t\t\t\tfillConfig();\r\n\t\t\t\t\tgreetings.prop('readonly', true);\r\n\t\t\t\t\tbtn.html('编辑');\r\n\t\t\t\t}\r\n\t\t\t\tcb();\r\n\t\t\t});\r\n\t} else {\r\n\t\tgreetings.prop('readonly', false);\r\n\t\tbtn.html('保存');\r\n\t}\r\n\t// $('#editor-modal').modal('show');\r\n});\r\n\r\n// $('#editor-modal').one('shown.bs.modal', () => {\r\n// \tconst el = $('#editor');\r\n// \tconst html = el.html();\r\n\r\n// \tel.empty();\r\n\r\n// \tconst edt = new wangEditor(el);\r\n\r\n// \tedt.create();\r\n\r\n// \tel.html(html);\r\n\r\n// \t$('#editor-yes-btn').on('click', () => {\r\n// \t\tconst value = $('#editor').html();\r\n// \t\tif (!$('#editor').text().trim()) {\r\n// \t\t\tutils.alertMessage('人工客服欢迎语不能为空');\r\n// \t\t\treturn;\r\n// \t\t}\r\n// \t\tconst end = utils.loadingBtn($('#editor-yes-btn'));\r\n// \t\tconst cb = () => end();\r\n\r\n// \t\tupdateConfig({ greetings: value })\r\n// \t\t\t.then((res) => {\r\n// \t\t\t\tif (!res.error) {\r\n// \t\t\t\t\tfillConfig();\r\n// \t\t\t\t\t$('#editor-modal').modal('hide');\r\n// \t\t\t\t}\r\n// \t\t\t\tcb();\r\n// \t\t\t});\r\n// \t});\r\n// });\r\n\r\n\r\nform.on('change', 'input:radio', (e) => {\r\n\tconst radio = $(e.currentTarget),\r\n\t\tname = radio.prop('name'),\r\n\t\tvalue = radio.val();\r\n\r\n\tupdateConfig({ [name]: value });\r\n});\r\n\r\n\r\n\r\nfillConfig();\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/setting/cs/index2/index.ts"],"sourceRoot":""}