{"version":3,"sources":["webpack:///./pages/knowledge/dialog.bak/update/index.ts","webpack:///./pages/knowledge/dialog.bak/update/index.less"],"names":[],"mappings":"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","file":"59.js","sourcesContent":["declare const dialogid: any;\r\nimport './index.less';\r\nimport 'new-table';\r\nimport { getPage, createAddTitle, getTableHeight, simpleConfig } from 'tables';\r\nimport { alertMessage, Editor, ClassifyTree, cleanObject, CommonDate, bindInput, addLoadingBg, bindEnter, confirmModal, formatText, getMinContentHeight } from 'utils';\r\nimport 'tree';\r\nimport 'editor';\r\nimport 'daterangepicker';\r\n\r\nnamespace dialogUpdate {\r\n\tlet editor, classify: ClassifyTree, date: CommonDate, selected, target, tree: JSTree;\r\n\tconst defaultQuestion = '默认问题',\r\n\t\tdefaultAnswer = '默认回复',\r\n\t\tdefaultAnswerHtml = '<p>默认回复</p>';\r\n\t$(function () {\r\n\t\tinitTree();\r\n\t\tinitEditor();\r\n\t\tinitCorpus();\r\n\t});\r\n\r\n\tfunction getTreeData(cb: Function) {\r\n\t\t$.ajax({\r\n\t\t\ttype: 'POST',\r\n\t\t\turl: 'knowledge/dialog/getDetail',\r\n\t\t\tdata: {\r\n\t\t\t\tid: dialogid\r\n\t\t\t},\r\n\t\t\tsuccess: (msg) => {\r\n\t\t\t\tconst data = msg.rows,\r\n\t\t\t\t\ttreeData = data.map(function (v) {\r\n\t\t\t\t\t\tconst d: any = {\r\n\t\t\t\t\t\t\tid: v.id,\r\n\t\t\t\t\t\t\tqId: v.expectWord.id,\r\n\t\t\t\t\t\t\tparent: v.parent,\r\n\t\t\t\t\t\t\ttext: v.expectWord.literal,\r\n\t\t\t\t\t\t\tplainText: v.content.plainText,\r\n\t\t\t\t\t\t\tcontentHtml: v.content.contentHtml,\r\n\t\t\t\t\t\t\tfromServer: true,\r\n\t\t\t\t\t\t\tsynedPairId: v.synedPairId\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\td.current = Object.assign({}, d);\r\n\t\t\t\t\t\tif (!v.parent) {\r\n\t\t\t\t\t\t\td.parent = '#';\r\n\t\t\t\t\t\t\td.state = {\r\n\t\t\t\t\t\t\t\t'selected': true\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn d;\r\n\t\t\t\t\t});\r\n\t\t\t\tif (data.length > 0) {\r\n\t\t\t\t\t$('#select-character').val(data[0].character.id);\r\n\t\t\t\t}\r\n\t\t\t\tcb(treeData);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction initTree() {\r\n\t\tlet endLoadTree = null,\r\n\t\t\tendLoadTable = null;\r\n\t\t$('.x_panel').css('minHeight', getMinContentHeight() - 5);\r\n\t\t$(document).ajaxStart(() => {\r\n\t\t\tif (!endLoadTree) {\r\n\t\t\t\tendLoadTree = loadTree();\r\n\t\t\t}\r\n\t\t\tif (!endLoadTable) {\r\n\t\t\t\tendLoadTable = loadTable();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$(document).ajaxComplete(() => {\r\n\t\t\tif (endLoadTree) {\r\n\t\t\t\tendLoadTree();\r\n\t\t\t\tendLoadTree = null;\r\n\t\t\t}\r\n\t\t\tif (endLoadTable) {\r\n\t\t\t\tendLoadTable();\r\n\t\t\t\tendLoadTable = null;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tgetTreeData((treeData) => {\r\n\t\t\t$('#tree').height('auto');\r\n\t\t\t$('#tree').jstree({\r\n\t\t\t\t'core': {\r\n\t\t\t\t\t'data': treeData,\r\n\t\t\t\t\t'strings': {\r\n\t\t\t\t\t\t'Loading ...': '加载中...'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'animation': 100,\r\n\t\t\t\t\t'themes': {\r\n\t\t\t\t\t\t'icons': false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'check_callback': true,\r\n\t\t\t\t\t'multiple': false\r\n\t\t\t\t},\r\n\t\t\t\t'dnd': {\r\n\t\t\t\t\t'large_drag_target': true\r\n\t\t\t\t},\r\n\t\t\t\t'contextmenu': {\r\n\t\t\t\t\t'items': {\r\n\t\t\t\t\t\t'create': {\r\n\t\t\t\t\t\t\t'separator_before': false,\r\n\t\t\t\t\t\t\t'separator_after': true,\r\n\t\t\t\t\t\t\t'_disabled': false,\r\n\t\t\t\t\t\t\t'label': '新建',\r\n\t\t\t\t\t\t\t'action': treeAddAction\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t'rename': {\r\n\t\t\t\t\t\t\t'separator_before': false,\r\n\t\t\t\t\t\t\t'separator_after': false,\r\n\t\t\t\t\t\t\t'_disabled': false,\r\n\t\t\t\t\t\t\t'label': '重命名',\r\n\t\t\t\t\t\t\t'action': (data) => {\r\n\t\t\t\t\t\t\t\tconst inst = $.jstree.reference(data.reference),\r\n\t\t\t\t\t\t\t\t\tobj = inst.get_node(data.reference);\r\n\t\t\t\t\t\t\t\tinst.edit(obj);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t'remove': {\r\n\t\t\t\t\t\t\t'separator_before': false,\r\n\t\t\t\t\t\t\t'icon': false,\r\n\t\t\t\t\t\t\t'separator_after': false,\r\n\t\t\t\t\t\t\t'_disabled': false,\r\n\t\t\t\t\t\t\t'label': '删除',\r\n\t\t\t\t\t\t\t'action': (data) => {\r\n\t\t\t\t\t\t\t\tconst inst = $.jstree.reference(data.reference),\r\n\t\t\t\t\t\t\t\t\tobj = inst.get_node(data.reference);\r\n\t\t\t\t\t\t\t\tif (obj.parent === '#') {\r\n\t\t\t\t\t\t\t\t\talertMessage('无法删除根节点!');\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (inst.is_selected(obj)) {\r\n\t\t\t\t\t\t\t\t\tinst.delete_node(inst.get_selected());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\tinst.delete_node(obj);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttree.deselect_all();\r\n\t\t\t\t\t\t\t\ttree.select_node(obj.parent);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t'types': {\r\n\t\t\t\t\t'#': {\r\n\t\t\t\t\t\t'max_children': 1\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t'plugins': ['dnd', 'contextmenu', 'types', 'conditionalselect', 'unique'],\r\n\t\t\t\t'conditionalselect': checkLeave\r\n\t\t\t})\r\n\t\t\t\t.on('changed.jstree', updateContent)\r\n\t\t\t\t.on('rename_node.jstree', updateName)\r\n\t\t\t\t.on('delete_node.jstree', deleteNode)\r\n\t\t\t\t.on('move_node.jstree', moveNode)\r\n\t\t\t\t.one('ready.jstree', treeInitComplete);\r\n\r\n\t\t\tbindInput($('#question'), 'input keyup change', rename);\r\n\t\t});\r\n\r\n\r\n\t}\r\n\r\n\tfunction refreshTree() {\r\n\t\tgetTreeData((treeData) => {\r\n\t\t\t(tree as any).settings.core.data = treeData;\r\n\t\t\ttree.refresh(true, null);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction rename(val) {\r\n\t\tconst data = tree.get_selected(true)[0];\r\n\t\tdata.original.current.text = val;\r\n\t\ttree.rename_node(data.id, val);\r\n\t}\r\n\r\n\tfunction initEditor() {\r\n\t\tconst e = new Editor({\r\n\t\t\tel: $('#editor'),\r\n\t\t\tonChange: updateContentData\r\n\t\t});\r\n\t\teditor = e.editorElement;\r\n\t}\r\n\r\n\tfunction updateContentData() {\r\n\t\tconst data = tree.get_selected(true)[0].original.current;\r\n\t\tconst html = editor.$txt.html();\r\n\t\tif (data.contentHtml !== html) {\r\n\t\t\tdata.contentHtml = html;\r\n\t\t\tdata.plainText = formatText(html);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateName(e, text) {\r\n\t\tconst q = $('#question'),\r\n\t\t\tt = $.trim(q.val());\r\n\t\tif (t === text.text) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttree.get_selected(true)[0].original.current.text = text.text;\r\n\t\tq.val(text.text);\r\n\t}\r\n\r\n\tfunction updateContent(e, t) {\r\n\t\tif (!tree) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst data = tree.get_selected(true);\r\n\t\tif (data.length !== 1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet text, html;\r\n\t\tconst d = data[0].original.current;\r\n\r\n\t\ttext = d.text;\r\n\t\thtml = d.contentHtml ? d.contentHtml : '<p></p>';\r\n\r\n\t\t// checkAble(d);\r\n\r\n\t\tif ($('#question').val() === text && editor.$txt.html() === html) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t$('#question').val(text);\r\n\t\teditor.$txt.html(html);\r\n\t}\r\n\tfunction deleteNode(node, parent) {\r\n\t\tconst id = parent.node.original.current.id;\r\n\t\tif (id) {\r\n\t\t\t$.ajax({\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\turl: 'knowledge/dialog/update/removeNode',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tid: id\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: function (msg) {\r\n\t\t\t\t\tif (msg.error) {\r\n\t\t\t\t\t\talertMessage(msg.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initEditForm() {\r\n\t\t$('.edit-form').show();\r\n\t\tinitSave();\r\n\t}\r\n\r\n\tfunction moveNode(node, parent, position, oldParent) {\r\n\t\tconst nodeEl = parent.node;\r\n\t\ttree.deselect_all();\r\n\t\ttree.select_node(nodeEl.id);\r\n\t\ttree.open_node(parent.parent);\r\n\t\t$.ajax({\r\n\t\t\turl: 'knowledge/dialog/update/moveNode',\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tid: nodeEl.id,\r\n\t\t\t\tparentId: nodeEl.parent\r\n\t\t\t},\r\n\t\t\tsuccess: (msg) => {\r\n\t\t\t\talertMessage(msg.msg, !msg.error);\r\n\t\t\t\tif (msg.error) {\r\n\t\t\t\t\trefreshTree();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: refreshTree\r\n\t\t});\r\n\t}\r\n\r\n\tfunction initSave() {\r\n\t\t$('#submit-btn').on('click', function () {\r\n\t\t\tconst origin = tree.get_selected(true)[0].original,\r\n\t\t\t\tdata = origin.current,\r\n\t\t\t\td: any = {\r\n\t\t\t\t\tid: data.id\r\n\t\t\t\t};\r\n\r\n\t\t\tif (data.text === defaultQuestion || data.plainText === defaultAnswerHtml) {\r\n\t\t\t\talertMessage(`问题或回复不能为${defaultQuestion}和${defaultAnswer}`);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (origin.contentHtml === data.contentHtml && origin.text === data.text) {\r\n\t\t\t\talertMessage('问题或回复未发生改动');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (selected && selected.questionId /*&& selected.id*/) {\r\n\t\t\t\tObject.assign(d, {\r\n\t\t\t\t\tpairId: selected.id\r\n\t\t\t\t});\r\n\t\t\t\tsave(d, 1);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tObject.assign(d, {\r\n\t\t\t\t\texpectword: data.text,\r\n\t\t\t\t\tcontent: data.plainText,\r\n\t\t\t\t\tcontentHtml: data.contentHtml\r\n\t\t\t\t});\r\n\t\t\t\tif (data.qId && data.synedPairId !== 1) {\r\n\t\t\t\t\tcheckDialog(d, data.qId);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsave(d);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t}\r\n\r\n\tfunction save(data, synedPairId: number = 0) {\r\n\t\tconst d = tree.get_selected(true)[0].original;\r\n\t\t$.ajax({\r\n\t\t\turl: 'knowledge/dialog/update/modifyNode',\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: data,\r\n\t\t\tsuccess: (msg) => {\r\n\t\t\t\talertMessage(msg.msg, !msg.error);\r\n\t\t\t\tif (!msg.error) {\r\n\t\t\t\t\td.current.synedPairId = synedPairId;\r\n\t\t\t\t\tObject.assign(d, d.current);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\trefreshTree();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: refreshTree\r\n\t\t});\r\n\t}\r\n\r\n\tfunction checkDialog(data, qid) {\r\n\t\t$.ajax({\r\n\t\t\turl: 'knowledge/dialog/update/isExistPm',\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tqid: qid\r\n\t\t\t},\r\n\t\t\tsuccess: (msg) => {\r\n\t\t\t\tif (!msg.error) {\r\n\t\t\t\t\tif (msg.msg === true) {\r\n\t\t\t\t\t\tconfirmModal({\r\n\t\t\t\t\t\t\tmsg: '对话模型的问题已经被修改,是否希望在语料库中继续保留之前的问答对及复述',\r\n\t\t\t\t\t\t\ttext: '保留',\r\n\t\t\t\t\t\t\tclassName: 'btn-primary',\r\n\t\t\t\t\t\t\tcb: (modal, btn) => {\r\n\t\t\t\t\t\t\t\tmodal.modal('hide');\r\n\t\t\t\t\t\t\t\tsave(data);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcancelText: '不保留',\r\n\t\t\t\t\t\t\tcancel: (modal, btn) => {\r\n\t\t\t\t\t\t\t\tmodal.modal('hide');\r\n\t\t\t\t\t\t\t\tObject.assign(data, { delFlag: 1 });\r\n\t\t\t\t\t\t\t\tsave(data);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tsave(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction treeAddAction(data) {\r\n\t\tconst inst = $.jstree.reference(data.reference),\r\n\t\t\tobj = inst.get_node(data.reference);\r\n\t\tif (!checkLeave(Object.assign({}, obj, { id: null }))) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfor (let i of obj.children) {\r\n\t\t\tconst d = tree.get_node(i).original.current;\r\n\t\t\tif (d.text === defaultQuestion || d.contentHtml === defaultAnswerHtml) {\r\n\t\t\t\ttree.deselect_all();\r\n\t\t\t\ttree.select_node(i);\r\n\t\t\t\talertMessage(`存在${defaultQuestion}或${defaultAnswer},请保存或删除该问题后再添加节点`);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// const endLoadTree = loadTree();\r\n\t\t$.ajax({\r\n\t\t\turl: 'knowledge/dialog/update/addNode',\r\n\t\t\ttype: 'POST',\r\n\t\t\tdata: {\r\n\t\t\t\tparentId: obj.id\r\n\t\t\t},\r\n\t\t\tsuccess: (msg) => {\r\n\t\t\t\tif (!msg.error) {\r\n\t\t\t\t\tconst d: any = {\r\n\t\t\t\t\t\tid: msg.msg,\r\n\t\t\t\t\t\ttext: defaultQuestion,\r\n\t\t\t\t\t\tplainText: defaultAnswer,\r\n\t\t\t\t\t\tcontentHtml: defaultAnswerHtml,\r\n\t\t\t\t\t\tparent: obj.id\r\n\t\t\t\t\t};\r\n\t\t\t\t\td.current = Object.assign({}, d);\r\n\t\t\t\t\tinst.create_node(obj, d, 'last', (newNode) => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\ttree.deselect_all();\r\n\t\t\t\t\t\t\ttree.select_node(newNode);\r\n\t\t\t\t\t\t\tinst.edit(newNode);\r\n\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\talertMessage(msg.msg);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction initCorpus() {\r\n\t\tconst btn = $('#show-coupus-btn');\r\n\t\tbtn.one('click', () => {\r\n\t\t\tconst showbtn = $('<button type=\"button\" class=\"btn btn-sm btn-primary\" id=\"show-btn\">选择现有语料</button>')\r\n\t\t\t\t.hide()\r\n\t\t\t\t.on('click', () => {\r\n\t\t\t\t\t$('#show-coupus-wrap').show();\r\n\t\t\t\t\tshowbtn.hide();\r\n\t\t\t\t});\r\n\t\t\tbtn.after(showbtn)\r\n\t\t\t\t.remove();\r\n\t\t\tbeforeInitTable();\r\n\t\t\t$('#table').DataTable(\r\n\t\t\t\tObject.assign(\r\n\t\t\t\t\tsimpleConfig('single'),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tajax: {\r\n\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\turl: 'knowledge/dialog/getPairs',\r\n\t\t\t\t\t\t\tdataSrc: data => data.rows,\r\n\t\t\t\t\t\t\tdata: (data: any) => {\r\n\t\t\t\t\t\t\t\tconst d = {\r\n\t\t\t\t\t\t\t\t\tkeyword: $.trim($('#form-question').val()),\r\n\t\t\t\t\t\t\t\t\tanswerkeyword: $.trim($('#form-answer').val()),\r\n\t\t\t\t\t\t\t\t\tclassifys: classify.selected.join(','),\r\n\t\t\t\t\t\t\t\t\t// corpusStatus: $(\"#select-status\").val(),\r\n\t\t\t\t\t\t\t\t\tcharacter: $('#select-character').val(),\r\n\t\t\t\t\t\t\t\t\tpage: getPage(data),\r\n\t\t\t\t\t\t\t\t\trows: data.length,\r\n\t\t\t\t\t\t\t\t\tpushway: $('#select-pushway').val(),\r\n\t\t\t\t\t\t\t\t\tbeginTime: date.getDate('start'),\r\n\t\t\t\t\t\t\t\t\tendTime: date.getDate('end')\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn cleanObject(d);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tscrollY: getTableHeight() - 504,\r\n\t\t\t\t\t\tscrollCollapse: true,\r\n\t\t\t\t\t\tpageLength: 20,\r\n\t\t\t\t\t\tprocessing: false,\r\n\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t{ name: 'question', data: 'question', title: '问题', width: '50%', createdCell: createAddTitle },\r\n\t\t\t\t\t\t\t{ name: 'plainText', data: 'plainText', title: '回复', width: '50%', createdCell: createAddTitle }\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tdrawCallback: () => {\r\n\t\t\t\t\t\t\ttableEnable();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tinitComplete: initComplete\r\n\t\t\t\t\t}))\r\n\t\t\t\t.on('select', tableChange)\r\n\t\t\t\t.on('deselect', tableEnable);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction beforeInitTable() {\r\n\t\tconst wrap = $('#show-coupus-wrap');\r\n\t\twrap.removeClass('hidden');\r\n\t\t$('#hide-btn').on('click', () => {\r\n\t\t\tdeselectTable();\r\n\t\t\twrap.hide();\r\n\t\t\t$('#show-btn').show();\r\n\t\t});\r\n\t\tinitClassify();\r\n\t\tinitDate();\r\n\t}\r\n\r\n\tfunction tableChange(e, dt, type, indexes) {\r\n\t\tif (type === 'row') {\r\n\t\t\tconst q = $('#question');\r\n\t\t\tselected = dt.row(indexes).data();\r\n\t\t\tq.val(selected.question);\r\n\t\t\teditor.$txt.html(selected.htmlContent);\r\n\t\t\trename(selected.question);\r\n\t\t\ttableDIsable();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tableDIsable() {\r\n\t\t$('#question').prop('disabled', true);\r\n\t\teditor.disable();\r\n\t}\r\n\r\n\tfunction tableEnable() {\r\n\t\tif (selected) {\r\n\t\t\tselected = null;\r\n\t\t}\r\n\t\t$('#question').prop('disabled', null);\r\n\t\teditor.enable();\r\n\t}\r\n\r\n    /*    function checkAble(data) {\r\n            $(\"#hide-btn\").click();\r\n            if (data.synedPairId) {\r\n                // $(\"#show-btn,#show-coupus-btn\").hide();\r\n                tableDIsable();\r\n            }\r\n            else {\r\n                // $(\"#show-btn,#show-coupus-btn\").show();\r\n                tableEnable();\r\n            }\r\n        }*/\r\n\r\n\tfunction initClassify() {\r\n\t\tconst d = selectData.classify.map(function (v) {\r\n\t\t\tconst data = {\r\n\t\t\t\tid: v.id,\r\n\t\t\t\ttext: v.name,\r\n\t\t\t\tparent: v.parent\r\n\t\t\t};\r\n\t\t\treturn data;\r\n\t\t});\r\n\r\n\t\td.unshift({\r\n\t\t\ttext: '所有问题',\r\n\t\t\tid: 0,\r\n\t\t\tparent: '#',\r\n\t\t\tstate: {\r\n\t\t\t\topened: true\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tclassify = new ClassifyTree({\r\n\t\t\tel: $('#classify'),\r\n\t\t\tdata: d,\r\n\t\t\tselected: true,\r\n\t\t\tmultiple: true\r\n\t\t});\r\n\t}\r\n\r\n\tfunction initDate() {\r\n\t\tdate = new CommonDate({\r\n\t\t\tel: $('#form-date')\r\n\t\t});\r\n\t}\r\n\r\n\tfunction deselectTable() {\r\n\t\tif ($('#show-coupus-btn').length <= 0 && selected) {\r\n\t\t\tconst table = $('#table').DataTable();\r\n\t\t\ttable.rows().deselect();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initComplete() {\r\n\t\tconst table = $('#table').DataTable();\r\n\t\t$('#search-btn').on('click', () => {\r\n\t\t\ttable.draw();\r\n\t\t});\r\n\t\tbindEnter($('#form-question,#form-answer'), () => {\r\n\t\t\ttable.draw();\r\n\t\t});\r\n\t}\r\n\r\n\tfunction checkLeave(t): boolean {\r\n\t\tconst select = tree.get_selected(true)[0],\r\n\t\t\tdata = select.original,\r\n\t\t\tcurrent = data.current;\r\n\t\tif ($('#submit-btn').prop('disabled')) {\r\n\t\t\talertMessage('正在保存中,请稍等');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (select.id === t.id) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (data.contentHtml === current.contentHtml && data.text === current.text) {\r\n\t\t\tdeselectTable();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t$('#leave-confirm-modal').modal('show');\r\n\t\ttarget = t;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction treeInitComplete() {\r\n\t\ttree = $('#tree').jstree(true);\r\n\t\ttree.open_all();\r\n\t\tinitEditForm();\r\n\t\tupdateContent(null, null);\r\n\t\t$('#leave-btn').on('click', () => {\r\n\t\t\tconst select = tree.get_selected(true)[0],\r\n\t\t\t\tdata = select.original,\r\n\t\t\t\tcurrent = data.current;\r\n\t\t\tif (!target) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdeselectTable();\r\n\r\n\t\t\tfor (let i in current) {\r\n\t\t\t\tcurrent[i] = data[i];\r\n\t\t\t}\r\n\t\t\t$('#leave-confirm-modal').modal('hide');\r\n\t\t\ttree.rename_node(select.id, data.text);\r\n\t\t\tif (target.id) {// 点击\r\n\t\t\t\ttree.deselect_all();\r\n\t\t\t\ttree.select_node(target.id);\r\n\t\t\t} else {// 新建\r\n\t\t\t\ttreeAddAction({ reference: select.id });\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t\t$('#leave-confirm-modal').on('hidden.bs.modal', () => {\r\n\t\t\ttarget = null;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction loadTree() {\r\n\t\treturn addLoadingBg($('#tree-wrap'), $('#tree'));\r\n\t}\r\n\r\n\tfunction loadTable() {\r\n\t\treturn addLoadingBg($('#table-wrap'), $('#table-blur'));\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/knowledge/dialog.bak/update/index.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/knowledge/dialog.bak/update/index.less\n// module id = 917\n// module chunks = 59"],"sourceRoot":""}