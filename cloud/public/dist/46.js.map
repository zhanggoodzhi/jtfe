{"version":3,"sources":["webpack:///./pages/statistics/service/index/index.ts","webpack:///./pages/statistics/service/index/index.less"],"names":[],"mappings":"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","file":"46.js","sourcesContent":["import { getMinContentHeight, cleanObject, renderMilliTimeLength, renderPercent } from 'utils';\r\nimport { Table } from 'new-table';\r\nimport { SpssBtnDate, formatter, axisLabel, initTip } from '../../spssUtils';\r\nimport * as echarts from 'echarts/lib/echarts';\r\n// import 'echarts/lib/chart/bar';\r\nimport 'echarts/lib/chart/line';\r\nimport 'echarts/lib/component/tooltip';\r\n// import 'echarts/lib/component/title';\r\nimport 'echarts/lib/component/legend';\r\nimport 'echarts/lib/component/toolbox';\r\nimport './index.less';\r\nnamespace StatisticsServiceIndex {\r\n\tlet chart;\r\n\tlet datePicker;\r\n\tlet serviceTable;\r\n\tlet service;\r\n\tlet type = '0';\r\n\t$(() => {\r\n\t\tinit();\r\n\t});\r\n\tfunction init() {\r\n\t\tinitTip([{\r\n\t\t\tel: $('#service-tip'),\r\n\t\t\tcontent: `\r\n\t\t\t统计人工客服的会话数，收到的问题消息数，发出的回复消息数，在线总时长，会话总时长，在线人工利用，平均相应时长以及平均满意率\r\n\t\t\t`\r\n\t\t}]);\r\n\t\tinitDatePicker();\r\n\t\tinitChartHeight();\r\n\t\trenderSelectDataAndDrawChart();\r\n\t\tdrawTable();\r\n\t\tbindEvent();\r\n\t}\r\n\tfunction renderSelectDataAndDrawChart() {\r\n\t\t$.ajax({\r\n\t\t\turl: 'spss/staffService/getServicer',\r\n\t\t\tmethod: 'GET'\r\n\t\t}).done((data) => {\r\n\t\t\tconst selectEl = $('#service-select');\r\n\t\t\tselectEl.empty();\r\n\t\t\tif (data.length === 0) {\r\n\t\t\t\tselectEl.prop('disabled', true).append(`\r\n\t\t\t\t<option>无人工客服</option>\r\n\t\t\t`);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tselectEl.prop('disabled', false);\r\n\t\t\tfor (let v of data) {\r\n\t\t\t\tselectEl.append(`\r\n\t\t\t\t<option value=\"${v.id}\">${v.alias}</option>\r\n\t\t\t`);\r\n\t\t\t}\r\n\t\t\tservice = data[0].id;\r\n\t\t\tdrawChart();\r\n\t\t});\r\n\t}\r\n\tfunction drawTable() {\r\n\t\t$.ajax({\r\n\t\t\ttype: 'POST',\r\n\t\t\turl: 'spss/staffService/serviceStatistics',\r\n\t\t\tdata: {\r\n\t\t\t\tmode: datePicker.mode,\r\n\t\t\t\tstartDay: datePicker.date.startDay,\r\n\t\t\t\tendDay: datePicker.date.endDay\r\n\t\t\t}\r\n\t\t}).done((msg) => {\r\n\t\t\tif (serviceTable) {\r\n\t\t\t\tserviceTable.refresh(msg);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tserviceTable = new Table(\r\n\t\t\t\t{\r\n\t\t\t\t\tel: $('#service-table'),\r\n\t\t\t\t\toptions: {\r\n\t\t\t\t\t\tinfo: false,\r\n\t\t\t\t\t\tdata: msg,\r\n\t\t\t\t\t\tpaging: false,\r\n\t\t\t\t\t\tscrollY: '300px',\r\n\t\t\t\t\t\tserverSide: false,\r\n\t\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t\t{ data: 'servicerName', title: '客服名称' },\r\n\t\t\t\t\t\t\t{ data: 'sessionCount', title: '会话数' },\r\n\t\t\t\t\t\t\t{ data: 'servicerReceiveMsg', title: '问题消息数' },\r\n\t\t\t\t\t\t\t{ data: 'servicerSendMsg', title: '回复消息数' },\r\n\t\t\t\t\t\t\t{ data: 'onlineTimeAll', title: '在线总时长<i class=\"table-tip fa fa-question-circle\" id=\"t1-tip\"></i>', render: (time) => { return time === '--' ? '--' : renderMilliTimeLength(time); } },\r\n\t\t\t\t\t\t\t{ data: 'sessionTimeAll', title: '会话总时长<i class=\"table-tip fa fa-question-circle\" id=\"t2-tip\"></i>', render: (time) => { return time === '--' ? '--' : renderMilliTimeLength(time); } },\r\n\t\t\t\t\t\t\t{ data: 'utilization', title: '在线人工利用率<i class=\"table-tip fa fa-question-circle\" id=\"t3-tip\"></i>', render: (text) => { return text === '--' ? '--' : renderPercent(text); } },\r\n\t\t\t\t\t\t\t{ data: 'responTimeAll', title: '平均响应时长<i class=\"table-tip fa fa-question-circle\" id=\"t4-tip\"></i>', render: (time) => { return time === '--' ? '--' : renderMilliTimeLength(time); } },\r\n\t\t\t\t\t\t\t{ data: 'statisticsRate', title: '平均满意率<i class=\"table-tip fa fa-question-circle\" id=\"t5-tip\"></i>', render: (text) => { return text === '--' ? '--' : renderPercent(text); } }\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tinitComplete: () => {\r\n\t\t\t\t\t\t\tinitTip([{\r\n\t\t\t\t\t\t\t\tel: $('#t1-tip'),\r\n\t\t\t\t\t\t\t\tcontent: `\r\n\t\t\t\t\t\t\t\t人工客服的总在线时长\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\tel: $('#t2-tip'),\r\n\t\t\t\t\t\t\t\tcontent: `\r\n\t\t\t\t\t\t\t\t人工客服的总会话时长\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\tel: $('#t3-tip'),\r\n\t\t\t\t\t\t\t\tcontent: `\r\n\t\t\t\t\t\t\t\t人工客服的会话总时长在在线总时长中的占比\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\tel: $('#t4-tip'),\r\n\t\t\t\t\t\t\t\tcontent: `\r\n\t\t\t\t\t\t\t\t来访用户发起转人工请求到人工客服接受请求的平均耗时\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\tel: $('#t5-tip'),\r\n\t\t\t\t\t\t\t\tplacement: 'left',\r\n\t\t\t\t\t\t\t\tcontent: `\r\n\t\t\t\t\t\t\t\t被来访用户评价为满意和非常满意的会话数在所有参评会话数中的占比\r\n\t\t\t\t\t\t\t`\r\n\t\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\t$('#export').on('click', function () {\r\n\t\t\t\t\t\t\t\tconst href = `spss/staffService/exportServiceStatisticsExcel?${$.param({\r\n\t\t\t\t\t\t\t\t\tmode: datePicker.mode,\r\n\t\t\t\t\t\t\t\t\tstartDay: datePicker.date.startDay,\r\n\t\t\t\t\t\t\t\t\tendDay: datePicker.date.endDay\r\n\t\t\t\t\t\t\t\t})}`;\r\n\t\t\t\t\t\t\t\twindow.open(href);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t});\r\n\r\n\t\t// const data = [{\r\n\t\t// \trank: 1,\r\n\t\t// \tquestion: 2,\r\n\t\t// \ttype: 3,\r\n\t\t// \tnumber: 4\r\n\t\t// }, {\r\n\t\t// \trank: 1,\r\n\t\t// \tquestion: 2,\r\n\t\t// \ttype: 3,\r\n\t\t// \tnumber: 4\r\n\t\t// }, {\r\n\t\t// \trank: 1,\r\n\t\t// \tquestion: 2,\r\n\t\t// \ttype: 3,\r\n\t\t// \tnumber: 4\r\n\t\t// }];\r\n\t\t// const table = $('#service-table').DataTable(\r\n\t\t// \t{\r\n\t\t// \t\tdata,\r\n\t\t// \t\tscrollY: '300px',\r\n\t\t// \t\tserverSide: false,\r\n\t\t// \t\tinfo: false,\r\n\t\t// \t\tcolumns: [\r\n\t\t// \t\t\t{ data: 'rank', title: '排行' },\r\n\t\t// \t\t\t{ data: 'question', title: '类型' },\r\n\t\t// \t\t\t{ data: 'type', title: '参评数' },\r\n\t\t// \t\t\t{ data: 'number', title: '参评率' },\r\n\t\t// \t\t\t{ data: 'type', title: '好评数' },\r\n\t\t// \t\t\t{ data: 'type', title: '好评率' },\r\n\t\t// \t\t\t{ data: 'type', title: '差评数' },\r\n\t\t// \t\t\t{ data: 'type', title: '差评率' }\r\n\t\t// \t\t]\r\n\t\t// \t});\r\n\t\t// serviceTable = new Table(table);\r\n\t}\r\n\tfunction initChartHeight() {\r\n\t\tlet chartHeight = getMinContentHeight() - 323;\r\n\t\tlet minChartHeight = 300;\r\n\t\tif (chartHeight < minChartHeight) {\r\n\t\t\tchartHeight = minChartHeight;\r\n\t\t}\r\n\t\t$('.chart-wrap').height(chartHeight);\r\n\t}\r\n\tfunction initDatePicker() {\r\n\t\tconst el = $('.spss-time-container .date-range-picker');\r\n\t\tdatePicker = new SpssBtnDate({\r\n\t\t\tel,\r\n\t\t\tonClick: (mode, date) => {\r\n\t\t\t\tdrawTable();\r\n\t\t\t\trenderSelectDataAndDrawChart();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tfunction drawChart() {\r\n\t\tif (!chart) {\r\n\t\t\tchart = echarts.init(document.getElementById('chart'));\r\n\t\t}\r\n\t\tgetChartData((data) => {\r\n\t\t\tchart.clear();\r\n\t\t\tchart.setOption(getOp(data));\r\n\t\t});\r\n\t}\r\n\tfunction bindEvent() {\r\n\t\t$('#service-select').on('change', function () {\r\n\t\t\tservice = $(this).val();\r\n\t\t\tdrawChart();\r\n\t\t});\r\n\t\t$('#data-select').on('change', function () {\r\n\t\t\ttype = $(this).val();\r\n\t\t\tdrawChart();\r\n\t\t});\r\n\t}\r\n\tfunction getChartData(cb) {\r\n\t\t$.ajax({\r\n\t\t\turl: 'spss/staffService/lineChart',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: {\r\n\t\t\t\tservicerId: service,\r\n\t\t\t\ttype,\r\n\t\t\t\tmode: datePicker.mode,\r\n\t\t\t\tstartDay: datePicker.date.startDay,\r\n\t\t\t\tendDay: datePicker.date.endDay\r\n\t\t\t}\r\n\t\t}).done((data) => {\r\n\t\t\tcb(data);\r\n\t\t});\r\n\t}\r\n\tfunction getOp(data) {\r\n\t\tlet xData = data.xData;\r\n\t\tconst legend = data.yData.map((v) => {\r\n\t\t\treturn v.name;\r\n\t\t});\r\n\t\tlet f = {};\r\n\t\tlet a = {};\r\n\t\tconst series = data.yData.map((v) => {\r\n\t\t\treturn {\r\n\t\t\t\tname: v.name,\r\n\t\t\t\ttype: 'line',\r\n\t\t\t\tdata: v.data\r\n\t\t\t};\r\n\t\t});\r\n\t\tif (type === '2') {\r\n\t\t\ta = {\r\n\t\t\t\tformatter: function (value, index) {\r\n\t\t\t\t\treturn renderMilliTimeLength(value);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tf = (params, ticket, callback) => {\r\n\t\t\t\treturn `\r\n\t\t\t\t\t${params[0].axisValue}<br/>\r\n\t\t\t\t\t<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:${params[0].color}\"></span> ${params[0].seriesName}：${renderMilliTimeLength(params[0].data)}<br/>\r\n\t\t\t\t\t<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:${params[1].color}\"></span> ${params[1].seriesName}：${renderMilliTimeLength(params[1].data)}\r\n\t\t\t\t`;\r\n\t\t\t};\r\n\t\t}\r\n\t\tif (type === '3') {\r\n\t\t\tf = formatter;\r\n\t\t\ta = axisLabel;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tcolor: ['#ffb000', '#37a6e7', '#4caf50'],\r\n\t\t\tseries,\r\n\t\t\ttooltip: {\r\n\t\t\t\tformatter: f,\r\n\t\t\t\ttrigger: 'axis'\r\n\t\t\t},\r\n\t\t\ttoolbox: {\r\n\t\t\t\tright: 50,\r\n\t\t\t\tfeature: {\r\n\t\t\t\t\tsaveAsImage: {}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlegend: {\r\n\t\t\t\tdata: legend\r\n\t\t\t},\r\n\t\t\tgrid: {\r\n\t\t\t\tleft: '3%',\r\n\t\t\t\tright: '4%',\r\n\t\t\t\tbottom: '3%',\r\n\t\t\t\tcontainLabel: true\r\n\t\t\t},\r\n\t\t\txAxis: {\r\n\t\t\t\ttype: 'category',\r\n\t\t\t\tboundaryGap: false,\r\n\t\t\t\tdata: xData\r\n\t\t\t},\r\n\t\t\tyAxis: {\r\n\t\t\t\taxisLabel: a,\r\n\t\t\t\ttype: 'value'\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/statistics/service/index/index.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/statistics/service/index/index.less\n// module id = 947\n// module chunks = 46"],"sourceRoot":""}