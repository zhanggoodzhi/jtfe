{"version":3,"sources":["webpack:///./pages/customize/recommend/index/index.ts","webpack:///./pages/customize/recommend/index/index.less"],"names":[],"mappings":"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","file":"65.js","sourcesContent":["import * as utils from 'utils';\r\nimport 'new-table';\r\nimport { commonConfig, getPage, bindEnter, bindPageChange, simpleConfig, Table } from 'tables';\r\nimport 'tree';\r\nimport 'time';\r\nimport './index.less';\r\n\r\nnamespace CustomizeRecommendIndex {\r\n\tinterface ISubmitData {\r\n\t\tid?: number;\r\n\t\tquestionId?: number;\r\n\t\trecommendQuestionId?: number[];\r\n\t}\r\n\tenum modalState {\r\n\t\tcreate,\r\n\t\tedit\r\n\t}\r\n\tlet state: modalState, submitData: ISubmitData;\r\n\tlet t: Table;\r\n\tlet detailT: Table;\r\n\t$(() => {\r\n\t\tinitDatatable();\r\n\t});\r\n\r\n\tfunction initDatatable() {\r\n\t\tconst classify = new utils.ClassifyTree({\r\n\t\t\tel: $('#classify'),\r\n\t\t\tdata: utils.formatClassify(selectData.classify, true),\r\n\t\t\tselected: true,\r\n\t\t\tmultiple: true\r\n\t\t});\r\n\t\t$('#table').DataTable(Object.assign({\r\n\t\t\tajax: {\r\n\t\t\t\turl: 'recommend/list',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tdataSrc: (data) => data.rows,\r\n\t\t\t\tdata: (data) => {\r\n\t\t\t\t\treturn utils.cleanObject({\r\n\t\t\t\t\t\tclassifyId: classify.selected.join(','),\r\n\t\t\t\t\t\tkeyword1: $.trim($('#keyword').val()),\r\n\t\t\t\t\t\tcurrentPage: getPage(data),\r\n\t\t\t\t\t\tpageSize: data.length,\r\n\t\t\t\t\t\tsortField: '',\r\n\t\t\t\t\t\tsortType: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tinitComplete: initComplete,\r\n\t\t\tcolumns: [\r\n\t\t\t\t{ name: 'question', data: 'question', width: '50%', title: '问题' },\r\n\t\t\t\t{ name: 'recommendQuestion', data: 'recommendQuestion', width: '30%', title: '推荐问题' },\r\n\t\t\t\t{ name: 'createTime', data: 'createTime', title: '创建时间', render: utils.renderCommonTime }\r\n\t\t\t]\r\n\t\t}, commonConfig()));\r\n\t}\r\n\r\n\tfunction initComplete() {\r\n\t\tconst table = $('#table').DataTable();\r\n\t\tt = new Table(table);\r\n\t\t$('#search-btn').on('click', () => {\r\n\t\t\t// table.draw();\r\n\t\t\tt.refresh(true);\r\n\t\t});\r\n\r\n\t\t$('#del-btn').on('click', () => {\r\n\t\t\tconst data = table.rows({ selected: true }).data().toArray();\r\n\t\t\tif (data.length <= 0) {\r\n\t\t\t\tutils.alertMessage('请选择要删除的推荐问题');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tutils.confirmModal({\r\n\t\t\t\tmsg: `确认删除选中的 ${data.length} 条推荐问题吗?`,\r\n\t\t\t\tcb: (modal, btn) => {\r\n\t\t\t\t\tconst loading = utils.loadingBtn(btn);\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\turl: 'recommend/delete',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tids: data.map(v => v.id).join(',')\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (msg) => {\r\n\t\t\t\t\t\t\tif (!msg.error) {\r\n\t\t\t\t\t\t\t\tmodal.modal('hide');\r\n\t\t\t\t\t\t\t\t// table.draw();\r\n\t\t\t\t\t\t\t\tt.refresh();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tutils.alertMessage(msg.msg, !msg.error);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete: () => {\r\n\t\t\t\t\t\t\tloading();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$('#add-btn').on('click', () => {\r\n\t\t\t$('#detail-modal').modal('show')\r\n\t\t\t\t.find('.modal-title')\r\n\t\t\t\t.text('添加推荐问题');\r\n\t\t\tstate = modalState.create;\r\n\t\t\tsubmitData = {\r\n\t\t\t\trecommendQuestionId: []\r\n\t\t\t};\r\n\r\n\t\t\t$('#detail-q').val('请选择问题');\r\n\t\t\t$('#rq-wrap').html(`<div class='rq-item' id='placeholder'><input id='detail-rq' type='text' readonly='readonly' class='form-control input-sm rq-input' value='请选择推荐问题'/></div>`);\r\n\t\t});\r\n\t\t$('#edit-btn').on('click', () => {\r\n\t\t\tconst data = table.rows({ selected: true }).data().toArray();\r\n\t\t\tif (data.length < 1) {\r\n\t\t\t\tutils.alertMessage('请选择要编辑推荐问题');\r\n\t\t\t}\r\n\t\t\telse if (data.length > 1) {\r\n\t\t\t\tutils.alertMessage('只能编辑一个推荐问题');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst currentData = data[0];\r\n\t\t\t\t$('#detail-modal').modal('show')\r\n\t\t\t\t\t.find('.modal-title')\r\n\t\t\t\t\t.text('编辑推荐问题');\r\n\t\t\t\tstate = modalState.edit;\r\n\t\t\t\tsubmitData = {\r\n\t\t\t\t\tid: currentData.id,\r\n\t\t\t\t\tquestionId: currentData.questionId,\r\n\t\t\t\t\trecommendQuestionId: [currentData.recommendQuestionId]\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$('#detail-q').val(currentData.question);\r\n\t\t\t\t$('#rq-wrap').html(createRqItem(currentData.recommendQuestion, currentData.recommendQuestionId));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('#detail-modal').one('shown.bs.modal', () => {\r\n\t\t\tconst detailClassify = new utils.ClassifyTree({\r\n\t\t\t\tel: $('#modal-classify'),\r\n\t\t\t\tdata: utils.formatClassify(selectData.classify, true),\r\n\t\t\t\tselected: true,\r\n\t\t\t\tmultiple: true\r\n\t\t\t});\r\n\t\t\t$('#detail-table').DataTable(Object.assign(\r\n\t\t\t\tsimpleConfig(),\r\n\t\t\t\t{\r\n\t\t\t\t\tajax: {\r\n\t\t\t\t\t\turl: 'recommend/update/list',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\tdata: data => {\r\n\t\t\t\t\t\t\treturn utils.cleanObject({\r\n\t\t\t\t\t\t\t\tkeyword: $.trim($('#detail-keyword').val()),\r\n\t\t\t\t\t\t\t\tclassifys: detailClassify.selected.join(','),\r\n\t\t\t\t\t\t\t\tcorpusStatus: 8,\r\n\t\t\t\t\t\t\t\tpage: getPage(data),\r\n\t\t\t\t\t\t\t\trows: data.length\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdataSrc: data => data.rows\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcolumns: [\r\n\t\t\t\t\t\t{ name: 'question', data: 'question', title: '问题' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tinitComplete: detailInitComplete\r\n\t\t\t\t}));\r\n\t\t});\r\n\r\n\t\t$('#detail-modal').on('hidden.bs.modal', () => {\r\n\t\t\tsubmitData = null;\r\n\t\t\t$('#detail-q,#detail-rq').val('');\r\n\t\t});\r\n\r\n\t\tbindEnter(table);\r\n\r\n\t\tbindPageChange(table, $('#page-change'));\r\n\r\n\t}\r\n\r\n\tfunction detailInitComplete() {\r\n\t\tconst table = $('#detail-table').DataTable();\r\n\t\tdetailT = new Table(table);\r\n\t\t// let once = false;\r\n\r\n\t\t$('#detail-search-btn').on('click', () => {\r\n\t\t\t// table.draw();\r\n\t\t\tdetailT.refresh(true);\r\n\t\t});\r\n\r\n\t\tbindEnter(table, $('#detail-keyword'));\r\n\r\n\t\t$('#set-q-btn').on('click', () => {\r\n\t\t\tconst data: any = table.rows({ selected: true }).data().toArray();\r\n\t\t\tif (data.length < 1) {\r\n\t\t\t\tutils.alertMessage('请选择要设为问题的问题');\r\n\t\t\t}\r\n\t\t\telse if (data.length > 1) {\r\n\t\t\t\tutils.alertMessage('只能选择一个问题');\r\n\t\t\t}\r\n\t\t\telse if (!checkQ(data[0].questionId)) {\r\n\t\t\t\tutils.alertMessage('请不要选择相同的问题');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsubmitData.questionId = data[0].questionId;\r\n\t\t\t\t$('#detail-q').val(data[0].question);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$('#set-rq-btn').on('click', () => {\r\n\t\t\tconst data: any = table.rows({ selected: true }).data().toArray();\r\n\t\t\tlet i = 0,\r\n\t\t\t\thtml = '';\r\n\t\t\tif (data.length < 1) {\r\n\t\t\t\tutils.alertMessage('请选择要设为推荐问题的问题');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor (let v of data) {\r\n\t\t\t\tif (!checkQ(v.questionId)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tsubmitData.recommendQuestionId.push(v.questionId);\r\n\t\t\t\thtml += createRqItem(v.question, v.questionId);\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t\tif (i === 0) {\r\n\t\t\t\tutils.alertMessage('请不要选择相同的问题');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif ($('#placeholder').length > 0) {\r\n\t\t\t\t$('#placeholder').remove();\r\n\t\t\t}\r\n\r\n\t\t\t$('#rq-wrap').append(html);\r\n\r\n\t\t\t// $('#detail-rq').val(data.question);\r\n\t\t});\r\n\r\n\t\t$('#detail-submit-btn').on('click', () => {\r\n\t\t\tlet url: string;\r\n\t\t\tif (!submitData.questionId || submitData.recommendQuestionId.length < 1) {\r\n\t\t\t\tutils.alertMessage('问题或推荐问题为空');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet bool: boolean;\r\n\t\t\tswitch (state) {\r\n\t\t\t\tcase modalState.create:\r\n\t\t\t\t\turl = 'recommend/add';\r\n\t\t\t\t\tbool = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase modalState.edit:\r\n\t\t\t\t\tif (!submitData.id) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\turl = 'recommend/update/save';\r\n\t\t\t\t\tbool = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst loading = utils.loadingBtn($('#detail-submit-btn'));\r\n\t\t\tconst data = Object.assign({}, submitData, {\r\n\t\t\t\trecommendQuestionId: submitData.recommendQuestionId.join(',')\r\n\t\t\t});\r\n\t\t\t$.ajax({\r\n\t\t\t\turl: url,\r\n\t\t\t\tdata: data,\r\n\t\t\t\tsuccess: (msg) => {\r\n\t\t\t\t\tif (!msg.error) {\r\n\t\t\t\t\t\t$('#detail-modal').modal('hide');\r\n\t\t\t\t\t\t// table.draw();\r\n\t\t\t\t\t\t// $('#table').DataTable().draw(false);\r\n\t\t\t\t\t\tt.refresh(bool);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tutils.alertMessage(msg.msg, !msg.error);\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: () => {\r\n\t\t\t\t\tloading();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t$('#rq-wrap').on('click', '.close', (e) => {\r\n\t\t\tif (submitData.recommendQuestionId.length < 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst el = $(e.currentTarget).parent(),\r\n\t\t\t\tindex = submitData.recommendQuestionId.indexOf(el.data('id'));\r\n\t\t\tif (index > -1) {\r\n\t\t\t\tel.remove();\r\n\t\t\t\tsubmitData.recommendQuestionId.splice(index, 1);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction checkQ(id): boolean {\r\n\t\tconst all = [submitData.questionId].concat(submitData.recommendQuestionId);\r\n\t\tfor (let v of all) {\r\n\t\t\tif (id === v) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction createRqItem(value, id): string {\r\n\t\treturn (\r\n\t\t\t`<div class='rq-item' data-id='${id}' >\r\n                    <input id='detail-rq' type='text' readonly='readonly' class='form-control input-sm rq-input' value='${value}'/>\r\n                    <button type='button' class='close'><span aria-hidden='true'>&times;</span><span class='sr-only'>Close</span></button>\r\n                </div>`);\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/customize/recommend/index/index.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/customize/recommend/index/index.less\n// module id = 907\n// module chunks = 65"],"sourceRoot":""}