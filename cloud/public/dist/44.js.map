{"version":3,"sources":["webpack:///./pages/statistics/total/index/index.ts","webpack:///./pages/statistics/total/index/index.less"],"names":[],"mappings":"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","file":"44.js","sourcesContent":["import { getMinContentHeight } from 'utils';\r\nimport { SpssBtnDate, formatter, axisLabel, initTip } from '../../spssUtils';\r\nimport * as echarts from 'echarts/lib/echarts';\r\nimport 'echarts/lib/chart/line';\r\nimport 'echarts/lib/component/tooltip';\r\nimport 'echarts/lib/component/legend';\r\nimport 'echarts/lib/component/toolbox';\r\nimport './index.less';\r\nnamespace StatisticsTotalIndex {\r\n\tlet chart;\r\n\tlet datePicker;\r\n\tlet type = '0'; // 1:会话数，2：消息数:，3：平均满意率，4：应答匹配率\r\n\t$(() => {\r\n\t\tinit();\r\n\t});\r\n\tfunction init() {\r\n\t\tinitTip([{\r\n\t\t\tel: $('.tip'),\r\n\t\t\tplacement: 'left',\r\n\t\t\tcontent: `\r\n\t\t<div class=\"text\"><p><b>消息数：</b>问题和回复消息总和</p><p><b>会话数：</b>访客从开始咨询到结束咨询为一次会话；</p>\r\n\t\t<p><b>转人工数：</b>用户从智能客服页面转人工客服的会话数</p><p><b>智能客服解决数：</b>完全由智能客服接待访客，即未转人工的会话数</p>\r\n\t\t<p><b>智能客服解决率：</b>智能客服解决数在所有会话数中的占比</p><p><b>平均满意率：</b>被用户评价为满意和非常满意的会话数在所有参评会话数中的占比</p>\r\n\t\t<p><b>参评数：</b>用户进行了满意度评价的会话总数</p><p><b>参评率：</b>参评数在所有会话数中的占比</p><p><b>有答案：</b>智能客服匹配到答案的问题数</p>\r\n\t\t<p><b>无答案：</b>智能客服未匹配到答案的问题数</p><p><b>应答匹配率：</b>无答案问题在所有问题中的占比</p><p><br></p><p><br></p></div>\r\n\t\t`}]);\r\n\t\tinitDatePicker();\r\n\t\tinitInfo();\r\n\t\tinitChartHeight();\r\n\t\tinitCharts();\r\n\t\tbindEvent();\r\n\t}\r\n\r\n\tfunction initInfo() {\r\n\t\tdrawInfo();\r\n\t}\r\n\r\n\tfunction drawInfo() {\r\n\t\t$.ajax({\r\n\t\t\turl: 'spss/dataScreening/summary',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: {\r\n\t\t\t\tmode: datePicker.mode,\r\n\t\t\t\tstartDay: datePicker.date.startDay,\r\n\t\t\t\tendDay: datePicker.date.endDay\r\n\t\t\t}\r\n\t\t}).done((data) => {\r\n\t\t\tconst bigEl = $('.spss-info-wrap');\r\n\t\t\tconst news = bigEl.find('.news');\r\n\t\t\tnews.find('.t').html(data.sumAllMsg);\r\n\t\t\tnews.find('.b1').html(data.sumAllReceiveMsgCount);\r\n\t\t\tnews.find('.b2').html(data.sumAllSendMsgCount);\r\n\t\t\tconst solve = bigEl.find('.solve');\r\n\t\t\tsolve.find('.t').html(data.robotResolutionRate + '%');\r\n\t\t\tsolve.find('.b1').html(data.sumAllSession);\r\n\t\t\tsolve.find('.b2').html(data.sumServicerSessionCount === 0 ? '--' : data.sumServicerSessionCount);\r\n\t\t\tconst satisfy = bigEl.find('.satisfy');\r\n\t\t\tsatisfy.find('.t').html(data.avgSatisfyRate + '%');\r\n\t\t\tsatisfy.find('.b1').html(data.sumAppraise);\r\n\t\t\tsatisfy.find('.b2').html(data.appraiseRate + '%');\r\n\t\t\tconst match = bigEl.find('.match');\r\n\t\t\tmatch.find('.t').html(data.answerMatchRate + '%');\r\n\t\t\tmatch.find('.b1').html(data.sumHasAnswer);\r\n\t\t\tmatch.find('.b2').html(data.sumHasNoAnswer);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction initChartHeight() {\r\n\t\tlet chartHeight = getMinContentHeight() - 323;\r\n\t\tlet minChartHeight = 300;\r\n\t\tif (chartHeight < minChartHeight) {\r\n\t\t\tchartHeight = minChartHeight;\r\n\t\t}\r\n\t\t$('.chart-wrap').height(chartHeight);\r\n\t}\r\n\r\n\tfunction initDatePicker() {\r\n\t\tconst el = $('.spss-time-container .date-range-picker');\r\n\t\tdatePicker = new SpssBtnDate({\r\n\t\t\tel,\r\n\t\t\tonClick: (mode, date) => {\r\n\t\t\t\tdrawInfo();\r\n\t\t\t\tdrawChart();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tfunction initCharts() {\r\n\t\tchart = echarts.init(document.getElementById('chart'));\r\n\t\tdrawChart();\r\n\t}\r\n\r\n\tfunction drawChart() {\r\n\t\tgetChartData((data) => {\r\n\t\t\tconst op = getOp(data);\r\n\t\t\tchart.clear();\r\n\t\t\tchart.setOption(op);\r\n\t\t});\r\n\t};\r\n\tfunction bindEvent() {\r\n\t\t$('#type-select').on('change', function () {\r\n\t\t\ttype = $(this).val();\r\n\t\t\tdrawChart();\r\n\t\t\tconsole.log(datePicker.date, datePicker.mode);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction getChartData(cb) {\r\n\t\t$.ajax({\r\n\t\t\turl: 'spss/dataScreening/dataFilter',\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: {\r\n\t\t\t\ttype,\r\n\t\t\t\tmode: datePicker.mode,\r\n\t\t\t\tstartDay: datePicker.date.startDay,\r\n\t\t\t\tendDay: datePicker.date.endDay\r\n\t\t\t}\r\n\t\t}).done((data) => {\r\n\t\t\tcb(data);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction getOp(data) {\r\n\t\tlet xData = data.xData;\r\n\t\tlet legend;\r\n\t\tconst series = data.yData.map((v) => {\r\n\t\t\treturn {\r\n\t\t\t\tname: v.name,\r\n\t\t\t\ttype: 'line',\r\n\t\t\t\tdata: v.data\r\n\t\t\t};\r\n\t\t});\r\n\t\tlet f = {};\r\n\t\tlet a = {};\r\n\t\tif (type === '0' || type === '3' || type === '2') {\r\n\t\t\tf = formatter;\r\n\t\t\ta = axisLabel;\r\n\t\t}\r\n\t\tswitch (type) {\r\n\t\t\tcase '0':\r\n\t\t\t\tlegend = ['智能客服解决率'];\r\n\t\t\t\tbreak;\r\n\t\t\tcase '1':\r\n\t\t\t\tlegend = ['问题消息数', '回复消息数'];\r\n\t\t\t\tbreak;\r\n\t\t\tcase '2':\r\n\t\t\t\tlegend = ['平均满意率'];\r\n\t\t\t\tbreak;\r\n\t\t\tcase '3':\r\n\t\t\t\tlegend = ['应答匹配率'];\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlegend = ['智能客服解决率'];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tcolor: ['#ffb000', '#37a6e7', '#4caf50'],\r\n\t\t\tseries: series,\r\n\t\t\ttoolbox: {\r\n\t\t\t\tright: 50,\r\n\t\t\t\tfeature: {\r\n\t\t\t\t\tsaveAsImage: {}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttooltip: {\r\n\t\t\t\tformatter: f,\r\n\t\t\t\ttrigger: 'axis'\r\n\t\t\t},\r\n\t\t\tlegend: {\r\n\t\t\t\tdata: legend\r\n\t\t\t},\r\n\t\t\tgrid: {\r\n\t\t\t\tleft: '3%',\r\n\t\t\t\tright: '4%',\r\n\t\t\t\tbottom: '3%',\r\n\t\t\t\tcontainLabel: true\r\n\t\t\t},\r\n\t\t\txAxis: {\r\n\t\t\t\ttype: 'category',\r\n\t\t\t\tboundaryGap: false,\r\n\t\t\t\tdata: xData\r\n\t\t\t},\r\n\t\t\tyAxis: {\r\n\t\t\t\taxisLabel: a,\r\n\t\t\t\ttype: 'value'\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./pages/statistics/total/index/index.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./pages/statistics/total/index/index.less\n// module id = 950\n// module chunks = 44"],"sourceRoot":""}