window.QAPlugin=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=113)}([function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(){i.call(this)}var o=n(0),i=n(93);o(r,i),r.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},r.prototype.once=function(e,t){function n(){r.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}var r=this,o=!1;this.on(e,n)},r.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<t.length;i++)t[i].apply(this,r)}},r.prototype.on=r.prototype.addListener=i.prototype.addEventListener,r.prototype.removeListener=i.prototype.removeEventListener,e.exports.EventEmitter=r},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";var r=n(92),o=function(){};e.exports={getOrigin:function(e){if(!e)return null;var t=new r(e);if("file:"===t.protocol)return null;var n=t.port;return n||(n="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return o("same",e,t,n),n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)}}},function(e,t,n){"use strict";function r(e){return"[object Array]"===S.call(e)}function o(e){return"[object ArrayBuffer]"===S.call(e)}function i(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===S.call(e)}function d(e){return"[object File]"===S.call(e)}function p(e){return"[object Blob]"===S.call(e)}function h(e){return"[object Function]"===S.call(e)}function m(e){return l(e)&&h(e.pipe)}function g(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function v(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function q(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function b(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function _(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=_(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)b(arguments[n],e);return t}function y(e,t,n){return b(t,function(t,r){e[r]=n&&"function"==typeof t?x(t,n):t}),e}var x=n(106),w=n(274),S=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:o,isBuffer:w,isFormData:i,isArrayBufferView:a,isString:s,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:d,isBlob:p,isFunction:h,isStream:m,isURLSearchParams:g,isStandardBrowserEnv:q,forEach:b,merge:_,extend:y,trim:v}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(66)("wks"),o=n(67),i=n(6).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){(function(e,r){var o;(function(){function i(e,t){function n(e){if(n[e]!==g)return n[e];var i;if("bug-string-char-index"==e)i="a"!="a"[0];else if("json"==e)i=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,l="function"==typeof c&&b;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===c(0)&&"0"===c(new r)&&'""'==c(new o)&&c(q)===g&&c(g)===g&&c()===g&&"1"===c(a)&&"[1]"==c([a])&&"[null]"==c([g])&&"null"==c(null)&&"[null,null,null]"==c([g,q,null])&&c({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,a)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new u(-1))}catch(e){l=!1}}i=l}if("json-parse"==e){var f=t.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){a=f(s);var d=5==a.a.length&&1===a.a[0];if(d){try{d=!f('"\t"')}catch(e){}if(d)try{d=1!==f("01")}catch(e){}if(d)try{d=1!==f("1.")}catch(e){}}}}catch(e){d=!1}i=d}}return n[e]=!!i}e||(e=c.Object()),t||(t=c.Object());var r=e.Number||c.Number,o=e.String||c.String,a=e.Object||c.Object,u=e.Date||c.Date,l=e.SyntaxError||c.SyntaxError,f=e.TypeError||c.TypeError,d=e.Math||c.Math,p=e.JSON||c.JSON;"object"==typeof p&&p&&(t.stringify=p.stringify,t.parse=p.parse);var h,m,g,v=a.prototype,q=v.toString,b=new u(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(e){}if(!n("json")){var _=n("bug-string-char-index");if(!b)var y=d.floor,x=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(e,t){return x[t]+365*(e-1970)+y((e-1969+(t=+(t>1)))/4)-y((e-1901+t)/100)+y((e-1601+t)/400)};if((h=v.hasOwnProperty)||(h=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=q?h=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,h=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,h.call(this,e)}),m=function(e,t){var n,r,o,i=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(o in r)h.call(r,o)&&i++;return n=r=null,i?m=2==i?function(e,t){var n,r={},o="[object Function]"==q.call(e);for(n in e)o&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(e,n)||t(n)}:function(e,t){var n,r,o="[object Function]"==q.call(e);for(n in e)o&&"prototype"==n||!h.call(e,n)||(r="constructor"===n)||t(n);(r||h.call(e,n="constructor"))&&t(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,o,i="[object Function]"==q.call(e),a=!i&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||h;for(n in e)i&&"prototype"==n||!a.call(e,n)||t(n);for(o=r.length;n=r[--o];a.call(e,n)&&t(n));}),m(e,t)},!n("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C=function(e,t){return("000000"+(t||0)).slice(-e)},E=function(e){for(var t='"',n=0,r=e.length,o=!_||r>10,i=o&&(_?e.split(""):e);n<r;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=S[a];break;default:if(a<32){t+="\\u00"+C(2,a.toString(16));break}t+=o?i[n]:e.charAt(n)}}return t+'"'},T=function(e,t,n,r,o,i,a){var s,u,c,l,d,p,v,b,_,x,S,O,k,I,P,F;try{s=t[e]}catch(e){}if("object"==typeof s&&s)if("[object Date]"!=(u=q.call(s))||h.call(s,"toJSON"))"function"==typeof s.toJSON&&("[object Number]"!=u&&"[object String]"!=u&&"[object Array]"!=u||h.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&s<1/0){if(w){for(d=y(s/864e5),c=y(d/365.2425)+1970-1;w(c+1,0)<=d;c++);for(l=y((d-w(c,0))/30.42);w(c,l+1)<=d;l++);d=1+d-w(c,l),p=(s%864e5+864e5)%864e5,v=y(p/36e5)%24,b=y(p/6e4)%60,_=y(p/1e3)%60,x=p%1e3}else c=s.getUTCFullYear(),l=s.getUTCMonth(),d=s.getUTCDate(),v=s.getUTCHours(),b=s.getUTCMinutes(),_=s.getUTCSeconds(),x=s.getUTCMilliseconds();s=(c<=0||c>=1e4?(c<0?"-":"+")+C(6,c<0?-c:c):C(4,c))+"-"+C(2,l+1)+"-"+C(2,d)+"T"+C(2,v)+":"+C(2,b)+":"+C(2,_)+"."+C(3,x)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if("[object Boolean]"==(u=q.call(s)))return""+s;if("[object Number]"==u)return s>-1/0&&s<1/0?""+s:"null";if("[object String]"==u)return E(""+s);if("object"==typeof s){for(I=a.length;I--;)if(a[I]===s)throw f();if(a.push(s),S=[],P=i,i+=o,"[object Array]"==u){for(k=0,I=s.length;k<I;k++)O=T(k,s,n,r,o,i,a),S.push(O===g?"null":O);F=S.length?o?"[\n"+i+S.join(",\n"+i)+"\n"+P+"]":"["+S.join(",")+"]":"[]"}else m(r||s,function(e){var t=T(e,s,n,r,o,i,a);t!==g&&S.push(E(e)+":"+(o?" ":"")+t)}),F=S.length?o?"{\n"+i+S.join(",\n"+i)+"\n"+P+"}":"{"+S.join(",")+"}":"{}";return a.pop(),F}};t.stringify=function(e,t,n){var r,o,i,a;if(s[typeof t]&&t)if("[object Function]"==(a=q.call(t)))o=t;else if("[object Array]"==a){i={};for(var u,c=0,l=t.length;c<l;u=t[c++],("[object String]"==(a=q.call(u))||"[object Number]"==a)&&(i[u]=1));}if(n)if("[object Number]"==(a=q.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==a&&(r=n.length<=10?n:n.slice(0,10));return T("",(u={},u[""]=e,u),o,i,r,"",[])}}if(!n("json-parse")){var O,k,I=o.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw O=k=null,l()},A=function(){for(var e,t,n,r,o,i=k,a=i.length;O<a;)switch(o=i.charCodeAt(O)){case 9:case 10:case 13:case 32:O++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=_?i.charAt(O):i[O],O++,e;case 34:for(e="@",O++;O<a;)if((o=i.charCodeAt(O))<32)F();else if(92==o)switch(o=i.charCodeAt(++O)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=P[o],O++;break;case 117:for(t=++O,n=O+4;O<n;O++)(o=i.charCodeAt(O))>=48&&o<=57||o>=97&&o<=102||o>=65&&o<=70||F();e+=I("0x"+i.slice(t,O));break;default:F()}else{if(34==o)break;for(o=i.charCodeAt(O),t=O;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++O);e+=i.slice(t,O)}if(34==i.charCodeAt(O))return O++,e;F();default:if(t=O,45==o&&(r=!0,o=i.charCodeAt(++O)),o>=48&&o<=57){for(48==o&&(o=i.charCodeAt(O+1))>=48&&o<=57&&F(),r=!1;O<a&&(o=i.charCodeAt(O))>=48&&o<=57;O++);if(46==i.charCodeAt(O)){for(n=++O;n<a&&(o=i.charCodeAt(n))>=48&&o<=57;n++);n==O&&F(),O=n}if(101==(o=i.charCodeAt(O))||69==o){for(o=i.charCodeAt(++O),43!=o&&45!=o||O++,n=O;n<a&&(o=i.charCodeAt(n))>=48&&o<=57;n++);n==O&&F(),O=n}return+i.slice(t,O)}if(r&&F(),"true"==i.slice(O,O+4))return O+=4,!0;if("false"==i.slice(O,O+5))return O+=5,!1;if("null"==i.slice(O,O+4))return O+=4,null;F()}return"$"},j=function(e){var t,n;if("$"==e&&F(),"string"==typeof e){if("@"==(_?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=A());n||(n=!0))n&&(","==e?"]"==(e=A())&&F():F()),","==e&&F(),t.push(j(e));return t}if("{"==e){for(t={};"}"!=(e=A());n||(n=!0))n&&(","==e?"}"==(e=A())&&F():F()),","!=e&&"string"==typeof e&&"@"==(_?e.charAt(0):e[0])&&":"==A()||F(),t[e.slice(1)]=j(A());return t}F()}return e},R=function(e,t,n){var r=U(e,t,n);r===g?delete e[t]:e[t]=r},U=function(e,t,n){var r,o=e[t];if("object"==typeof o&&o)if("[object Array]"==q.call(o))for(r=o.length;r--;)R(o,r,n);else m(o,function(e){R(o,e,n)});return n.call(e,t,o)};t.parse=function(e,t){var n,r;return O=0,k=""+e,n=j(A()),"$"!=A()&&F(),O=k=null,t&&"[object Function]"==q.call(t)?U((r={},r[""]=n,r),"",t):n}}}return t.runInContext=i,t}var a=n(254),s={function:!0,object:!0},u=s[typeof t]&&t&&!t.nodeType&&t,c=s[typeof window]&&window||this,l=u&&s[typeof e]&&e&&!e.nodeType&&"object"==typeof r&&r;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(c=l),u&&!a)i(c,u);else{var f=c.JSON,d=c.JSON3,p=!1,h=i(c,c.JSON3={noConflict:function(){return p||(p=!0,c.JSON=f,c.JSON3=d,f=d=null),h}});c.JSON={parse:h.parse,stringify:h.stringify}}a&&void 0!==(o=function(){return h}.call(t,n,t,e))&&(e.exports=o)}).call(this)}).call(t,n(38)(e),n(1))},function(e,t,n){var r=n(21);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";(function(t){var r=n(17),o={},i=!1,a=t.chrome&&t.chrome.app&&t.chrome.app.runtime;e.exports={attachEvent:function(e,n){void 0!==t.addEventListener?t.addEventListener(e,n,!1):t.document&&t.attachEvent&&(t.document.attachEvent("on"+e,n),t.attachEvent("on"+e,n))},detachEvent:function(e,n){void 0!==t.addEventListener?t.removeEventListener(e,n,!1):t.document&&t.detachEvent&&(t.document.detachEvent("on"+e,n),t.detachEvent("on"+e,n))},unloadAdd:function(e){if(a)return null;var t=r.string(8);return o[t]=e,i&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in o&&delete o[e]},triggerUnloadCallbacks:function(){for(var e in o)o[e](),delete o[e]}};var s=function(){i||(i=!0,e.exports.triggerUnloadCallbacks())};a||e.exports.attachEvent("unload",s)}).call(t,n(1))},function(e,t,n){var r=n(6),o=n(3),i=n(28),a=n(14),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,p=e&s.S,h=e&s.P,m=e&s.B,g=e&s.W,v=d?o:o[t]||(o[t]={}),q=v.prototype,b=d?r:p?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&b&&void 0!==b[u])&&u in v||(l=c?b[u]:n[u],v[u]=d&&"function"!=typeof b[u]?n[u]:m&&c?i(l,r):g&&b[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):h&&"function"==typeof l?i(Function.call,l):l,h&&((v.virtual||(v.virtual={}))[u]=l,e&s.R&&q&&!q[u]&&a(q,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){var r=n(77),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},function(e,t,n){var r=n(20),o=n(64);e.exports=n(15)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports=!n(30)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";var r=n(246),o="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(e){for(var t=o.length,n=r.randomBytes(e),i=[],a=0;a<e;a++)i.push(o.substr(n[a]%t,1));return i.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},function(e,t,n){"use strict";function r(e){return function(t,n,r){u("create ajax sender",t,n);var o={};"string"==typeof n&&(o.headers={"Content-type":"text/plain"});var i=a.addPath(t,"/xhr_send"),s=new e("POST",i,n,o);return s.once("finish",function(e){if(u("finish",e),s=null,200!==e&&204!==e)return r(new Error("http status "+e));r()}),function(){u("abort"),s.close(),s=null;var e=new Error("Aborted");e.code=1e3,r(e)}}}function o(e,t,n,o){s.call(this,e,t,r(o),n,o)}var i=n(0),a=n(4),s=n(94),u=function(){};i(o,s),e.exports=o},function(e,t){e.exports={}},function(e,t,n){var r=n(10),o=n(121),i=n(122),a=Object.defineProperty;t.f=n(15)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){function r(e){return null==e?void 0===e?u:s:c&&c in Object(e)?i(e):a(e)}var o=n(50),i=n(166),a=n(167),s="[object Null]",u="[object Undefined]",c=o?o.toStringTag:void 0;e.exports=r},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n,{noCredentials:!0})}var o=n(0),i=n(95);o(r,i),r.enabled=i.enabled,e.exports=r},function(e,t,n){"use strict";(function(t){e.exports={isOpera:function(){return t.navigator&&/opera/i.test(t.navigator.userAgent)},isKonqueror:function(){return t.navigator&&/konqueror/i.test(t.navigator.userAgent)},hasDomain:function(){if(!t.document)return!0;try{return!!t.document.domain}catch(e){return!1}}}}).call(t,n(1))},function(e,t,n){"use strict";(function(t){var r=n(11),o=n(9),i=n(25),a=function(){};e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in t||(t[e.exports.WPrefix]={})},postMessage:function(n,r){t.parent!==t?t.parent.postMessage(o.stringify({windowId:e.exports.currentWindowId,type:n,data:r||""}),"*"):a("Cannot postMessage, no parent window.",n,r)},createIframe:function(e,n){var o,i,s=t.document.createElement("iframe"),u=function(){a("unattach"),clearTimeout(o);try{s.onload=null}catch(e){}s.onerror=null},c=function(){a("cleanup"),s&&(u(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),r.unloadDel(i))},l=function(e){a("onerror",e),s&&(c(),n(e))},f=function(e,t){a("post",e,t);try{setTimeout(function(){s&&s.contentWindow&&s.contentWindow.postMessage(e,t)},0)}catch(e){}};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){l("onerror")},s.onload=function(){a("onload"),clearTimeout(o),o=setTimeout(function(){l("onload timeout")},2e3)},t.document.body.appendChild(s),o=setTimeout(function(){l("timeout")},15e3),i=r.unloadAdd(c),{post:f,cleanup:c,loaded:u}},createHtmlfile:function(n,o){var i,s,u,c=["Active"].concat("Object").join("X"),l=new t[c]("htmlfile"),f=function(){clearTimeout(i),u.onerror=null},d=function(){l&&(f(),r.unloadDel(s),u.parentNode.removeChild(u),u=l=null,CollectGarbage())},p=function(e){a("onerror",e),l&&(d(),o(e))},h=function(e,t){try{setTimeout(function(){u&&u.contentWindow&&u.contentWindow.postMessage(e,t)},0)}catch(e){}};l.open(),l.write('<html><script>document.domain="'+t.document.domain+'";<\/script></html>'),l.close(),l.parentWindow[e.exports.WPrefix]=t[e.exports.WPrefix];var m=l.createElement("div");return l.body.appendChild(m),u=l.createElement("iframe"),m.appendChild(u),u.src=n,u.onerror=function(){p("onerror")},i=setTimeout(function(){p("timeout")},15e3),s=r.unloadAdd(d),{post:h,cleanup:d,loaded:f}}},e.exports.iframeEnabled=!1,t.document&&(e.exports.iframeEnabled=("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!i.isKonqueror())}).call(t,n(1))},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){function r(e){return"symbol"==typeof e||i(e)&&o(e)==a}var o=n(22),i=n(16),a="[object Symbol]";e.exports=r},function(e,t,n){var r=n(51),o=r(Object,"create");e.exports=o},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(187),i=n(188),a=n(189),s=n(190),u=n(191);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(36);e.exports=r},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function r(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(193);e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){a(e),i.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(e,t){a("finish",e,t),n._chunkHandler(e,t),n.xo=null;var r=200===e?"network":"permanent";a("close",r),n.emit("close",null,r),n._cleanup()})}var o=n(0),i=n(2).EventEmitter,a=function(){};o(r,i),r.prototype._chunkHandler=function(e,t){if(a("_chunkHandler",e),200===e&&t)for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(-1===(n=r.indexOf("\n")))break;var o=r.slice(0,n);o&&(a("message",o),this.emit("message",o))}},r.prototype._cleanup=function(){a("_cleanup"),this.removeAllListeners()},r.prototype.abort=function(){a("abort"),this.xo&&(this.xo.close(),a("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){i.call(this,e,t,n,r)}var o=n(0),i=n(95);o(r,i),r.enabled=i.enabled&&i.supportsCORS,e.exports=r},function(e,t,n){var r=n(61),o=n(42);e.exports=function(e){return r(o(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(21),o=n(6).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){var r=n(127),o=n(68);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(66)("keys"),o=n(67);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t,n){var r=n(20).f,o=n(31),i=n(7)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(42);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=o(t),this.reject=o(n)}var o=n(29);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(13),o=r.Symbol;e.exports=o},function(e,t,n){function r(e,t){var n=i(e,t);return o(n)?n:void 0}var o=n(178),i=n(182);e.exports=r},function(e,t,n){function r(e){if(!i(e))return!1;var t=o(e);return t==s||t==u||t==a||t==c}var o=n(22),i=n(8),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&o?o(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var o=n(82);e.exports=r},function(e,t,n){function r(e){return null!=e&&i(e.length)&&!o(e)}var o=n(52),i=n(86);e.exports=r},function(e,t,n){"use strict";(function(t){function r(e,t,n){c(e,t);var r=this;o.call(this),setTimeout(function(){r._start(e,t,n)},0)}var o=n(2).EventEmitter,i=n(0),a=n(11),s=n(25),u=n(4),c=function(){};i(r,o),r.prototype._start=function(e,n,r){c("_start");var o=this,i=new t.XDomainRequest;n=u.addQuery(n,"t="+ +new Date),i.onerror=function(){c("onerror"),o._error()},i.ontimeout=function(){c("ontimeout"),o._error()},i.onprogress=function(){c("progress",i.responseText),o.emit("chunk",200,i.responseText)},i.onload=function(){c("load"),o.emit("finish",200,i.responseText),o._cleanup(!1)},this.xdr=i,this.unloadRef=a.unloadAdd(function(){o._cleanup(!0)});try{this.xdr.open(e,n),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(r)}catch(e){this._error()}},r.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},r.prototype._cleanup=function(e){if(c("cleanup",e),this.xdr){if(this.removeAllListeners(),a.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},r.prototype.close=function(){c("close"),this._cleanup(!0)},r.enabled=!(!t.XDomainRequest||!s.hasDomain()),e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";(function(t){var r=n(0),o=n(99),i=n(57);e.exports=function(e){function n(t,n){o.call(this,e.transportName,t,n)}return r(n,o),n.enabled=function(n,r){if(!t.document)return!1;var a=i.extend({},r);return a.sameOrigin=!0,e.enabled(a)&&o.enabled()},n.transportName="iframe-"+e.transportName,n.needBody=!0,n.roundTrips=o.roundTrips+e.roundTrips-1,n.facadeTransport=e,n}}).call(t,n(1))},function(e,t,n){"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}}},function(e,t,n){"use strict";function r(e){this.type=e}r.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this},r.prototype.stopPropagation=function(){},r.prototype.preventDefault=function(){},r.CAPTURING_PHASE=1,r.AT_TARGET=2,r.BUBBLING_PHASE=3,e.exports=r},function(e,t,n){"use strict";(function(t){function r(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o=n(5),i=n(277),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(107):void 0!==t&&(e=n(107)),e}(),transformRequest:[function(e,t){return i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){s.headers[e]={}}),o.forEach(["post","put","patch"],function(e){s.headers[e]=o.merge(a)}),e.exports=s}).call(t,n(276))},function(e,t,n){n(118);for(var r=n(6),o=n(14),i=n(19),a=n(7)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&o(f,a,c),i[c]=i.Array}},function(e,t,n){var r=n(27);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){"use strict";var r=n(63),o=n(12),i=n(123),a=n(14),s=n(31),u=n(19),c=n(124),l=n(47),f=n(130),d=n(7)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,m,g,v,q){c(n,t,m);var b,_,y,x=function(e){if(!p&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",S="values"==g,C=!1,E=e.prototype,T=E[d]||E["@@iterator"]||g&&E[g],O=T||x(g),k=g?S?x("entries"):O:void 0,I="Array"==t?E.entries||T:T;if(I&&(y=f(I.call(new e)))!==Object.prototype&&y.next&&(l(y,w,!0),r||s(y,d)||a(y,d,h)),S&&T&&"values"!==T.name&&(C=!0,O=function(){return T.call(this)}),r&&!q||!p&&!C&&E[d]||a(E,d,O),u[t]=O,u[w]=h,g)if(b={values:S?O:x("values"),keys:v?O:x("keys"),entries:k},q)for(_ in b)_ in E||i(E,_,b[_]);else o(o.P+o.F*(p||C),t,b);return b}},function(e,t){e.exports=!0},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(45),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){var r=n(6),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(131)(!0);n(62)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(72),o=n(7)("iterator"),i=n(19);e.exports=n(3).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(27),o=n(7)("toStringTag"),i="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),o))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r=n(10),o=n(29),i=n(7)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[i])?t:o(n)}},function(e,t,n){var r,o,i,a=n(28),s=n(145),u=n(69),c=n(43),l=n(6),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,m=l.Dispatch,g=0,v={},q=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},b=function(e){q.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return v[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},p=function(e){delete v[e]},"process"==n(27)(f)?r=function(e){f.nextTick(a(q,e,1))}:m&&m.now?r=function(e){m.now(a(q,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=b,r=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),q.call(e)}}:function(e){setTimeout(a(q,e,1),0)}),e.exports={set:d,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(10),o=n(21),i=n(49);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(1))},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(175),i=n(192),a=n(194),s=n(195),u=n(196);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(51),o=n(13),i=r(o,"Map");e.exports=i},function(e,t,n){function r(e){return null==e?"":o(e)}var o=n(197);e.exports=r},function(e,t,n){function r(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||o(e,t,n)}var o=n(53),i=n(36);e.exports=r},function(e,t,n){var r=n(51),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(219),o=r(Object.getPrototypeOf,Object);e.exports=o},function(e,t){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}var r=Object.prototype;e.exports=n},function(e,t,n){var r=n(220),o=n(16),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},function(e,t,n){(function(e){var r=n(13),o=n(222),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||o;e.exports=l}).call(t,n(38)(e))},function(e,t,n){var r=n(224),o=n(225),i=n(226),a=i&&i.isTypedArray,s=a?o(a):r;e.exports=s},function(e,t,n){function r(e){return a(e)?o(e,!0):i(e)}var o=n(230),i=n(232),a=n(54);e.exports=r},function(e,t){function n(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){"use strict";(function(t){function r(e){e=e||t.location||{};var n,r={},o=typeof e;if("blob:"===e.protocol)r=new a(unescape(e.pathname),{});else if("string"===o){r=new a(e,{});for(n in h)delete r[n]}else if("object"===o){for(n in e)n in h||(r[n]=e[n]);void 0===r.slashes&&(r.slashes=d.test(e.href))}return r}function o(e){var t=f.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function i(e,t){for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);var s,u,f,d,h,m,g=p.slice(),v=typeof t,q=this,b=0;for("object"!==v&&"string"!==v&&(n=t,t=null),n&&"function"!=typeof n&&(n=l.parse),t=r(t),u=o(e||""),s=!u.protocol&&!u.slashes,q.slashes=u.slashes||s&&t.slashes,q.protocol=u.protocol||t.protocol||"",e=u.rest,u.slashes||(g[2]=[/(.*)/,"pathname"]);b<g.length;b++)d=g[b],f=d[0],m=d[1],f!==f?q[m]=e:"string"==typeof f?~(h=e.indexOf(f))&&("number"==typeof d[2]?(q[m]=e.slice(0,h),e=e.slice(h+d[2])):(q[m]=e.slice(h),e=e.slice(0,h))):(h=f.exec(e))&&(q[m]=h[1],e=e.slice(0,h.index)),q[m]=q[m]||(s&&d[3]?t[m]||"":""),d[4]&&(q[m]=q[m].toLowerCase());n&&(q.query=n(q.query)),s&&t.slashes&&"/"!==q.pathname.charAt(0)&&(""!==q.pathname||""!==t.pathname)&&(q.pathname=i(q.pathname,t.pathname)),c(q.port,q.protocol)||(q.host=q.hostname,q.port=""),q.username=q.password="",q.auth&&(d=q.auth.split(":"),q.username=d[0]||"",q.password=d[1]||""),q.origin=q.protocol&&q.host&&"file:"!==q.protocol?q.protocol+"//"+q.host:"null",q.href=q.toString()}function s(e,t,n){var r=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||l.parse)(t)),r[e]=t;break;case"port":r[e]=t,c(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,/:\d+$/.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":r.pathname=t.length&&"/"!==t.charAt(0)?"/"+t:t;break;default:r[e]=t}for(var o=0;o<p.length;o++){var i=p[o];i[4]&&(r[i[1]]=r[i[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function u(e){e&&"function"==typeof e||(e=l.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,t="object"==typeof n.query?e(n.query):n.query,t&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}var c=n(247),l=n(248),f=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,d=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,p=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};a.prototype={set:s,toString:u},a.extractProtocol=o,a.location=r,a.qs=l,e.exports=a}).call(t,n(1))},function(e,t,n){"use strict";function r(){this._listeners={}}r.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===n.indexOf(t)&&(n=n.concat([t])),this._listeners[e]=n},r.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);return-1!==r?void(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e]):void 0}},r.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],o=0;o<r.length;o++)r[o].apply(this,n)},e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,o){var c=i.addPath(e,t);u(c);var l=this;a.call(this,e,n),this.poll=new s(r,c,o),this.poll.on("message",function(e){u("poll message",e),l.emit("message",e)}),this.poll.once("close",function(e,t){u("poll close",e,t),l.poll=null,l.emit("close",e,t),l.close()})}var o=n(0),i=n(4),a=n(251),s=n(252),u=function(){};o(r,a),r.prototype.close=function(){a.prototype.close.call(this),u("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=r},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){c(e,t);var i=this;o.call(this),setTimeout(function(){i._start(e,t,n,r)},0)}var o=n(2).EventEmitter,i=n(0),a=n(11),s=n(4),u=t.XMLHttpRequest,c=function(){};i(r,o),r.prototype._start=function(e,t,n,o){var i=this;try{this.xhr=new u}catch(e){}if(!this.xhr)return c("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();t=s.addQuery(t,"t="+ +new Date),this.unloadRef=a.unloadAdd(function(){c("unload cleanup"),i._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){c("xhr timeout"),i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return c("exception",e),this.emit("finish",0,""),void this._cleanup(!1)}if(o&&o.noCredentials||!r.supportsCORS||(c("withCredentials"),this.xhr.withCredentials="true"),o&&o.headers)for(var l in o.headers)this.xhr.setRequestHeader(l,o.headers[l]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,n=i.xhr;switch(c("readyState",n.readyState),n.readyState){case 3:try{t=n.status,e=n.responseText}catch(e){}c("status",t),1223===t&&(t=204),200===t&&e&&e.length>0&&(c("chunk"),i.emit("chunk",t,e));break;case 4:t=n.status,c("status",t),1223===t&&(t=204),12005!==t&&12029!==t||(t=0),c("finish",t,n.responseText),i.emit("finish",t,n.responseText),i._cleanup(!1)}}};try{i.xhr.send(n)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},r.prototype._cleanup=function(e){if(c("cleanup"),this.xhr){if(this.removeAllListeners(),a.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},r.prototype.close=function(){c("close"),this._cleanup(!0)},r.enabled=!!u;var l=["Active"].concat("Object").join("X");!r.enabled&&l in t&&(c("overriding xmlhttprequest"),u=function(){try{return new t[l]("Microsoft.XMLHTTP")}catch(e){return null}},r.enabled=!!new u);var f=!1;try{f="withCredentials"in new u}catch(e){}r.supportsCORS=f,e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";function r(e){if(!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",a,s)}var o=n(0),i=n(18),a=n(39),s=n(55);o(r,i),r.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(s.enabled&&e.sameScheme)},r.transportName="xdr-streaming",r.roundTrips=2,e.exports=r},function(e,t,n){"use strict";function r(e){if(!r.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",a,s)}var o=n(0),i=n(18),a=n(253),s=n(40),u=n(98);o(r,i),r.enabled=function(){return!!u},r.transportName="eventsource",r.roundTrips=2,e.exports=r},function(e,t,n){(function(t){e.exports=t.EventSource}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t,n){if(!r.enabled())throw new Error("Transport created when disabled");a.call(this);var o=this;this.origin=u.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=f.string(8);var i=u.addPath(n,"/iframe.html")+"#"+this.windowId;d(e,t,i),this.iframeObj=c.createIframe(i,function(e){d("err callback"),o.emit("close",1006,"Unable to load an iframe ("+e+")"),o.close()}),this.onmessageCallback=this._message.bind(this),l.attachEvent("message",this.onmessageCallback)}var o=n(0),i=n(9),a=n(2).EventEmitter,s=n(100),u=n(4),c=n(26),l=n(11),f=n(17),d=function(){};o(r,a),r.prototype.close=function(){if(d("close"),this.removeAllListeners(),this.iframeObj){l.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},r.prototype._message=function(e){if(d("message",e.data),!u.isOriginEqual(e.origin,this.origin))return void d("not same origin",e.origin,this.origin);var t;try{t=i.parse(e.data)}catch(t){return void d("bad json",e.data)}if(t.windowId!==this.windowId)return void d("mismatched window id",t.windowId,this.windowId);switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",i.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=i.parse(t.data)}catch(e){return void d("bad json",t.data)}this.emit("close",n[0],n[1]),this.close()}},r.prototype.postMessage=function(e,t){d("postMessage",e,t),this.iframeObj.post(i.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},r.prototype.send=function(e){d("send",e),this.postMessage("m",e)},r.enabled=function(){return c.iframeEnabled},r.transportName="iframe",r.roundTrips=2,e.exports=r},function(e,t){e.exports="1.1.4"},function(e,t,n){"use strict";function r(e){if(!i.enabled)throw new Error("Transport created when disabled");s.call(this,e,"/htmlfile",i,a)}var o=n(0),i=n(255),a=n(24),s=n(18);o(r,s),r.enabled=function(e){return i.enabled&&e.sameOrigin},r.transportName="htmlfile",r.roundTrips=2,e.exports=r},function(e,t,n){"use strict";function r(e){if(!u.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",a,s)}var o=n(0),i=n(18),a=n(39),s=n(40),u=n(24);o(r,i),r.enabled=function(e){return!e.nullOrigin&&(!(!u.enabled||!e.sameOrigin)||s.enabled)},r.transportName="xhr-polling",r.roundTrips=2,e.exports=r},function(e,t,n){"use strict";(function(t){e.exports=t.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(t,n(1))},function(e,t,n){"use strict";function r(e){var t=this;i.call(this),this.ir=new u(e,s),this.ir.once("finish",function(e,n){t.ir=null,t.emit("message",a.stringify([e,n]))})}var o=n(0),i=n(2).EventEmitter,a=n(9),s=n(24),u=n(105);o(r,i),r.transportName="iframe-info-receiver",r.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=r},function(e,t,n){"use strict";function r(e,t){o.call(this);var n=this,r=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(e,t){var o,i;if(200===e){if(i=+new Date-r,t)try{o=a.parse(t)}catch(e){u("bad json",t)}s.isObject(o)||(o={})}n.emit("finish",o,i),n.removeAllListeners()})}var o=n(2).EventEmitter,i=n(0),a=n(9),s=n(57),u=function(){};i(r,o),r.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(5),o=n(278),i=n(280),a=n(281),s=n(282),u=n(108),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(283);e.exports=function(e){return new Promise(function(t,l){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var p=new XMLHttpRequest,h="onreadystatechange",m=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in p||s(e.url)||(p=new window.XDomainRequest,h="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),e.auth){var g=e.auth.username||"",v=e.auth.password||"";d.Authorization="Basic "+c(g+":"+v)}if(p.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p[h]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?p.response:p.responseText,i={data:r,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:e,request:p};o(t,l,i),p=null}},p.onerror=function(){l(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var q=n(284),b=(e.withCredentials||s(e.url))&&e.xsrfCookieName?q.read(e.xsrfCookieName):void 0;b&&(d[e.xsrfHeaderName]=b)}if("setRequestHeader"in p&&r.forEach(d,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),l(e),p=null)}),void 0===f&&(f=null),p.send(f)})}},function(e,t,n){"use strict";var r=n(279);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);n.obj[n.prop]=r}}return t};t.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},t.merge=function(e,n,o){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var i=e;return Array.isArray(e)&&!Array.isArray(n)&&(i=t.arrayToObject(e,o)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,i){r.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t.merge(e[i],n,o):e.push(n):e[i]=n}),e):Object.keys(n).reduce(function(e,i){var a=n[i];return r.call(e,i)?e[i]=t.merge(e[i],a,o):e[i]=a,e},i)},t.assign=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var i=t.charCodeAt(r);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=t.charAt(r):i<128?n+=o[i]:i<2048?n+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?n+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(r+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),n+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return n},t.compact=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],a=o.obj[o.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],l=a[c];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:a,prop:c}),n.push(l))}return i(t)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,n){"use strict";var r=String.prototype.replace,o=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,o,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.models=void 0;var i=n(114),a=o(i),s=n(116),u=o(s),c=n(133),l=o(c),f=n(137),d=o(f),p=n(152),h=o(p),m=n(158),g=o(m),v=n(159),q=o(v),b=n(163),_=o(b),y=n(168),x=o(y),w=n(200),S=o(w),C=n(201),E=o(C),T=n(243),O=r(T),k=n(272),I=o(k),P=n(292),F=r(P),A=n(294),j=r(A),R=n(295),U=j.ClientGetTypes,D=j.ClientSendTypes,N=j.MessageTypes,L=(j.MessageContentTypes,j.TargetTypes),B=(j.ClientGetOperations,j.ClientSendOperations),M=function(){function e(t){var n=this;if((0,g.default)(this,e),this._interface={config:"getAllConfig",faq:"faq",emoji:"getEmojiConfig",emojiBase:"public/emoji",hisitory:"getMsglogs",character:"listCharacters",fileUpload:"upload/fileUpload",imageUpload:"upload/imgUpload",fileDownload:"upload/fileDownload",imageDownload:"upload",feedback:"sendfeedback",robotFeedback:"comment",staffFeedback:"cscomment"},this._messages=[],this._connected=!1,this._heartbeatTimer=null,this._target=null,this._staff=null,this._device=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"MOBILE":"PC",this._timeoutCount=0,this.accept=function(){return n.send(D.ServicerOp,{currentPage:n.getCurrentPage(),operation:B.accept_invite}).then(function(){n.changeTarget(L.staff)})},this.refuse=function(){var e=null;switch(n._target){case L.robot:e="queue_robot";break;case L.staff:e=n.staff?"queue_serving":"queue_waiting";break;case null:e=n.staff?"queue_closed":"queue_vistor"}return n.send(D.ServicerOp,{operation:B.refuse_invite,originQueue:e})},this.satisfactionFeedback=function(e){var t=void 0,r=n._config;if((0,h.default)(e,{fileType:"FEEDBACK",uid:n.config.sessionId}),n._staff)t=n._interface.staffFeedback,(0,h.default)(e,{servicer:n._staff.servicer.id,cscustomsession:n._staff.customSession});else switch(n._target){case L.robot:t=n._interface.robotFeedback,(0,h.default)(e,{customsession:r.customsession});break;case L.staff:case L.comment:default:return d.default.reject("尚未开始对话")}return I.default.post(t,(0,R.stringify)(e))},this.resetTimeoutCount=function(){n._timeoutCount=0},this.getEmoji=function(){return I.default.get(n._interface.emoji).then(function(e){var t=e.data;if(t.error)return d.default.reject("获取表情数据失败");var r=n._interface.emojiBase,o=JSON.parse(t.msg);return(0,l.default)(o).forEach(function(e){o[e].forEach(function(t){t.uri=r+"/"+e+"/"+t.filename})}),o})},this.getFaqs=function(){return I.default.get(n._interface.faq,{params:{app_key:n._options.appkey}})},this.getCharacters=function(){return I.default.post(n._interface.character,(0,R.stringify)({appid:n._config.appid}))},this.getHistories=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=n._config,r=n._options,o=n._messages.find(function(e){return!!(0,x.default)(e,"content.logId")}),i=(0,x.default)(o,"content.logId");return I.default.get(n._interface.hisitory,{params:{sessionId:t.sessionId,appkey:t.app_key,logId:i,size:e}}).then(function(e){var o=e.data;if(o.error)throw new Error(o.error);var i=(0,x.default)(o,"msg.logList");return i&&(n._messages=i.reverse().map(function(e){var o={_id:n.createId(),type:null,sender:null,timestamp:e.msgtime,evaluable:!1,content:{logId:e.id,data:null,type:null},origin:e};switch(e.sendername){case"访客":(0,E.default)(o,{type:j.MessageTypes.question,sender:{name:r.username,avatar:t.visitorPic,id:r.userid},content:{data:e.msgtext,questionType:e.questionType,type:j.MessageContentTypes.text}});break;case"机器人":(0,E.default)(o,{type:j.MessageTypes.answer,sender:{name:t.robotName,avatar:t.robotPic,id:null},from:j.TargetTypes.robot,content:{data:{msgid:e.msgid,answerType:e.answerType,content:e.msgtext},type:j.MessageContentTypes.robot}});break;default:(0,E.default)(o,{type:j.MessageTypes.answer,sender:{name:e.sendername,avatar:e.avatar,id:null},content:{data:e.msgtext,type:j.MessageContentTypes.text}})}return o}).concat(n._messages),n.triggerListChange()),n._moreLogs=(0,x.default)(o,"msg.moreLogs"),n._moreLogs})},this.initUploader=function(e,t){var r=(n._config,n._options.uploader),o=function(e){return{uri:e.uri+"?"+(0,R.stringify)({prefix:e.prefix,suffix:e.suffix,fileDir:e.fileDir}),name:e.oiginalFileName+"."+e.suffix}},i=function(e){return e},a=function(e,t,r,o,i){if(!e)return null;var a=new F.FineUploaderBasic({autoUpload:!0,multiple:!1,button:e,cors:{allowXdr:!0,expected:!0,sendCredentials:!0},request:{filenameParam:"filename",uuidName:"uuid",totalFileSizeName:"totalfilesize",inputName:"attach",endpoint:r},validation:{acceptFiles:t},callbacks:{onError:function(e,t,r,s){var u=JSON.parse(s.responseText);u.error||n.sendQuestion(i(u.msg),o),a.reset()}},text:{fileInputTitle:""}});return a};n._imageUploader=a(e||r.imageElement,r.imageAccept,n._interface.imageUpload,j.MessageContentTypes.image,i),n._fileUploader=a(t||r.fileElement,r.fileAccept,n._interface.fileUpload,j.MessageContentTypes.file,o)},this.connect=function(){return n._connected?d.default.reject("Websocket已经连接"):n.init()},this.feedback=function(e,t){var r=(0,x.default)(e,"content.data.msgid"),o=(0,x.default)(e,"content.data.logId");e.evaluation=t,I.default.post(n._interface.feedback,(0,R.stringify)({msgid:r,logId:o,rating:t?1:-1})),n.triggerListChange()},this.requestStaff=function(){n.toggleTaget(j.TargetTypes.staff)},this.requestRobot=function(){n._prevTarget=null,n.toggleTaget(j.TargetTypes.robot)},this.setCharacter=function(e){n._character=e,n._options.onCharacterChange&&n._options.onCharacterChange(e)},this.sendHeartbeat=function(){var e=n._options,t=e.username,r=e.userid;return n.send(D.heartbeat,{uname:t,uid:r})},this.sendQuestion=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.MessageContentTypes.text,r=n._config,o=n._options,i=n.createId(),a={target:n._target,avatar:r.visitorPic,feid:i};switch(n._target){case j.TargetTypes.robot:(0,E.default)(a,{uid:o.userid,app_key:r.app_key,q:e,device:n._device,ip:r.clientIP,character:n._character,customsession:r.customsession,questionType:t});break;case j.TargetTypes.staff:(0,E.default)(a,{receiver:"s_8001641",device:n._device,message:{msgType:t,content:e}})}return n.resetTimeoutCount(),n.send(D.message,a).then(function(){n.insertQuestion(n.getUserSendQuestion(e,t),i)})},this.sendComment=function(e){var t=n._config,r=n._options,o={target:L.comment,avatar:t.visitorPic,message:{appId:t.appid,name:r.username,visitor:r.userid}},i=void 0,a=e.expectReplyTimeStart,s=e.expectReplyTimeEnd;if(a||(a="00:00"),s||(s="23:59"),n.time2number(a)>n.time2number(s)){var u=[a,s];s=u[0],a=u[1]}return e.content?1!=+e.expectReplyType||e.phone?a===s&&(i="时间段不能为相同值"):i="电话不能为空":i="留言内容不能为空",(0,E.default)(o.message,(0,h.default)({},e,{expectReplyTimeStart:a,expectReplyTimeEnd:s})),i?d.default.reject(i):n.send(D.message,o)},this.sendPreview=(0,_.default)(function(e){return n._target!==j.TargetTypes.staff?d.default.resolve():n.send(j.ClientSendTypes.preview,{id:n._options.userid,message:e})},600),this.insertQuestion=function(e,t){n.insertMessage(e,t),n._options.onSendQuestion&&n._options.onSendQuestion(e,n._messages)},this.insertAnswer=function(e){n.insertMessage(e),n._options.onGetAnswer&&n._options.onGetAnswer(e,n._messages)},this.insertRobotAnswer=function(e){n.insertMessage(n.getRobotSendAnswer(e))},this.insertUserQuestion=function(e){n.insertQuestion(n.getUserSendQuestion(e))},this.createId=function(){return(0,S.default)("jt_message_")+"_"+(new Date).getTime()},this.time2number=function(e){return Number(e.replace(/:/g,""))},!t)throw new Error("参数不能为空");var r=["clientUri","serverUri","appkey","username","userid"],o=!0,i=!1,a=void 0;try{for(var s,c=(0,u.default)(r);!(o=(s=c.next()).done);o=!0){var f=s.value;if(!t.hasOwnProperty(f))throw new Error("参数 '"+f+"' 为必填项")}}catch(e){i=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}var p={uploader:{imageAccept:"image/*",fileAccept:".txt,.xls,.xlsx,.doc,.docx,.pdf"}},m=this._interface;this._options=(0,E.default)(p,t),(0,l.default)(m).forEach(function(e){m[e]=p.clientUri+m[e]})}return(0,q.default)(e,[{key:"initConfig",value:function(){var e=this,t=this._options;return I.default.get(this._interface.config,{params:{appkey:t.appkey}}).then(function(t){if(t.data.error)return d.default.reject("获取配置信息失败");e._config=t.data.msg,e._config.robotPic=e._config.cloudurl+e._config.robotPic,e._config.visitorPic=e._config.cloudurl+e._config.visitorPic,e._moreLogs=e._config.moreLogs})}},{key:"initSock",value:function(){var e=this;return new d.default(function(t,n){var r=e._config,o=e._options,i=window.hasOwnProperty("WebSocket")?new WebSocket(r.wsuri):new O(r.sjuri);i.onopen=function(t){e.sendLogin()},i.onerror=function(e){n("连接到Websocket出现异常")},i.onclose=function(t){e._heartbeatTimer&&(clearInterval(e._heartbeatTimer),e._heartbeatTimer=null)},i.onmessage=function(n){var i=n.data?JSON.parse(n.data):null;if(i){var a=i.type,s=i.content;switch(a){case U.authenticate:e._connected=!0,e._heartbeatTimer=setInterval(e.sendHeartbeat,6e4),t(n);break;case U.transfer:e.changeTarget(j.TargetTypes.staff),e._staff=s;break;case U.message:var u={timestamp:(new Date).getTime(),evaluable:!1,type:N.answer,origin:s,from:s.target};switch(s.target){case j.TargetTypes.robot:(0,E.default)(u,{sender:{name:r.robotName,avatar:r.robotPic,id:null},content:{type:j.MessageContentTypes.robot,data:s,logId:s.logId},evaluable:!0});break;case j.TargetTypes.staff:(0,E.default)(u,{sender:{name:s.sender.uname,avatar:s.avatar,id:s.sender.uid},content:{type:s.msgType,data:s.text,logId:s.logId},evaluable:!1})}e.insertAnswer(u);break;case U.warn:switch(Number(s.code)){case 1005:case 1001:e._prevTarget?(e.toggleTaget(e._prevTarget),e._prevTarget=null):e.changeTarget(null)}o.onWarning&&o.onWarning(s);break;case U.success:switch(Number(s.code)){case 2002:var c=e._messages.find(function(e){return e._id===s.msg.feid});c&&(c.content.logId=s.msg.nodeId)}o.onSuccess&&"2002"!==s.code&&o.onSuccess(s);break;case U.ServicerOp:switch(s.operation){case j.ClientGetOperations.invite:e._options.onInviteChat&&e._options.onInviteChat(e.accept,e.refuse);break;case j.ClientGetOperations.invite_feedback:e._options.onInviteFeedback&&e._options.onInviteFeedback(e.satisfactionFeedback);break;case j.ClientGetOperations.end:e.changeTarget(null),e._options.onEnd&&e._options.onEnd()}break;case U.LeaveMsg:var l=e.getUserSendQuestion(s.content),f=e.getRobotSendAnswer(s.replyContent);(0,E.default)(l,{timestamp:s.messageTime}),(0,E.default)(f,{timestamp:s.replyTime}),e._options.onGetLeaveMessage?e._options.onGetLeaveMessage(l,f):(e.insertMessage(l),e.insertMessage(f))}}},e._sock=i})}},{key:"getCurrentPage",value:function(){return{title:document.querySelector("title").innerHTML,uri:document.referrer||location.href,timestamp:(new Date).getTime(),userid:this._options.userid}}},{key:"init",value:function(){var e=this;return this.initConfig().then(function(){var t=e._config,n=e._options,r=n.uploader;return(r.imageElement||r.fileElement)&&e.initUploader(),n.onTimeout&&t.timeoutLength&&setInterval(function(){++e._timeoutCount===t.timeoutLength&&n.onTimeout(t.timeoutMsg)},1e3),e.initSock()})}},{key:"sendVoice",value:function(e){var t=new FormData;return t.append("attach",e),I.default.post("/csclient/upload/tempVoiceUpload",t)}},{key:"triggerListChange",value:function(){this._options.onMessageListUpdate&&this._options.onMessageListUpdate(this._messages)}},{key:"toggleTaget",value:function(e){var t=this;return this.send(j.ClientSendTypes.transfer,{currentPage:this.getCurrentPage(),target:e}).then(function(){t.changeTarget(e)})}},{key:"changeTarget",value:function(e){this._prevTarget=this._target,this._target=e,this._options.onTargetChange&&this._options.onTargetChange(this._target)}},{key:"sendLogin",value:function(){var e=this._options,t=this._config;return this.send(D.authenticate,{appkey:e.appkey,uname:e.username,uid:e.userid,isServicer:"false",secret:"jttest",os:t.os,ip:t.clientIP,browser:t.browser,device:this._device,currentPage:this.getCurrentPage()})}},{key:"getUserSendQuestion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.MessageContentTypes.text,n=this._options,r=this._config;return{sender:{name:n.username,id:n.userid,avatar:r.visitorPic},timestamp:(new Date).getTime(),content:{data:e,type:t},type:N.question}}},{key:"getRobotSendAnswer",value:function(e){var t=(this._options,this._config);return{sender:{name:t.robotName,id:null,avatar:t.robotPic},timestamp:(new Date).getTime(),evaluable:!1,content:{data:e,type:j.MessageContentTypes.text},type:N.answer,from:j.TargetTypes.robot}}},{key:"send",value:function(e,t){return this.inited?(this._sock.send((0,a.default)({type:e,content:t})),d.default.resolve()):d.default.reject("Websocket尚未初始化完毕！")}},{key:"insertMessage",value:function(e,t){e._id=t||this.createId(),this._messages.push(e),this.triggerListChange()}},{key:"getVoiceUrl",value:function(e,t){return"/csclient/getVoice?msgid="+e+"&appKey="+t}},{key:"messages",get:function(){return this._messages}},{key:"inited",get:function(){return this._sock&&1===this._sock.readyState}},{key:"connected",get:function(){return this._connected}},{key:"sock",get:function(){return this._sock}},{key:"config",get:function(){return this._config}},{key:"hasHistories",get:function(){return this._moreLogs}},{key:"staff",get:function(){return this._staff}}]),e}();t.default=M,M.models=j,t.models=j},function(e,t,n){e.exports={default:n(115),__esModule:!0}},function(e,t,n){var r=n(3),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},function(e,t,n){e.exports={default:n(117),__esModule:!0}},function(e,t,n){n(60),n(70),e.exports=n(132)},function(e,t,n){"use strict";var r=n(119),o=n(120),i=n(19),a=n(41);e.exports=n(62)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports=!n(15)&&!n(30)(function(){return 7!=Object.defineProperty(n(43)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(21);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(14)},function(e,t,n){"use strict";var r=n(125),o=n(64),i=n(47),a={};n(14)(a,n(7)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},function(e,t,n){var r=n(10),o=n(126),i=n(68),a=n(46)("IE_PROTO"),s=function(){},u=function(){var e,t=n(43)("iframe"),r=i.length;for(t.style.display="none",n(69).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[i[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(20),o=n(10),i=n(44);e.exports=n(15)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(31),o=n(41),i=n(128)(!1),a=n(46)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(c,n)||c.push(n));return c}},function(e,t,n){var r=n(41),o=n(65),i=n(129);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=o(u.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(45),o=Math.max,i=Math.min;e.exports=function(e,t){return e=r(e),e<0?o(e+t,0):i(e,t)}},function(e,t,n){var r=n(31),o=n(48),i=n(46)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(45),o=n(42);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):a-56320+(i-55296<<10)+65536)}}},function(e,t,n){var r=n(10),o=n(71);e.exports=n(3).getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){e.exports={default:n(134),__esModule:!0}},function(e,t,n){n(135),e.exports=n(3).Object.keys},function(e,t,n){var r=n(48),o=n(44);n(136)("keys",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(12),o=n(3),i=n(30);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(138),__esModule:!0}},function(e,t,n){n(139),n(70),n(60),n(140),n(150),n(151),e.exports=n(3).Promise},function(e,t){},function(e,t,n){"use strict";var r,o,i,a,s=n(63),u=n(6),c=n(28),l=n(72),f=n(12),d=n(21),p=n(29),h=n(141),m=n(142),g=n(73),v=n(74).set,q=n(146)(),b=n(49),_=n(75),y=n(76),x=u.TypeError,w=u.process,S=u.Promise,C="process"==l(w),E=function(){},T=o=b.f,O=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[n(7)("species")]=function(e){e(E,E)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),k=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},I=function(e,t){if(!e._n){e._n=!0;var n=e._c;q(function(){for(var r=e._v,o=1==e._s,i=0;n.length>i;)!function(t){var n,i,a=o?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(o||(2==e._h&&A(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(x("Promise-chain cycle")):(i=k(n))?i.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[i++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){v.call(u,function(){var t,n,r,o=e._v,i=F(e);if(i&&(t=_(function(){C?w.emit("unhandledRejection",o,e):(n=u.onunhandledrejection)?n({promise:e,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=C||F(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},F=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!F(t.promise))return!1;return!0},A=function(e){v.call(u,function(){var t;C?w.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),I(t,!0))},R=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=k(e))?q(function(){var r={_w:n,_d:!1};try{t.call(e,c(R,r,1),c(j,r,1))}catch(e){j.call(r,e)}}):(n._v=e,n._s=1,I(n,!1))}catch(e){j.call({_w:n,_d:!1},e)}}};O||(S=function(e){h(this,S,"Promise","_h"),p(e),r.call(this);try{e(c(R,this,1),c(j,this,1))}catch(e){j.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(147)(S.prototype,{then:function(e,t){var n=T(g(this,S));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?w.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&I(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=c(R,e,1),this.reject=c(j,e,1)},b.f=T=function(e){return e===S||e===a?new i(e):o(e)}),f(f.G+f.W+f.F*!O,{Promise:S}),n(47)(S,"Promise"),n(148)("Promise"),a=n(3).Promise,f(f.S+f.F*!O,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!O),"Promise",{resolve:function(e){return y(s&&this===a?S:this,e)}}),f(f.S+f.F*!(O&&n(149)(function(e){S.all(e).catch(E)})),"Promise",{all:function(e){var t=this,n=T(t),r=n.resolve,o=n.reject,i=_(function(){var n=[],i=0,a=1;m(e,!1,function(e){var s=i++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},o)}),--a||r(n)});return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=T(t),r=n.reject,o=_(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(28),o=n(143),i=n(144),a=n(10),s=n(65),u=n(71),c={},l={},t=e.exports=function(e,t,n,f,d){var p,h,m,g,v=d?function(){return e}:u(e),q=r(n,f,t?2:1),b=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(i(v)){for(p=s(e.length);p>b;b++)if((g=t?q(a(h=e[b])[0],h[1]):q(e[b]))===c||g===l)return g}else for(m=v.call(e);!(h=m.next()).done;)if((g=o(m,q,h.value,t))===c||g===l)return g};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(10);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){var r=n(19),o=n(7)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(6),o=n(74).set,i=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(27)(a);e.exports=function(){var e,t,n,c=function(){var r,o;for(u&&(r=a.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(i){var l=!0,f=document.createTextNode("");new i(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){o.call(r,c)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var r=n(14);e.exports=function(e,t,n){for(var o in t)n&&e[o]?e[o]=t[o]:r(e,o,t[o]);return e}},function(e,t,n){"use strict";var r=n(6),o=n(3),i=n(20),a=n(15),s=n(7)("species");e.exports=function(e){var t="function"==typeof o[e]?o[e]:r[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(7)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],a=i[r]();a.next=function(){return{done:n=!0}},i[r]=function(){return a},e(i)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(12),o=n(3),i=n(6),a=n(73),s=n(76);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(12),o=n(49),i=n(75);r(r.S,"Promise",{try:function(e){var t=o.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){e.exports={default:n(153),__esModule:!0}},function(e,t,n){n(154),e.exports=n(3).Object.assign},function(e,t,n){var r=n(12);r(r.S+r.F,"Object",{assign:n(155)})},function(e,t,n){"use strict";var r=n(44),o=n(156),i=n(157),a=n(48),s=n(61),u=Object.assign;e.exports=!u||n(30)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=o.f,f=i.f;u>c;)for(var d,p=s(arguments[c++]),h=l?r(p).concat(l(p)):r(p),m=h.length,g=0;m>g;)f.call(p,d=h[g++])&&(n[d]=p[d]);return n}:u},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(160),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){e.exports={default:n(161),__esModule:!0}},function(e,t,n){n(162);var r=n(3).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(12);r(r.S+r.F*!n(15),"Object",{defineProperty:n(20).f})},function(e,t,n){function r(e,t,n){function r(t){var n=q,r=b;return q=b=void 0,S=t,y=e.apply(r,n)}function l(e){return S=e,x=setTimeout(p,t),C?r(e):y}function f(e){var n=e-w,r=e-S,o=t-n;return E?c(o,_-r):o}function d(e){var n=e-w,r=e-S;return void 0===w||n>=t||n<0||E&&r>=_}function p(){var e=i();if(d(e))return h(e);x=setTimeout(p,f(e))}function h(e){return x=void 0,T&&q?r(e):(q=b=void 0,y)}function m(){void 0!==x&&clearTimeout(x),S=0,q=w=b=x=void 0}function g(){return void 0===x?y:h(i())}function v(){var e=i(),n=d(e);if(q=arguments,b=this,w=e,n){if(void 0===x)return l(w);if(E)return x=setTimeout(p,t),r(w)}return void 0===x&&(x=setTimeout(p,t)),y}var q,b,_,y,x,w,S=0,C=!1,E=!1,T=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,o(n)&&(C=!!n.leading,E="maxWait"in n,_=E?u(a(n.maxWait)||0,t):_,T="trailing"in n?!!n.trailing:T),v.cancel=m,v.flush=g,v}var o=n(8),i=n(164),a=n(165),s="Expected a function",u=Math.max,c=Math.min;e.exports=r},function(e,t,n){var r=n(13),o=function(){return r.Date.now()};e.exports=o},function(e,t,n){function r(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=c.test(e);return n||l.test(e)?f(e.slice(2),n?2:8):u.test(e)?a:+e}var o=n(8),i=n(32),a=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,f=parseInt;e.exports=r},function(e,t,n){function r(e){var t=a.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var o=s.call(e);return r&&(t?e[u]=n:delete e[u]),o}var o=n(50),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,u=o?o.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return o.call(e)}var r=Object.prototype,o=r.toString;e.exports=n},function(e,t,n){function r(e,t,n){var r=null==e?void 0:o(e,t);return void 0===r?n:r}var o=n(169);e.exports=r},function(e,t,n){function r(e,t){t=o(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[i(t[n++])];return n&&n==r?e:void 0}var o=n(170),i=n(199);e.exports=r},function(e,t,n){function r(e,t){return o(e)?e:i(e,t)?[e]:a(s(e))}var o=n(23),i=n(171),a=n(172),s=n(80);e.exports=r},function(e,t,n){function r(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}var o=n(23),i=n(32),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t,n){var r=n(173),o=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,s=r(function(e){var t=[];return o.test(e)&&t.push(""),e.replace(i,function(e,n,r,o){t.push(r?o.replace(a,"$1"):n||e)}),t});e.exports=s},function(e,t,n){function r(e){var t=o(e,function(e){return n.size===i&&n.clear(),e}),n=t.cache;return t}var o=n(174),i=500;e.exports=r},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(r.Cache||o),n}var o=n(78),i="Expected a function";r.Cache=o,e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=n(176),i=n(34),a=n(79);e.exports=r},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n(177),i=n(183),a=n(184),s=n(185),u=n(186);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(){this.__data__=o?o(null):{},this.size=0}var o=n(33);e.exports=r},function(e,t,n){function r(e){return!(!a(e)||i(e))&&(o(e)?h:c).test(s(e))}var o=n(52),i=n(179),a=n(8),s=n(181),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,f=Object.prototype,d=l.toString,p=f.hasOwnProperty,h=RegExp("^"+d.call(p).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return!!i&&i in e}var o=n(180),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t,n){var r=n(13),o=r["__core-js_shared__"];e.exports=o},function(e,t){function n(e){if(null!=e){try{return o.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,o=r.toString;e.exports=n},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(o){var n=t[e];return n===i?void 0:n}return s.call(t,e)?t[e]:void 0}var o=n(33),i="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return o?void 0!==t[e]:a.call(t,e)}var o=n(33),i=Object.prototype,a=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?i:t,this}var o=n(33),i="__lodash_hash_undefined__";e.exports=r},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}var o=n(35),i=Array.prototype,a=i.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(35);e.exports=r},function(e,t,n){function r(e){return o(this.__data__,e)>-1}var o=n(35);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var o=n(35);e.exports=r},function(e,t,n){function r(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=n(37);e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return o(this,e).get(e)}var o=n(37);e.exports=r},function(e,t,n){function r(e){return o(this,e).has(e)}var o=n(37);e.exports=r},function(e,t,n){function r(e,t){var n=o(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var o=n(37);e.exports=r},function(e,t,n){function r(e){if("string"==typeof e)return e;if(a(e))return i(e,r)+"";if(s(e))return l?l.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}var o=n(50),i=n(198),a=n(23),s=n(32),u=1/0,c=o?o.prototype:void 0,l=c?c.toString:void 0;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}e.exports=n},function(e,t,n){function r(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=n(32),i=1/0;e.exports=r},function(e,t,n){function r(e){var t=++i;return o(e)+t}var o=n(80),i=0;e.exports=r},function(e,t,n){var r=n(202),o=n(234),i=o(function(e,t,n){r(e,t,n)});e.exports=i},function(e,t,n){function r(e,t,n,l,f){e!==t&&a(t,function(a,c){if(u(a))f||(f=new o),s(e,t,c,n,r,l,f);else{var d=l?l(e[c],a,c+"",e,t,f):void 0;void 0===d&&(d=a),i(e,c,d)}},c)}var o=n(203),i=n(81),a=n(209),s=n(211),u=n(8),c=n(89);e.exports=r},function(e,t,n){function r(e){var t=this.__data__=new o(e);this.size=t.size}var o=n(34),i=n(204),a=n(205),s=n(206),u=n(207),c=n(208);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,e.exports=r},function(e,t,n){function r(){this.__data__=new o,this.size=0}var o=n(34);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof o){var r=n.__data__;if(!i||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(e,t),this.size=n.size,this}var o=n(34),i=n(79),a=n(78),s=200;e.exports=r},function(e,t,n){var r=n(210),o=r();e.exports=o},function(e,t){function n(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++o];if(!1===n(i[u],u,i))break}return t}}e.exports=n},function(e,t,n){function r(e,t,n,r,q,b,_){var y=e[n],x=t[n],w=_.get(x);if(w)return void o(e,n,w);var S=b?b(y,x,n+"",e,t,_):void 0,C=void 0===S;if(C){var E=l(x),T=!E&&d(x),O=!E&&!T&&g(x);S=x,E||T||O?l(y)?S=y:f(y)?S=s(y):T?(C=!1,S=i(x,!0)):O?(C=!1,S=a(x,!0)):S=[]:m(x)||c(x)?(S=y,c(y)?S=v(y):(!h(y)||r&&p(y))&&(S=u(x))):C=!1}C&&(_.set(x,S),q(S,x,r,b,_),_.delete(x)),o(e,n,S)}var o=n(81),i=n(212),a=n(213),s=n(216),u=n(217),c=n(85),l=n(23),f=n(221),d=n(87),p=n(52),h=n(8),m=n(223),g=n(88),v=n(227);e.exports=r},function(e,t,n){(function(e){function r(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}var o=n(13),i="object"==typeof t&&t&&!t.nodeType&&t,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i,u=s?o.Buffer:void 0,c=u?u.allocUnsafe:void 0;e.exports=r}).call(t,n(38)(e))},function(e,t,n){function r(e,t){var n=t?o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var o=n(214);e.exports=r},function(e,t,n){function r(e){var t=new e.constructor(e.byteLength);return new o(t).set(new o(e)),t}var o=n(215);e.exports=r},function(e,t,n){var r=n(13),o=r.Uint8Array;e.exports=o},function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},function(e,t,n){function r(e){return"function"!=typeof e.constructor||a(e)?{}:o(i(e))}var o=n(218),i=n(83),a=n(84);e.exports=r},function(e,t,n){var r=n(8),o=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=i},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t,n){function r(e){return i(e)&&o(e)==a}var o=n(22),i=n(16),a="[object Arguments]";e.exports=r},function(e,t,n){function r(e){return i(e)&&o(e)}var o=n(54),i=n(16);e.exports=r},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){if(!a(e)||o(e)!=s)return!1;var t=i(e);if(null===t)return!0;var n=f.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}var o=n(22),i=n(83),a=n(16),s="[object Object]",u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,d=l.call(Object);e.exports=r},function(e,t,n){function r(e){return a(e)&&i(e.length)&&!!s[o(e)]}var o=n(22),i=n(86),a=n(16),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t,n){(function(e){var r=n(77),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o,s=a&&r.process,u=function(){try{return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,n(38)(e))},function(e,t,n){function r(e){return o(e,i(e))}var o=n(228),i=n(89);e.exports=r},function(e,t,n){function r(e,t,n,r){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=r?r(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?i(n,c,l):o(n,c,l)}return n}var o=n(229),i=n(53);e.exports=r},function(e,t,n){function r(e,t,n){var r=e[t];s.call(e,t)&&i(r,n)&&(void 0!==n||t in e)||o(e,t,n)}var o=n(53),i=n(36),a=Object.prototype,s=a.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=a(e),r=!n&&i(e),l=!n&&!r&&s(e),d=!n&&!r&&!l&&c(e),p=n||r||l||d,h=p?o(e.length,String):[],m=h.length;for(var g in e)!t&&!f.call(e,g)||p&&("length"==g||l&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,m))||h.push(g);return h}var o=n(231),i=n(85),a=n(23),s=n(87),u=n(90),c=n(88),l=Object.prototype,f=l.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){if(!o(e))return a(e);var t=i(e),n=[];for(var r in e)("constructor"!=r||!t&&u.call(e,r))&&n.push(r);return n}var o=n(8),i=n(84),a=n(233),s=Object.prototype,u=s.hasOwnProperty;e.exports=r},function(e,t){function n(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}e.exports=n},function(e,t,n){function r(e){return o(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}var o=n(235),i=n(242);e.exports=r},function(e,t,n){function r(e,t){return a(i(e,t,o),e+"")}var o=n(91),i=n(236),a=n(238);e.exports=r},function(e,t,n){function r(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=i(r.length-t,0),u=Array(s);++a<s;)u[a]=r[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=r[a];return c[t]=n(u),o(e,this,c)}}var o=n(237),i=Math.max;e.exports=r},function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t,n){var r=n(239),o=n(241),i=o(r);e.exports=i},function(e,t,n){var r=n(240),o=n(82),i=n(91),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;e.exports=a},function(e,t){function n(e){return function(){return e}}e.exports=n},function(e,t){function n(e){var t=0,n=0;return function(){var a=i(),s=o-(a-n);if(n=a,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;e.exports=n},function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?i(n)&&a(t,n.length):"string"==r&&t in n)&&o(n[t],e)}var o=n(36),i=n(54),a=n(90),s=n(8);e.exports=r},function(e,t,n){"use strict";(function(t){var r=n(244);e.exports=n(260)(r),"_sockjs_onload"in t&&setTimeout(t._sockjs_onload,1)}).call(t,n(1))},function(e,t,n){"use strict";e.exports=[n(245),n(250),n(96),n(97),n(56)(n(97)),n(101),n(56)(n(101)),n(102),n(256),n(56)(n(102)),n(257)]},function(e,t,n){"use strict";function r(e,t,n){if(!r.enabled())throw new Error("Transport created when disabled");s.call(this),c("constructor",e);var a=this,l=i.addPath(e,"/websocket");l="https"===l.slice(0,5)?"wss"+l.slice(5):"ws"+l.slice(4),this.url=l,this.ws=new u(this.url,[],n),this.ws.onmessage=function(e){c("message event",e.data),a.emit("message",e.data)},this.unloadRef=o.unloadAdd(function(){c("unload"),a.ws.close()}),this.ws.onclose=function(e){c("close event",e.code,e.reason),a.emit("close",e.code,e.reason),a._cleanup()},this.ws.onerror=function(e){c("error event",e),a.emit("close",1006,"WebSocket connection broken"),a._cleanup()}}var o=n(11),i=n(4),a=n(0),s=n(2).EventEmitter,u=n(249),c=function(){};a(r,s),r.prototype.send=function(e){var t="["+e+"]";c("send",t),this.ws.send(t)},r.prototype.close=function(){c("close");var e=this.ws;this._cleanup(),e&&e.close()},r.prototype._cleanup=function(){c("_cleanup");var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),o.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},r.enabled=function(){return c("enabled"),!!u},r.transportName="websocket",r.roundTrips=2,e.exports=r},function(e,t,n){"use strict";(function(t){t.crypto&&t.crypto.getRandomValues?e.exports.randomBytes=function(e){var n=new Uint8Array(e);return t.crypto.getRandomValues(n),n}:e.exports.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return t}}).call(t,n(1))},function(e,t,n){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){"use strict";function r(e){return decodeURIComponent(e.replace(/\+/g," "))}function o(e){for(var t,n=/([^=?&]+)=?([^&]*)/g,o={};t=n.exec(e);o[r(t[1])]=r(t[2]));return o}function i(e,t){t=t||"";var n=[];"string"!=typeof t&&(t="?");for(var r in e)a.call(e,r)&&n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return n.length?t+n.join("&"):""}var a=Object.prototype.hasOwnProperty;t.stringify=i,t.parse=o},function(e,t,n){"use strict";(function(t){var n=t.WebSocket||t.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0}).call(t,n(1))},function(e,t,n){"use strict";(function(t){function r(e){if(!u.enabled&&!s.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",a,s)}var o=n(0),i=n(18),a=n(39),s=n(40),u=n(24),c=n(25);o(r,i),r.enabled=function(e){return!e.nullOrigin&&(!c.isOpera()&&s.enabled)},r.transportName="xhr-streaming",r.roundTrips=2,r.needBody=!!t.document,e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";function r(e,t){a(e),i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}var o=n(0),i=n(2).EventEmitter,a=function(){};o(r,i),r.prototype.send=function(e){a("send",e),this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},r.prototype.sendScheduleWait=function(){a("sendScheduleWait");var e,t=this;this.sendStop=function(){a("sendStop"),t.sendStop=null,clearTimeout(e)},e=setTimeout(function(){a("timeout"),t.sendStop=null,t.sendSchedule()},25)},r.prototype.sendSchedule=function(){a("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(t){e.sendStop=null,t?(a("error",t),e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}},r.prototype._cleanup=function(){a("_cleanup"),this.removeAllListeners()},r.prototype.close=function(){a("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=r},function(e,t,n){"use strict";function r(e,t,n){a(t),i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}var o=n(0),i=n(2).EventEmitter,a=function(){};o(r,i),r.prototype._scheduleReceiver=function(){a("_scheduleReceiver");var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(t){a("message",t),e.emit("message",t)}),t.once("close",function(n,r){a("close",n,r,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||("network"===r?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))})},r.prototype.abort=function(){a("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=r},function(e,t,n){"use strict";function r(e){s(e),i.call(this);var t=this,n=this.es=new a(e);n.onmessage=function(e){s("message",e.data),t.emit("message",decodeURI(e.data))},n.onerror=function(e){s("error",n.readyState,e);var r=2!==n.readyState?"network":"permanent";t._cleanup(),t._close(r)}}var o=n(0),i=n(2).EventEmitter,a=n(98),s=function(){};o(r,i),r.prototype.abort=function(){s("abort"),this._cleanup(),this._close("user")},r.prototype._cleanup=function(){s("cleanup");var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},r.prototype._close=function(e){s("close",e);var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)},e.exports=r},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";(function(t){function r(e){c(e),s.call(this);var n=this;i.polluteGlobalNamespace(),this.id="a"+u.string(6),e=a.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c("using htmlfile",r.htmlfileEnabled);var o=r.htmlfileEnabled?i.createHtmlfile:i.createIframe;t[i.WPrefix][this.id]={start:function(){c("start"),n.iframeObj.loaded()},message:function(e){c("message",e),n.emit("message",e)},stop:function(){c("stop"),n._cleanup(),n._close("network")}},this.iframeObj=o(e,function(){c("callback"),n._cleanup(),n._close("permanent")})}var o=n(0),i=n(26),a=n(4),s=n(2).EventEmitter,u=n(17),c=function(){};o(r,s),r.prototype.abort=function(){c("abort"),this._cleanup(),this._close("user")},r.prototype._cleanup=function(){c("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete t[i.WPrefix][this.id]},r.prototype._close=function(e){c("_close",e),this.emit("close",null,e),this.removeAllListeners()},r.htmlfileEnabled=!1;var l=["Active"].concat("Object").join("X");if(l in t)try{r.htmlfileEnabled=!!new t[l]("htmlfile")}catch(e){}r.enabled=r.htmlfileEnabled||i.iframeEnabled,e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";function r(e){if(!u.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,u)}var o=n(0),i=n(18),a=n(96),s=n(39),u=n(55);o(r,i),r.enabled=a.enabled,r.transportName="xdr-polling",r.roundTrips=2,e.exports=r},function(e,t,n){"use strict";(function(t){function r(e){if(!r.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",s,a)}var o=n(0),i=n(94),a=n(258),s=n(259);o(r,i),r.enabled=function(){return!!t.document},r.transportName="jsonp-polling",r.roundTrips=1,r.needBody=!0,e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";(function(t){function r(e){l(e);var n=this;c.call(this),o.polluteGlobalNamespace(),this.id="a"+i.string(6);var a=s.addQuery(e,"c="+encodeURIComponent(o.WPrefix+"."+this.id));t[o.WPrefix][this.id]=this._callback.bind(this),this._createScript(a),this.timeoutId=setTimeout(function(){l("timeout"),n._abort(new Error("JSONP script loaded abnormally (timeout)"))},r.timeout)}var o=n(26),i=n(17),a=n(25),s=n(4),u=n(0),c=n(2).EventEmitter,l=function(){};u(r,c),r.prototype.abort=function(){if(l("abort"),t[o.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},r.timeout=35e3,r.scriptErrorTimeout=1e3,r.prototype._callback=function(e){l("_callback",e),this._cleanup(),this.aborting||(e&&(l("message",e),this.emit("message",e)),this.emit("close",null,"network"),this.removeAllListeners())},r.prototype._abort=function(e){l("_abort",e),this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},r.prototype._cleanup=function(){if(l("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete t[o.WPrefix][this.id]},r.prototype._scriptError=function(){l("_scriptError");var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},r.scriptErrorTimeout))},r.prototype._createScript=function(e){l("_createScript",e);var n,r=this,o=this.script=t.document.createElement("script");if(o.id="a"+i.string(8),o.src=e,o.type="text/javascript",o.charset="UTF-8",o.onerror=this._scriptError.bind(this),o.onload=function(){l("onload"),r._abort(new Error("JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(l("onreadystatechange",o.readyState),/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){r.loadedOkay=!0;try{o.onclick()}catch(e){}}o&&r._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===o.async&&t.document.attachEvent)if(a.isOpera())n=this.script2=t.document.createElement("script"),n.text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=n.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(e){}o.async=!0}void 0!==o.async&&(o.async=!0);var s=t.document.getElementsByTagName("head")[0];s.insertBefore(o,s.firstChild),n&&s.insertBefore(n,s.firstChild)},e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";(function(t){function r(e){c("createIframe",e);try{return t.document.createElement('<iframe name="'+e+'">')}catch(r){var n=t.document.createElement("iframe");return n.name=e,n}}function o(){c("createForm"),i=t.document.createElement("form"),i.style.display="none",i.style.position="absolute",i.method="POST",i.enctype="application/x-www-form-urlencoded",i.acceptCharset="UTF-8",a=t.document.createElement("textarea"),a.name="d",i.appendChild(a),t.document.body.appendChild(i)}var i,a,s=n(17),u=n(4),c=function(){};e.exports=function(e,t,n){c(e,t),i||o();var l="a"+s.string(8);i.target=l,i.action=u.addQuery(u.addPath(e,"/jsonp_send"),"i="+l);var f=r(l);f.id=l,f.style.display="none",i.appendChild(f);try{a.value=t}catch(e){}i.submit();var d=function(e){c("completed",l,e),f.onerror&&(f.onreadystatechange=f.onerror=f.onload=null,setTimeout(function(){c("cleaning up",l),f.parentNode.removeChild(f),f=null},500),a.value="",n(e))};return f.onerror=function(){c("onerror",l),d()},f.onload=function(){c("onload",l),d()},f.onreadystatechange=function(e){c("onreadystatechange",l,f.readyState,e),"complete"===f.readyState&&d()},function(){c("aborted",l),d(new Error("Aborted"))}}}).call(t,n(1))},function(e,t,n){"use strict";(function(t){function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");q.call(this),this.readyState=r.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&g.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{};var o=n.sessionId||8;if("function"==typeof o)this._generateSessionId=o;else{if("number"!=typeof o)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return c.string(o)}}this._server=n.server||c.numberString(1e3);var i=new a(e);if(!i.host||!i.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(i.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==i.protocol&&"https:"!==i.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+i.protocol+"' is not allowed.");var s="https:"===i.protocol;if("https"===b.protocol&&!s)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var u=t.sort();u.forEach(function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<u.length-1&&e===u[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")});var l=f.getOrigin(b.href);this._origin=l?l.toLowerCase():null,i.set("pathname",i.pathname.replace(/\/+$/,"")),this.url=i.href,w("using url",this.url),this._urlInfo={nullOrigin:!m.hasDomain(),sameOrigin:f.isOriginEqual(this.url,b.href),sameScheme:f.isSchemeEqual(this.url,b.href)},this._ir=new x(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function o(e){return 1e3===e||e>=3e3&&e<=4999}n(261);var i,a=n(92),s=n(0),u=n(9),c=n(17),l=n(262),f=n(4),d=n(11),p=n(263),h=n(57),m=n(25),g=n(264),v=n(58),q=n(93),b=n(103),_=n(265),y=n(266),x=n(267),w=function(){};s(r,q),r.prototype.close=function(e,t){if(e&&!o(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==r.CLOSING&&this.readyState!==r.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},r.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===r.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===r.OPEN&&this._transport.send(l.quote(e))},r.version=n(100),r.CONNECTING=0,r.OPEN=1,r.CLOSING=2,r.CLOSED=3,r.prototype._receiveInfo=function(e,t){if(w("_receiveInfo",t),this._ir=null,!e)return void this._close(1002,"Cannot connect to server");this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=h.extend(e,this._urlInfo),w("info",e);var n=i.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,w(this._transports.length+" enabled transports"),this._connect()},r.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(w("attempt",e.transportName),e.needBody&&(!t.document.body||void 0!==t.document.readyState&&"complete"!==t.document.readyState&&"interactive"!==t.document.readyState))return w("waiting for body"),this._transports.unshift(e),void d.attachEvent("load",this._connect.bind(this));var n=this._rto*e.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),n),w("using timeout",n);var r=f.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),o=this._transportOptions[e.transportName];w("transport url",r);var i=new e(r,this._transUrl,o);return i.on("message",this._transportMessage.bind(this)),i.once("close",this._transportClose.bind(this)),i.transportName=e.transportName,void(this._transport=i)}this._close(2e3,"All transports failed",!1)},r.prototype._transportTimeout=function(){w("_transportTimeout"),this.readyState===r.CONNECTING&&this._transportClose(2007,"Transport timed out")},r.prototype._transportMessage=function(e){w("_transportMessage",e);var t,n=this,r=e.slice(0,1),o=e.slice(1);switch(r){case"o":return void this._open();case"h":return this.dispatchEvent(new v("heartbeat")),void w("heartbeat",this.transport)}if(o)try{t=u.parse(o)}catch(e){w("bad json",o)}if(void 0===t)return void w("empty payload",o);switch(r){case"a":Array.isArray(t)&&t.forEach(function(e){w("message",n.transport,e),n.dispatchEvent(new y(e))});break;case"m":w("message",this.transport,t),this.dispatchEvent(new y(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},r.prototype._transportClose=function(e,t){if(w("_transportClose",this.transport,e,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!o(e)&&2e3!==e&&this.readyState===r.CONNECTING)return void this._connect();this._close(e,t)},r.prototype._open=function(){w("_open",this._transport.transportName,this.readyState),this.readyState===r.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=r.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new v("open")),w("connected",this.transport)):this._close(1006,"Server lost session")},r.prototype._close=function(e,t,n){w("_close",this.transport,e,t,n,this.readyState);var o=!1;if(this._ir&&(o=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===r.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=r.CLOSING,setTimeout(function(){this.readyState=r.CLOSED,o&&this.dispatchEvent(new v("error"));var i=new _("close");i.wasClean=n||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null,w("disconnected")}.bind(this),0)},r.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return i=p(e),n(270)(r,e),r}}).call(t,n(1))},function(e,t,n){"use strict";function r(e){var t=+e;return t!==t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function o(e){return e>>>0}function i(){}var a,s=Array.prototype,u=Object.prototype,c=Function.prototype,l=String.prototype,f=s.slice,d=u.toString,p=function(e){return"[object Function]"===u.toString.call(e)},h=function(e){return"[object Array]"===d.call(e)},m=function(e){return"[object String]"===d.call(e)},g=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();a=g?function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,r){!r&&t in e||(e[t]=n)};var v=function(e,t,n){for(var r in t)u.hasOwnProperty.call(t,r)&&a(e,r,t[r],n)},q=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};v(c,{bind:function(e){var t=this;if(!p(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var n=f.call(arguments,1),r=function(){if(this instanceof u){var r=t.apply(this,n.concat(f.call(arguments)));return Object(r)===r?r:this}return t.apply(e,n.concat(f.call(arguments)))},o=Math.max(0,t.length-n.length),a=[],s=0;s<o;s++)a.push("$"+s);var u=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(r);return t.prototype&&(i.prototype=t.prototype,u.prototype=new i,i.prototype=null),u}}),v(Array,{isArray:h});var b=Object("a"),_="a"!==b[0]||!(0 in b);v(s,{forEach:function(e){var t=q(this),n=_&&m(this)?this.split(""):t,r=arguments[1],o=-1,i=n.length>>>0;if(!p(e))throw new TypeError;for(;++o<i;)o in n&&e.call(r,n[o],o,t)}},!function(e){var t=!0,n=!0;return e&&(e.call("foo",function(e,n,r){"object"!=typeof r&&(t=!1)}),e.call([1],function(){n="string"==typeof this},"x")),!!e&&t&&n}(s.forEach));var y=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);v(s,{indexOf:function(e){var t=_&&m(this)?this.split(""):q(this),n=t.length>>>0;if(!n)return-1;var o=0;for(arguments.length>1&&(o=r(arguments[1])),o=o>=0?o:Math.max(0,n+o);o<n;o++)if(o in t&&t[o]===e)return o;return-1}},y);var x=l.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=void 0===/()??/.exec("")[1];l.split=function(t,n){var r=this;if(void 0===t&&0===n)return[];if("[object RegExp]"!==d.call(t))return x.call(this,t,n);var i,a,u,c,l=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),p=0;for(t=new RegExp(t.source,f+"g"),r+="",e||(i=new RegExp("^"+t.source+"$(?!\\s)",f)),n=void 0===n?-1>>>0:o(n);(a=t.exec(r))&&!((u=a.index+a[0].length)>p&&(l.push(r.slice(p,a.index)),!e&&a.length>1&&a[0].replace(i,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(a[e]=void 0)}),a.length>1&&a.index<r.length&&s.push.apply(l,a.slice(1)),c=a[0].length,p=u,l.length>=n));)t.lastIndex===a.index&&t.lastIndex++;return p===r.length?!c&&t.test("")||l.push(""):l.push(r.slice(p)),l.length>n?l.slice(0,n):l}}():"0".split(void 0,0).length&&(l.split=function(e,t){return void 0===e&&0===t?[]:x.call(this,e,t)});var w=l.substr,S="".substr&&"b"!=="0b".substr(-1);v(l,{substr:function(e,t){return w.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},S)},function(e,t,n){"use strict";var r,o=n(9),i=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,a=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};e.exports={quote:function(e){var t=o.stringify(e);return i.lastIndex=0,i.test(t)?(r||(r=a(i)),t.replace(i,function(e){return r[e]})):t}}},function(e,t,n){"use strict";var r=function(){};e.exports=function(e){return{filterToEnabled:function(t,n){var o={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach(function(e){if(e)return"websocket"===e.transportName&&!1===n.websocket?void r("disabled from server","websocket"):t.length&&-1===t.indexOf(e.transportName)?void r("not in whitelist",e.transportName):void(e.enabled(n)?(r("enabled",e.transportName),o.main.push(e),e.facadeTransport&&o.facade.push(e.facadeTransport)):r("disabled",e.transportName))}),o}}}},function(e,t,n){"use strict";(function(t){var n={};["log","debug","warn"].forEach(function(e){var r;try{r=t.console&&t.console[e]&&t.console[e].apply}catch(e){}n[e]=r?function(){return t.console[e].apply(t.console,arguments)}:"log"===e?function(){}:n.log}),e.exports=n}).call(t,n(1))},function(e,t,n){"use strict";function r(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var o=n(0),i=n(58);o(r,i),e.exports=r},function(e,t,n){"use strict";function r(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}var o=n(0),i=n(58);o(r,i),e.exports=r},function(e,t,n){"use strict";function r(e,t){p(e);var n=this;o.call(this),setTimeout(function(){n.doXhr(e,t)},0)}var o=n(2).EventEmitter,i=n(0),a=n(4),s=n(55),u=n(40),c=n(24),l=n(268),f=n(269),d=n(105),p=function(){};i(r,o),r._getReceiver=function(e,t,n){return n.sameOrigin?new d(t,c):u.enabled?new d(t,u):s.enabled&&n.sameScheme?new d(t,s):f.enabled()?new f(e,t):new d(t,l)},r.prototype.doXhr=function(e,t){var n=this,o=a.addPath(e,"/info");p("doXhr",o),this.xo=r._getReceiver(e,o,t),this.timeoutRef=setTimeout(function(){p("timeout"),n._cleanup(!1),n.emit("finish")},r.timeout),this.xo.once("finish",function(e,t){p("finish",e,t),n._cleanup(!0),n.emit("finish",e,t)})},r.prototype._cleanup=function(e){p("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},r.prototype.close=function(){p("close"),this.removeAllListeners(),this._cleanup(!1)},r.timeout=8e3,e.exports=r},function(e,t,n){"use strict";function r(){var e=this;o.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},r.timeout)}var o=n(2).EventEmitter;n(0)(r,o),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,e.exports=r},function(e,t,n){"use strict";(function(t){function r(e,n){var r=this;o.call(this);var i=function(){var t=r.ifr=new u(c.transportName,n,e);t.once("message",function(e){if(e){var t;try{t=a.parse(e)}catch(t){return l("bad json",e),r.emit("finish"),void r.close()}var n=t[0],o=t[1];r.emit("finish",n,o)}r.close()}),t.once("close",function(){r.emit("finish"),r.close()})};t.document.body?i():s.attachEvent("load",i)}var o=n(2).EventEmitter,i=n(0),a=n(9),s=n(11),u=n(99),c=n(104),l=function(){};i(r,o),r.enabled=function(){return u.enabled()},r.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=r}).call(t,n(1))},function(e,t,n){"use strict";var r=n(4),o=n(11),i=n(9),a=n(271),s=n(104),u=n(26),c=n(103),l=function(){};e.exports=function(e,t){var n={};t.forEach(function(e){e.facadeTransport&&(n[e.facadeTransport.transportName]=e.facadeTransport)}),n[s.transportName]=s;var f;e.bootstrap_iframe=function(){var t;u.currentWindowId=c.hash.slice(1);var s=function(o){if(o.source===parent&&(void 0===f&&(f=o.origin),o.origin===f)){var s;try{s=i.parse(o.data)}catch(e){return void l("bad json",o.data)}if(s.windowId===u.currentWindowId)switch(s.type){case"s":var d;try{d=i.parse(s.data)}catch(e){l("bad json",s.data);break}var p=d[0],h=d[1],m=d[2],g=d[3];if(l(p,h,m,g),p!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+p+'", the iframe: "'+e.version+'".');if(!r.isOriginEqual(m,c.href)||!r.isOriginEqual(g,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+m+", "+g+")");t=new a(new n[h](m,g));break;case"m":t._send(s.data);break;case"c":t&&t._close(),t=null}}};o.attachEvent("message",s),u.postMessage("s")}}},function(e,t,n){"use strict";function r(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}var o=n(9),i=n(26);r.prototype._transportClose=function(e,t){i.postMessage("c",o.stringify([e,t]))},r.prototype._transportMessage=function(e){i.postMessage("t",e)},r.prototype._send=function(e){this._transport.send(e)},r.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=r},function(e,t,n){e.exports=n(273)},function(e,t,n){"use strict";function r(e){var t=new a(e),n=i(a.prototype.request,t);return o.extend(n,a.prototype,t),o.extend(n,t),n}var o=n(5),i=n(106),a=n(275),s=n(59),u=r(s);u.Axios=a,u.create=function(e){return r(o.merge(s,e))},u.Cancel=n(110),u.CancelToken=n(290),u.isCancel=n(109),u.all=function(e){return Promise.all(e)},u.spread=n(291),e.exports=u,e.exports.default=u},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}e.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},function(e,t,n){"use strict";function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=n(59),i=n(5),a=n(285),s=n(286),u=n(288),c=n(289);r.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,this.defaults,{method:"get"},e),e.method=e.method.toLowerCase(),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url));var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)n=n.then(t.shift(),t.shift());return n},i.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,n){return this.request(i.merge(n||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(i.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?h=p.concat(h):g=-1,h.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,h=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(108);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=n(5);e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&void 0!==e&&(o.isArray(e)&&(t+="[]"),o.isArray(e)||(e=[e]),o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){var t,n,o,i={};return e?(r.forEach(e.split("\n"),function(e){o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}},function(e,t,n){"use strict";var r=n(5);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(n){var o=r.isString(n)?e(n):n;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function o(e){for(var t,n,o=String(e),a="",s=0,u=i;o.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=o.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=o},function(e,t,n){"use strict";var r=n(5);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var o=n(5);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=n(5),i=n(287),a=n(109),s=n(59);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(r(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,n){"use strict";var r=n(5);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new o(e),t(n.reason))})}var o=n(110);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=n(293)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(global){var qq=function(e){"use strict";return{hide:function(){return e.style.display="none",this},attach:function(t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n),function(){qq(e).detach(t,n)}},detach:function(t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.attachEvent&&e.detachEvent("on"+t,n),this},contains:function(t){return!!t&&(e===t||(e.contains?e.contains(t):!!(8&t.compareDocumentPosition(e))))},insertBefore:function(t){return t.parentNode.insertBefore(e,t),this},remove:function(){return e.parentNode.removeChild(e),this},css:function(t){if(null==e.style)throw new qq.Error("Can't apply style to node as it is not on the HTMLElement prototype chain!");return null!=t.opacity&&"string"!=typeof e.style.opacity&&void 0!==e.filters&&(t.filter="alpha(opacity="+Math.round(100*t.opacity)+")"),qq.extend(e.style,t),this},hasClass:function(t,n){var r=new RegExp("(^| )"+t+"( |$)");return r.test(e.className)||!(!n||!r.test(e.parentNode.className))},addClass:function(t){return qq(e).hasClass(t)||(e.className+=" "+t),this},removeClass:function(t){var n=new RegExp("(^| )"+t+"( |$)");return e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,""),this},getByClass:function(t,n){var r,o=[];return n&&e.querySelector?e.querySelector("."+t):e.querySelectorAll?e.querySelectorAll("."+t):(r=e.getElementsByTagName("*"),qq.each(r,function(e,n){qq(n).hasClass(t)&&o.push(n)}),n?o[0]:o)},getFirstByClass:function(t){return qq(e).getByClass(t,!0)},children:function(){for(var t=[],n=e.firstChild;n;)1===n.nodeType&&t.push(n),n=n.nextSibling;return t},setText:function(t){return e.innerText=t,e.textContent=t,this},clearText:function(){return qq(e).setText("")},hasAttribute:function(t){var n;return e.hasAttribute?!!e.hasAttribute(t)&&null==/^false$/i.exec(e.getAttribute(t)):void 0!==(n=e[t])&&null==/^false$/i.exec(n)}}};!function(){"use strict";qq.canvasToBlob=function(e,t,n){return qq.dataUriToBlob(e.toDataURL(t,n))},qq.dataUriToBlob=function(e){var t,n,r,o;return n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(n.length),r=new Uint8Array(t),qq.each(n,function(e,t){r[e]=t.charCodeAt(0)}),function(e,t){var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=n&&new n;return r?(r.append(e),r.getBlob(t)):new Blob([e],{type:t})}(t,o)},qq.log=function(e,t){window.console&&(t&&"info"!==t?window.console[t]?window.console[t](e):window.console.log("<"+t+"> "+e):window.console.log(e))},qq.isObject=function(e){return e&&!e.nodeType&&"[object Object]"===Object.prototype.toString.call(e)},qq.isFunction=function(e){return"function"==typeof e},qq.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)||e&&window.ArrayBuffer&&e.buffer&&e.buffer.constructor===ArrayBuffer},qq.isItemList=function(e){return"[object DataTransferItemList]"===Object.prototype.toString.call(e)},qq.isNodeList=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)||e.item&&e.namedItem},qq.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},qq.trimStr=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},qq.format=function(e){var t=Array.prototype.slice.call(arguments,1),n=e,r=n.indexOf("{}");return qq.each(t,function(e,t){var o=n.substring(0,r),i=n.substring(r+2);if(n=o+t+i,(r=n.indexOf("{}",r+t.length))<0)return!1}),n},qq.isFile=function(e){return window.File&&"[object File]"===Object.prototype.toString.call(e)},qq.isFileList=function(e){return window.FileList&&"[object FileList]"===Object.prototype.toString.call(e)},qq.isFileOrInput=function(e){return qq.isFile(e)||qq.isInput(e)},qq.isInput=function(e,t){var n=function(e){var n=e.toLowerCase();return t?"file"!==n:"file"===n};return!!(window.HTMLInputElement&&"[object HTMLInputElement]"===Object.prototype.toString.call(e)&&e.type&&n(e.type))||!!(e.tagName&&"input"===e.tagName.toLowerCase()&&e.type&&n(e.type))},qq.isBlob=function(e){if(window.Blob&&"[object Blob]"===Object.prototype.toString.call(e))return!0},qq.isXhrUploadSupported=function(){var e=document.createElement("input");return e.type="file",void 0!==e.multiple&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&void 0!==qq.createXhrInstance().upload},qq.createXhrInstance=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return qq.log("Neither XHR or ActiveX are supported!","error"),null}},qq.isFolderDropSupported=function(e){return e.items&&e.items.length>0&&e.items[0].webkitGetAsEntry},qq.isFileChunkingSupported=function(){return!qq.androidStock()&&qq.isXhrUploadSupported()&&(void 0!==File.prototype.slice||void 0!==File.prototype.webkitSlice||void 0!==File.prototype.mozSlice)},qq.sliceBlob=function(e,t,n){return(e.slice||e.mozSlice||e.webkitSlice).call(e,t,n)},qq.arrayBufferToHex=function(e){var t="",n=new Uint8Array(e);return qq.each(n,function(e,n){var r=n.toString(16);r.length<2&&(r="0"+r),t+=r}),t},qq.readBlobToHex=function(e,t,n){var r=qq.sliceBlob(e,t,t+n),o=new FileReader,i=new qq.Promise;return o.onload=function(){i.success(qq.arrayBufferToHex(o.result))},o.onerror=i.failure,o.readAsArrayBuffer(r),i},qq.extend=function(e,t,n){return qq.each(t,function(t,r){n&&qq.isObject(r)?(void 0===e[t]&&(e[t]={}),qq.extend(e[t],r,!0)):e[t]=r}),e},qq.override=function(e,t){var n={},r=t(n);return qq.each(r,function(t,r){void 0!==e[t]&&(n[t]=e[t]),e[t]=r}),e},qq.indexOf=function(e,t,n){if(e.indexOf)return e.indexOf(t,n);n=n||0;var r=e.length;for(n<0&&(n+=r);n<r;n+=1)if(e.hasOwnProperty(n)&&e[n]===t)return n;return-1},qq.getUniqueId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},qq.ie=function(){return-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident")},qq.ie7=function(){return-1!==navigator.userAgent.indexOf("MSIE 7")},qq.ie8=function(){return-1!==navigator.userAgent.indexOf("MSIE 8")},qq.ie10=function(){return-1!==navigator.userAgent.indexOf("MSIE 10")},qq.ie11=function(){return qq.ie()&&-1!==navigator.userAgent.indexOf("rv:11")},qq.edge=function(){return navigator.userAgent.indexOf("Edge")>=0},qq.safari=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Apple")},qq.chrome=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Google")},qq.opera=function(){return void 0!==navigator.vendor&&-1!==navigator.vendor.indexOf("Opera")},qq.firefox=function(){return!qq.edge()&&!qq.ie11()&&-1!==navigator.userAgent.indexOf("Mozilla")&&void 0!==navigator.vendor&&""===navigator.vendor},qq.windows=function(){return"Win32"===navigator.platform},qq.android=function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},qq.androidStock=function(){return qq.android()&&navigator.userAgent.toLowerCase().indexOf("chrome")<0},qq.ios6=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 6_")},qq.ios7=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 7_")},qq.ios8=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_")},qq.ios800=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf(" OS 8_0 ")},qq.ios=function(){return-1!==navigator.userAgent.indexOf("iPad")||-1!==navigator.userAgent.indexOf("iPod")||-1!==navigator.userAgent.indexOf("iPhone")},qq.iosChrome=function(){return qq.ios()&&-1!==navigator.userAgent.indexOf("CriOS")},qq.iosSafari=function(){return qq.ios()&&!qq.iosChrome()&&-1!==navigator.userAgent.indexOf("Safari")},qq.iosSafariWebView=function(){return qq.ios()&&!qq.iosChrome()&&!qq.iosSafari()},qq.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},qq.toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var n=e.firstChild;return e.removeChild(n),n}}(),qq.each=function(e,t){var n;if(e)if(window.Storage&&e.constructor===window.Storage)for(n=0;n<e.length&&!1!==t(e.key(n),e.getItem(e.key(n)));n++);else if(qq.isArray(e)||qq.isItemList(e)||qq.isNodeList(e))for(n=0;n<e.length&&!1!==t(n,e[n]);n++);else if(qq.isString(e))for(n=0;n<e.length&&!1!==t(n,e.charAt(n));n++);else for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&!1===t(n,e[n]))break},qq.bind=function(e,t){if(qq.isFunction(e)){var n=Array.prototype.slice.call(arguments,2);return function(){var r=qq.extend([],n);return arguments.length&&(r=r.concat(Array.prototype.slice.call(arguments))),e.apply(t,r)}}throw new Error("first parameter must be a function!")},qq.obj2url=function(e,t,n){var r=[],o="&",i=function(e,n){var o=t?/\[\]$/.test(t)?t:t+"["+n+"]":n;"undefined"!==o&&"undefined"!==n&&r.push("object"==typeof e?qq.obj2url(e,o,!0):"[object Function]"===Object.prototype.toString.call(e)?encodeURIComponent(o)+"="+encodeURIComponent(e()):encodeURIComponent(o)+"="+encodeURIComponent(e))};return!n&&t?(o=/\?/.test(t)?/\?$/.test(t)?"":"&":"?",r.push(t),r.push(qq.obj2url(e))):"[object Array]"===Object.prototype.toString.call(e)&&void 0!==e?qq.each(e,function(e,t){i(t,e)}):void 0!==e&&null!==e&&"object"==typeof e?qq.each(e,function(e,t){i(t,e)}):r.push(encodeURIComponent(t)+"="+encodeURIComponent(e)),t?r.join(o):r.join(o).replace(/^&/,"").replace(/%20/g,"+")},qq.obj2FormData=function(e,t,n){return t||(t=new FormData),qq.each(e,function(e,r){e=n?n+"["+e+"]":e,qq.isObject(r)?qq.obj2FormData(r,t,e):qq.isFunction(r)?t.append(e,r()):t.append(e,r)}),t},qq.obj2Inputs=function(e,t){var n;return t||(t=document.createElement("form")),qq.obj2FormData(e,{append:function(e,r){n=document.createElement("input"),n.setAttribute("name",e),n.setAttribute("value",r),t.appendChild(n)}}),t},qq.parseJson=function(json){return window.JSON&&qq.isFunction(JSON.parse)?JSON.parse(json):eval("("+json+")")},qq.getExtension=function(e){var t=e.lastIndexOf(".")+1;if(t>0)return e.substr(t,e.length-t)},qq.getFilename=function(e){return qq.isInput(e)?e.value.replace(/.*(\/|\\)/,""):qq.isFile(e)&&null!==e.fileName&&void 0!==e.fileName?e.fileName:e.name},qq.DisposeSupport=function(){var e=[];return{dispose:function(){var t;do{(t=e.shift())&&t()}while(t)},attach:function(){var e=arguments;this.addDisposer(qq(e[0]).attach.apply(this,Array.prototype.slice.call(arguments,1)))},addDisposer:function(t){e.push(t)}}}}(),function(){"use strict";void 0!==(__WEBPACK_AMD_DEFINE_RESULT__=function(){return qq}.call(exports,__webpack_require__,exports,module))&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(),function(){"use strict";qq.Error=function(e){this.message="[Fine Uploader "+qq.version+"] "+e},qq.Error.prototype=new Error}(),qq.version="5.15.0",qq.supportedFeatures=function(){"use strict";function e(){if(window.XMLHttpRequest){return void 0!==qq.createXhrInstance().withCredentials}return!1}function t(){return void 0!==window.XDomainRequest}var n,r,o,i,a,s,u,c,l,f,d,p,h,m,g;return n=function(){var e,t=!0;try{e=document.createElement("input"),e.type="file",qq(e).hide(),e.disabled&&(t=!1)}catch(e){t=!1}return t}(),i=n&&qq.isXhrUploadSupported(),r=i&&!qq.androidStock(),o=i&&function(){var e=document.createElement("span");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!qq.android()&&!qq.ios()}(),a=o&&function(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[2][1-9]|Chrome\/[3-9][0-9]/)}(),s=i&&qq.isFileChunkingSupported(),u=i&&s&&function(){try{return!!window.localStorage&&qq.isFunction(window.localStorage.setItem)}catch(e){return!1}}(),c=i&&function(){return(qq.chrome()||qq.opera())&&void 0!==navigator.userAgent.match(/Chrome\/[1][4-9]|Chrome\/[2-9][0-9]/)}(),l=n&&(void 0!==window.postMessage||i),d=e(),f=t(),p=function(){return!!e()||t()}(),h=function(){return void 0!==document.createElement("input").webkitdirectory}(),m=i&&void 0!==window.FileReader,g=function(){return!!i&&(!qq.androidStock()&&!qq.iosChrome())}(),{ajaxUploading:i,blobUploading:r,canDetermineSize:i,chunking:s,deleteFileCors:p,deleteFileCorsXdr:f,deleteFileCorsXhr:d,dialogElement:!!window.HTMLDialogElement,fileDrop:o,folderDrop:a,folderSelection:h,imagePreviews:m,imageValidation:m,itemSizeValidation:i,pause:s,progressBar:g,resume:u,scaling:m&&r,tiffPreviews:qq.safari(),unlimitedScaledImageSize:!qq.ios(),uploading:n,uploadCors:l,uploadCustomHeaders:i,uploadNonMultipart:i,uploadViaPaste:c}}(),qq.isGenericPromise=function(e){"use strict";return!!(e&&e.then&&qq.isFunction(e.then))},qq.Promise=function(){"use strict";var e,t,n=[],r=[],o=[],i=0;qq.extend(this,{then:function(o,a){return 0===i?(o&&n.push(o),a&&r.push(a)):-1===i?a&&a.apply(null,t):o&&o.apply(null,e),this},done:function(n){return 0===i?o.push(n):n.apply(null,void 0===t?e:t),this},success:function(){return i=1,e=arguments,n.length&&qq.each(n,function(t,n){n.apply(null,e)}),o.length&&qq.each(o,function(t,n){n.apply(null,e)}),this},failure:function(){return i=-1,t=arguments,r.length&&qq.each(r,function(e,n){n.apply(null,t)}),o.length&&qq.each(o,function(e,n){n.apply(null,t)}),this}})},qq.BlobProxy=function(e,t){"use strict";qq.extend(this,{referenceBlob:e,create:function(){return t(e)}})},qq.UploadButton=function(e){"use strict";function t(){var e=document.createElement("input");return e.setAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME,r),e.setAttribute("title",a.title),o.setMultiple(a.multiple,e),a.folders&&qq.supportedFeatures.folderSelection&&e.setAttribute("webkitdirectory",""),a.acceptFiles&&e.setAttribute("accept",a.acceptFiles),e.setAttribute("type","file"),e.setAttribute("name",a.name),qq(e).css({position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:qq.ie()&&!qq.ie8()?"3500px":"118px",margin:0,padding:0,cursor:"pointer",opacity:0}),!qq.ie7()&&qq(e).css({height:"100%"}),a.element.appendChild(e),i.attach(e,"change",function(){a.onChange(e)}),i.attach(e,"mouseover",function(){qq(a.element).addClass(a.hoverClass)}),i.attach(e,"mouseout",function(){qq(a.element).removeClass(a.hoverClass)}),i.attach(e,"focus",function(){qq(a.element).addClass(a.focusClass)}),i.attach(e,"blur",function(){qq(a.element).removeClass(a.focusClass)}),e}var n,r,o=this,i=new qq.DisposeSupport,a={acceptFiles:null,element:null,focusClass:"qq-upload-button-focus",folders:!1,hoverClass:"qq-upload-button-hover",ios8BrowserCrashWorkaround:!1,multiple:!1,name:"qqfile",onChange:function(e){},title:null};qq.extend(a,e),r=qq.getUniqueId(),qq(a.element).css({position:"relative",overflow:"hidden",direction:"ltr"}),qq.extend(this,{getInput:function(){return n},getButtonId:function(){return r},setMultiple:function(e,t){var n=t||this.getInput();a.ios8BrowserCrashWorkaround&&qq.ios8()&&(qq.iosChrome()||qq.iosSafariWebView())?n.setAttribute("multiple",""):e?n.setAttribute("multiple",""):n.removeAttribute("multiple")},setAcceptFiles:function(e){e!==a.acceptFiles&&n.setAttribute("accept",e)},reset:function(){n.parentNode&&qq(n).remove(),qq(a.element).removeClass(a.focusClass),n=null,n=t()}}),n=t()},qq.UploadButton.BUTTON_ID_ATTR_NAME="qq-button-id",qq.UploadData=function(e){"use strict";function t(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(o[n])}),t}return o[e]}function n(e){if(qq.isArray(e)){var t=[];return qq.each(e,function(e,n){t.push(o[i[n]])}),t}return o[i[e]]}function r(e){var t=[],n=[].concat(e);return qq.each(n,function(e,n){var r=a[n];void 0!==r&&qq.each(r,function(e,n){t.push(o[n])})}),t}var o=[],i={},a={},s={},u={};qq.extend(this,{addFile:function(t){var n=t.status||qq.status.SUBMITTING,r=o.push({name:t.name,originalName:t.name,uuid:t.uuid,size:null==t.size?-1:t.size,status:n})-1;return t.batchId&&(o[r].batchId=t.batchId,void 0===u[t.batchId]&&(u[t.batchId]=[]),u[t.batchId].push(r)),t.proxyGroupId&&(o[r].proxyGroupId=t.proxyGroupId,void 0===s[t.proxyGroupId]&&(s[t.proxyGroupId]=[]),s[t.proxyGroupId].push(r)),o[r].id=r,i[t.uuid]=r,void 0===a[n]&&(a[n]=[]),a[n].push(r),t.onBeforeStatusChange&&t.onBeforeStatusChange(r),e.onStatusChange(r,null,n),r},retrieve:function(e){return qq.isObject(e)&&o.length?void 0!==e.id?t(e.id):void 0!==e.uuid?n(e.uuid):e.status?r(e.status):void 0:qq.extend([],o,!0)},reset:function(){o=[],i={},a={},u={}},setStatus:function(t,n){var r=o[t].status,i=qq.indexOf(a[r],t);a[r].splice(i,1),o[t].status=n,void 0===a[n]&&(a[n]=[]),a[n].push(t),e.onStatusChange(t,r,n)},uuidChanged:function(e,t){var n=o[e].uuid;o[e].uuid=t,i[t]=e,delete i[n]},updateName:function(e,t){o[e].name=t},updateSize:function(e,t){o[e].size=t},setParentId:function(e,t){o[e].parentId=t},getIdsInProxyGroup:function(e){var t=o[e].proxyGroupId;return t?s[t]:[]},getIdsInBatch:function(e){var t=o[e].batchId;return u[t]}})},qq.status={SUBMITTING:"submitting",SUBMITTED:"submitted",REJECTED:"rejected",QUEUED:"queued",CANCELED:"canceled",PAUSED:"paused",UPLOADING:"uploading",UPLOAD_RETRYING:"retrying upload",UPLOAD_SUCCESSFUL:"upload successful",UPLOAD_FAILED:"upload failed",DELETE_FAILED:"delete failed",DELETING:"deleting",DELETED:"deleted"},function(){"use strict";qq.basePublicApi={addBlobs:function(e,t,n){this.addFiles(e,t,n)},addInitialFiles:function(e){var t=this;qq.each(e,function(e,n){t._addCannedFile(n)})},addFiles:function(e,t,n){this._maybeHandleIos8SafariWorkaround();var r=0===this._storedIds.length?qq.getUniqueId():this._currentBatchId,o=qq.bind(function(e){this._handleNewFile({blob:e,name:this._options.blobs.defaultName},r,l)},this),i=qq.bind(function(e){this._handleNewFile(e,r,l)},this),a=qq.bind(function(e){var t=qq.canvasToBlob(e);this._handleNewFile({blob:t,name:this._options.blobs.defaultName+".png"},r,l)},this),s=qq.bind(function(e){var t=e.quality&&e.quality/100,n=qq.canvasToBlob(e.canvas,e.type,t);this._handleNewFile({blob:n,name:e.name},r,l)},this),u=qq.bind(function(e){if(qq.isInput(e)&&qq.supportedFeatures.ajaxUploading){var t=Array.prototype.slice.call(e.files),n=this;qq.each(t,function(e,t){n._handleNewFile(t,r,l)})}else this._handleNewFile(e,r,l)},this),c=this,l=[];this._currentBatchId=r,e&&(!function(){qq.isFileList(e)&&(e=Array.prototype.slice.call(e)),e=[].concat(e)}(),qq.each(e,function(e,t){qq.isFileOrInput(t)?u(t):qq.isBlob(t)?o(t):qq.isObject(t)?t.blob&&t.name?i(t):t.canvas&&t.name&&s(t):t.tagName&&"canvas"===t.tagName.toLowerCase()?a(t):c.log(t+" is not a valid file container!  Ignoring!","warn")}),this.log("Received "+l.length+" files."),this._prepareItemsForUpload(l,t,n))},cancel:function(e){this._handler.cancel(e)},cancelAll:function(){var e=[],t=this;qq.extend(e,this._storedIds),qq.each(e,function(e,n){t.cancel(n)}),this._handler.cancelAll()},clearStoredFiles:function(){this._storedIds=[]},continueUpload:function(e){var t=this._uploadData.retrieve({id:e});return!(!qq.supportedFeatures.pause||!this._options.chunking.enabled)&&(t.status===qq.status.PAUSED?(this.log(qq.format("Paused file ID {} ({}) will be continued.  Not paused.",e,this.getName(e))),this._uploadFile(e),!0):(this.log(qq.format("Ignoring continue for file ID {} ({}).  Not paused.",e,this.getName(e)),"error"),!1))},deleteFile:function(e){return this._onSubmitDelete(e)},doesExist:function(e){return this._handler.isValid(e)},drawThumbnail:function(e,t,n,r,o){var i,a,s=new qq.Promise;return this._imageGenerator?(i=this._thumbnailUrls[e],a={customResizeFunction:o,maxSize:n>0?n:null,scale:n>0},!r&&qq.supportedFeatures.imagePreviews&&(i=this.getFile(e)),null==i?s.failure({container:t,error:"File or URL not found."}):this._imageGenerator.generate(i,t,a).then(function(e){s.success(e)},function(e,t){s.failure({container:e,error:t||"Problem generating thumbnail"})})):s.failure({container:t,error:"Missing image generator module"}),s},getButton:function(e){return this._getButton(this._buttonIdsForFileIds[e])},getEndpoint:function(e){return this._endpointStore.get(e)},getFile:function(e){return this._handler.getFile(e)||null},getInProgress:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED]}).length},getName:function(e){return this._uploadData.retrieve({id:e}).name},getParentId:function(e){var t=this.getUploads({id:e}),n=null;return t&&void 0!==t.parentId&&(n=t.parentId),n},getResumableFilesData:function(){return this._handler.getResumableFilesData()},getSize:function(e){return this._uploadData.retrieve({id:e}).size},getNetUploads:function(){return this._netUploaded},getRemainingAllowedItems:function(){var e=this._currentItemLimit;return e>0?e-this._netUploadedOrQueued:null},getUploads:function(e){return this._uploadData.retrieve(e)},getUuid:function(e){return this._uploadData.retrieve({id:e}).uuid},log:function(e,t){!this._options.debug||t&&"info"!==t?t&&"info"!==t&&qq.log("[Fine Uploader "+qq.version+"] "+e,t):qq.log("[Fine Uploader "+qq.version+"] "+e)},pauseUpload:function(e){var t=this._uploadData.retrieve({id:e});if(!qq.supportedFeatures.pause||!this._options.chunking.enabled)return!1;if(qq.indexOf([qq.status.UPLOADING,qq.status.UPLOAD_RETRYING],t.status)>=0){if(this._handler.pause(e))return this._uploadData.setStatus(e,qq.status.PAUSED),!0;this.log(qq.format("Unable to pause file ID {} ({}).",e,this.getName(e)),"error")}else this.log(qq.format("Ignoring pause for file ID {} ({}).  Not in progress.",e,this.getName(e)),"error");return!1},removeFileRef:function(e){this._handler.expunge(e)},reset:function(){this.log("Resetting uploader..."),this._handler.reset(),this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],qq.each(this._buttons,function(e,t){t.reset()}),this._paramsStore.reset(),this._endpointStore.reset(),this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData.reset(),this._buttonIdsForFileIds=[],this._pasteHandler&&this._pasteHandler.reset(),this._options.session.refreshOnReset&&this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._totalProgress&&this._totalProgress.reset()},retry:function(e){return this._manualRetry(e)},scaleImage:function(e,t){var n=this;return qq.Scaler.prototype.scaleImage(e,t,{log:qq.bind(n.log,n),getFile:qq.bind(n.getFile,n),uploadData:n._uploadData})},setCustomHeaders:function(e,t){this._customHeadersStore.set(e,t)},setDeleteFileCustomHeaders:function(e,t){this._deleteFileCustomHeadersStore.set(e,t)},setDeleteFileEndpoint:function(e,t){this._deleteFileEndpointStore.set(e,t)},setDeleteFileParams:function(e,t){this._deleteFileParamsStore.set(e,t)},setEndpoint:function(e,t){this._endpointStore.set(e,t)},setForm:function(e){this._updateFormSupportAndParams(e)},setItemLimit:function(e){this._currentItemLimit=e},setName:function(e,t){this._uploadData.updateName(e,t)},setParams:function(e,t){this._paramsStore.set(e,t)},setUuid:function(e,t){return this._uploadData.uuidChanged(e,t)},setStatus:function(e,t){if(!this.getUploads({id:e}))throw new qq.Error(e+" is not a valid file ID.");switch(t){case qq.status.DELETED:this._onDeleteComplete(e,null,!1);break;case qq.status.DELETE_FAILED:this._onDeleteComplete(e,null,!0);break;default:var n="Method setStatus called on '"+name+"' not implemented yet for "+t;throw this.log(n),new qq.Error(n)}},uploadStoredFiles:function(){0===this._storedIds.length?this._itemError("noFilesError"):this._uploadStoredFiles()}},qq.basePrivateApi={_addCannedFile:function(e){var t=this;return this._uploadData.addFile({uuid:e.uuid,name:e.name,size:e.size,status:qq.status.UPLOAD_SUCCESSFUL,onBeforeStatusChange:function(n){e.deleteFileEndpoint&&t.setDeleteFileEndpoint(e.deleteFileEndpoint,n),e.deleteFileParams&&t.setDeleteFileParams(e.deleteFileParams,n),e.thumbnailUrl&&(t._thumbnailUrls[n]=e.thumbnailUrl),t._netUploaded++,t._netUploadedOrQueued++}})},_annotateWithButtonId:function(e,t){qq.isFile(e)&&(e.qqButtonId=this._getButtonId(t))},_batchError:function(e){this._options.callbacks.onError(null,null,e,void 0)},_createDeleteHandler:function(){var e=this;return new qq.DeleteFileAjaxRequester({method:this._options.deleteFile.method.toUpperCase(),maxConnections:this._options.maxConnections,uuidParamName:this._options.request.uuidName,customHeaders:this._deleteFileCustomHeadersStore,paramsStore:this._deleteFileParamsStore,endpointStore:this._deleteFileEndpointStore,cors:this._options.cors,log:qq.bind(e.log,e),onDelete:function(t){e._onDelete(t),e._options.callbacks.onDelete(t)},onDeleteComplete:function(t,n,r){e._onDeleteComplete(t,n,r),e._options.callbacks.onDeleteComplete(t,n,r)}})},_createPasteHandler:function(){var e=this;return new qq.PasteSupport({targetElement:this._options.paste.targetElement,callbacks:{log:qq.bind(e.log,e),pasteReceived:function(t){e._handleCheckedCallback({name:"onPasteReceived",callback:qq.bind(e._options.callbacks.onPasteReceived,e,t),onSuccess:qq.bind(e._handlePasteSuccess,e,t),identifier:"pasted image"})}}})},_createStore:function(e,t){var n={},r=e,o={},i=t,a=function(e){return qq.isObject(e)?qq.extend({},e):e},s=function(){return qq.isFunction(i)?i():i},u=function(e,t){i&&qq.isObject(t)&&qq.extend(t,s()),o[e]&&qq.extend(t,o[e])};return{set:function(e,t){null==t?(n={},r=a(e)):n[t]=a(e)},get:function(e){var t;return t=null!=e&&n[e]?n[e]:a(r),u(e,t),a(t)},addReadOnly:function(e,t){qq.isObject(n)&&(null===e?qq.isFunction(t)?i=t:(i=i||{},qq.extend(i,t)):(o[e]=o[e]||{},qq.extend(o[e],t)))},remove:function(e){return delete n[e]},reset:function(){n={},o={},r=e}}},_createUploadDataTracker:function(){var e=this;return new qq.UploadData({getName:function(t){return e.getName(t)},getUuid:function(t){return e.getUuid(t)},getSize:function(t){return e.getSize(t)},onStatusChange:function(t,n,r){e._onUploadStatusChange(t,n,r),e._options.callbacks.onStatusChange(t,n,r),e._maybeAllComplete(t,r),e._totalProgress&&setTimeout(function(){e._totalProgress.onStatusChange(t,n,r)},0)}})},_createUploadButton:function(e){var t,n=this,r=e.accept||this._options.validation.acceptFiles,o=e.allowedExtensions||this._options.validation.allowedExtensions;return t=new qq.UploadButton({acceptFiles:r,element:e.element,focusClass:this._options.classes.buttonFocus,folders:e.folders,hoverClass:this._options.classes.buttonHover,ios8BrowserCrashWorkaround:this._options.workarounds.ios8BrowserCrash,multiple:function(){return!!qq.supportedFeatures.ajaxUploading&&(!(n._options.workarounds.iosEmptyVideos&&qq.ios()&&!qq.ios6()&&n._isAllowedExtension(o,".mov"))&&(void 0===e.multiple?n._options.multiple:e.multiple))}(),name:this._options.request.inputName,onChange:function(e){n._onInputChange(e)},title:null==e.title?this._options.text.fileInputTitle:e.title}),this._disposeSupport.addDisposer(function(){t.dispose()}),n._buttons.push(t),t},_createUploadHandler:function(e,t){var n=this,r={},o={debug:this._options.debug,maxConnections:this._options.maxConnections,cors:this._options.cors,paramsStore:this._paramsStore,endpointStore:this._endpointStore,chunking:this._options.chunking,resume:this._options.resume,blobs:this._options.blobs,log:qq.bind(n.log,n),preventRetryParam:this._options.retry.preventRetryResponseProperty,onProgress:function(e,t,o,i){o<0||i<0||(r[e]?r[e].loaded===o&&r[e].total===i||(n._onProgress(e,t,o,i),n._options.callbacks.onProgress(e,t,o,i)):(n._onProgress(e,t,o,i),n._options.callbacks.onProgress(e,t,o,i)),r[e]={loaded:o,total:i})},onComplete:function(e,t,o,i){delete r[e];var a,s=n.getUploads({id:e}).status;s!==qq.status.UPLOAD_SUCCESSFUL&&s!==qq.status.UPLOAD_FAILED&&(a=n._onComplete(e,t,o,i),a instanceof qq.Promise?a.done(function(){n._options.callbacks.onComplete(e,t,o,i)}):n._options.callbacks.onComplete(e,t,o,i))},onCancel:function(e,t,r){var o=new qq.Promise;return n._handleCheckedCallback({name:"onCancel",callback:qq.bind(n._options.callbacks.onCancel,n,e,t),onFailure:o.failure,onSuccess:function(){r.then(function(){n._onCancel(e,t)}),o.success()},identifier:e}),o},onUploadPrep:qq.bind(this._onUploadPrep,this),onUpload:function(e,t){n._onUpload(e,t),n._options.callbacks.onUpload(e,t)},onUploadChunk:function(e,t,r){n._onUploadChunk(e,r),n._options.callbacks.onUploadChunk(e,t,r)},onUploadChunkSuccess:function(e,t,r,o){n._options.callbacks.onUploadChunkSuccess.apply(n,arguments)},onResume:function(e,t,r){return n._options.callbacks.onResume(e,t,r)},onAutoRetry:function(e,t,r,o){return n._onAutoRetry.apply(n,arguments)},onUuidChanged:function(e,t){n.log("Server requested UUID change from '"+n.getUuid(e)+"' to '"+t+"'"),n.setUuid(e,t)},getName:qq.bind(n.getName,n),getUuid:qq.bind(n.getUuid,n),getSize:qq.bind(n.getSize,n),setSize:qq.bind(n._setSize,n),getDataByUuid:function(e){return n.getUploads({uuid:e})},isQueued:function(e){var t=n.getUploads({id:e}).status;return t===qq.status.QUEUED||t===qq.status.SUBMITTED||t===qq.status.UPLOAD_RETRYING||t===qq.status.PAUSED},getIdsInProxyGroup:n._uploadData.getIdsInProxyGroup,getIdsInBatch:n._uploadData.getIdsInBatch};return qq.each(this._options.request,function(e,t){o[e]=t}),o.customHeaders=this._customHeadersStore,e&&qq.each(e,function(e,t){o[e]=t}),new qq.UploadHandlerController(o,t)},_fileOrBlobRejected:function(e){this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.REJECTED)},_formatSize:function(e){if(0===e)return e+this._options.text.sizeSymbols[0];var t=-1;do{e/=1e3,t++}while(e>999);return Math.max(e,.1).toFixed(1)+this._options.text.sizeSymbols[t]},_generateExtraButtonSpecs:function(){var e=this;this._extraButtonSpecs={},qq.each(this._options.extraButtons,function(t,n){var r=n.multiple,o=qq.extend({},e._options.validation,!0),i=qq.extend({},n);void 0===r&&(r=e._options.multiple),i.validation&&qq.extend(o,n.validation,!0),qq.extend(i,{multiple:r,validation:o},!0),e._initExtraButton(i)})},_getButton:function(e){var t=this._extraButtonSpecs[e];return t?t.element:e===this._defaultButtonId?this._options.button:void 0},_getButtonId:function(e){var t,n,r=e;if(r instanceof qq.BlobProxy&&(r=r.referenceBlob),r&&!qq.isBlob(r)){if(qq.isFile(r))return r.qqButtonId;if("input"===r.tagName.toLowerCase()&&"file"===r.type.toLowerCase())return r.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME);if(t=r.getElementsByTagName("input"),qq.each(t,function(e,t){if("file"===t.getAttribute("type"))return n=t,!1}),n)return n.getAttribute(qq.UploadButton.BUTTON_ID_ATTR_NAME)}},_getNotFinished:function(){return this._uploadData.retrieve({status:[qq.status.UPLOADING,qq.status.UPLOAD_RETRYING,qq.status.QUEUED,qq.status.SUBMITTING,qq.status.SUBMITTED,qq.status.PAUSED]}).length},_getValidationBase:function(e){var t=this._extraButtonSpecs[e];return t?t.validation:this._options.validation},_getValidationDescriptor:function(e){return e.file instanceof qq.BlobProxy?{name:qq.getFilename(e.file.referenceBlob),size:e.file.referenceBlob.size}:{name:this.getUploads({id:e.id}).name,size:this.getUploads({id:e.id}).size}},_getValidationDescriptors:function(e){var t=this,n=[];return qq.each(e,function(e,r){n.push(t._getValidationDescriptor(r))}),n},_handleCameraAccess:function(){if(this._options.camera.ios&&qq.ios()){var e=this._options.camera.button,t=e?this._getButtonId(e):this._defaultButtonId,n=this._options;t&&t!==this._defaultButtonId&&(n=this._extraButtonSpecs[t]),n.multiple=!1,null===n.validation.acceptFiles?n.validation.acceptFiles="image/*;capture=camera":n.validation.acceptFiles+=",image/*;capture=camera",qq.each(this._buttons,function(e,r){if(r.getButtonId()===t)return r.setMultiple(n.multiple),r.setAcceptFiles(n.acceptFiles),!1})}},_handleCheckedCallback:function(e){var t=this,n=e.callback();return qq.isGenericPromise(n)?(this.log(e.name+" - waiting for "+e.name+" promise to be fulfilled for "+e.identifier),n.then(function(n){t.log(e.name+" promise success for "+e.identifier),e.onSuccess(n)},function(){e.onFailure?(t.log(e.name+" promise failure for "+e.identifier),e.onFailure()):t.log(e.name+" promise failure for "+e.identifier)})):(!1!==n?e.onSuccess(n):e.onFailure?(this.log(e.name+" - return value was 'false' for "+e.identifier+".  Invoking failure callback."),e.onFailure()):this.log(e.name+" - return value was 'false' for "+e.identifier+".  Will not proceed."),n)},_handleNewFile:function(e,t,n){var r=this,o=qq.getUniqueId(),i=-1,a=qq.getFilename(e),s=e.blob||e,u=this._customNewFileHandler?this._customNewFileHandler:qq.bind(r._handleNewFileGeneric,r);!qq.isInput(s)&&s.size>=0&&(i=s.size),u(s,a,o,i,n,t,this._options.request.uuidName,{uploadData:r._uploadData,paramsStore:r._paramsStore,addFileToHandler:function(e,t){r._handler.add(e,t),r._netUploadedOrQueued++,r._trackButton(e)}})},_handleNewFileGeneric:function(e,t,n,r,o,i){var a=this._uploadData.addFile({uuid:n,name:t,size:r,batchId:i});this._handler.add(a,e),this._trackButton(a),this._netUploadedOrQueued++,o.push({id:a,file:e})},_handlePasteSuccess:function(e,t){var n=e.type.split("/")[1],r=t;null==r&&(r=this._options.paste.defaultName),r+="."+n,this.addFiles({name:r,blob:e})},_handleDeleteSuccess:function(e){if(this.getUploads({id:e}).status!==qq.status.DELETED){var t=this.getName(e);this._netUploadedOrQueued--,this._netUploaded--,this._handler.expunge(e),this._uploadData.setStatus(e,qq.status.DELETED),this.log("Delete request for '"+t+"' has succeeded.")}},_handleDeleteFailed:function(e,t){var n=this.getName(e);this._uploadData.setStatus(e,qq.status.DELETE_FAILED),this.log("Delete request for '"+n+"' has failed.","error"),t&&void 0!==t.withCredentials?this._options.callbacks.onError(e,n,"Delete request failed with response code "+t.status,t):this._options.callbacks.onError(e,n,"Delete request failed",t)},_initExtraButton:function(e){var t=this._createUploadButton({accept:e.validation.acceptFiles,allowedExtensions:e.validation.allowedExtensions,element:e.element,folders:e.folders,multiple:e.multiple,title:e.fileInputTitle});this._extraButtonSpecs[t.getButtonId()]=e},_initFormSupportAndParams:function(){this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm?(this._paramsStore=this._createStore(this._options.request.params,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&(this._options.request.endpoint=this._formSupport.newEndpoint)):this._paramsStore=this._createStore(this._options.request.params)},_isDeletePossible:function(){return!(!qq.DeleteFileAjaxRequester||!this._options.deleteFile.enabled)&&(!this._options.cors.expected||(!!qq.supportedFeatures.deleteFileCorsXhr||!(!qq.supportedFeatures.deleteFileCorsXdr||!this._options.cors.allowXdr)))},_isAllowedExtension:function(e,t){var n=!1;return!e.length||(qq.each(e,function(e,r){if(qq.isString(r)){var o=new RegExp("\\."+r+"$","i");if(null!=t.match(o))return n=!0,!1}}),n)},_itemError:function(e,t,n){function r(e,t){a=a.replace(e,t)}var o,i,a=this._options.messages[e],s=[],u=[].concat(t),c=u[0],l=this._getButtonId(n),f=this._getValidationBase(l);return qq.each(f.allowedExtensions,function(e,t){qq.isString(t)&&s.push(t)}),o=s.join(", ").toLowerCase(),r("{file}",this._options.formatFileName(c)),r("{extensions}",o),r("{sizeLimit}",this._formatSize(f.sizeLimit)),r("{minSizeLimit}",this._formatSize(f.minSizeLimit)),i=a.match(/(\{\w+\})/g),null!==i&&qq.each(i,function(e,t){r(t,u[e])}),this._options.callbacks.onError(null,c,a,void 0),a},_manualRetry:function(e,t){if(this._onBeforeManualRetry(e))return this._netUploadedOrQueued++,this._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),t?t(e):this._handler.retry(e),!0},_maybeAllComplete:function(e,t){var n=this,r=this._getNotFinished();t===qq.status.UPLOAD_SUCCESSFUL?this._succeededSinceLastAllComplete.push(e):t===qq.status.UPLOAD_FAILED&&this._failedSinceLastAllComplete.push(e),0===r&&(this._succeededSinceLastAllComplete.length||this._failedSinceLastAllComplete.length)&&setTimeout(function(){n._onAllComplete(n._succeededSinceLastAllComplete,n._failedSinceLastAllComplete)},0)},_maybeHandleIos8SafariWorkaround:function(){var e=this;if(this._options.workarounds.ios8SafariUploads&&qq.ios800()&&qq.iosSafari())throw setTimeout(function(){window.alert(e._options.messages.unsupportedBrowserIos8Safari)},0),new qq.Error(this._options.messages.unsupportedBrowserIos8Safari)},_maybeParseAndSendUploadError:function(e,t,n,r){if(!n.success)if(r&&200!==r.status&&!n.error)this._options.callbacks.onError(e,t,"XHR returned response code "+r.status,r);else{var o=n.error?n.error:this._options.text.defaultResponseError;this._options.callbacks.onError(e,t,o,r)}},_maybeProcessNextItemAfterOnValidateCallback:function(e,t,n,r,o){var i=this;if(t.length>n)if(e||!this._options.validation.stopOnFirstInvalidFile)setTimeout(function(){var e=i._getValidationDescriptor(t[n]),a=i._getButtonId(t[n].file),s=i._getButton(a);i._handleCheckedCallback({name:"onValidate",callback:qq.bind(i._options.callbacks.onValidate,i,e,s),onSuccess:qq.bind(i._onValidateCallbackSuccess,i,t,n,r,o),onFailure:qq.bind(i._onValidateCallbackFailure,i,t,n,r,o),identifier:"Item '"+e.name+"', size: "+e.size})},0);else if(!e)for(;n<t.length;n++)i._fileOrBlobRejected(t[n].id)},_onAllComplete:function(e,t){this._totalProgress&&this._totalProgress.onAllComplete(e,t,this._preventRetries),this._options.callbacks.onAllComplete(qq.extend([],e),qq.extend([],t)),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[]},_onAutoRetry:function(e,t,n,r,o){var i=this;if(i._preventRetries[e]=n[i._options.retry.preventRetryResponseProperty],i._shouldAutoRetry(e,t,n)){var a=1e3*i._options.retry.autoAttemptDelay;return i._maybeParseAndSendUploadError.apply(i,arguments),i._options.callbacks.onAutoRetry(e,t,i._autoRetries[e]),i._onBeforeAutoRetry(e,t),i._uploadData.setStatus(e,qq.status.UPLOAD_RETRYING),i._retryTimeouts[e]=setTimeout(function(){i.log("Starting retry for "+t+"..."),o?o(e):i._handler.retry(e)},a),!0}},_onBeforeAutoRetry:function(e,t){this.log("Waiting "+this._options.retry.autoAttemptDelay+" seconds before retrying "+t+"...")},_onBeforeManualRetry:function(e){var t,n=this._currentItemLimit;return this._preventRetries[e]?(this.log("Retries are forbidden for id "+e,"warn"),!1):this._handler.isValid(e)?(t=this.getName(e),!1!==this._options.callbacks.onManualRetry(e,t)&&(n>0&&this._netUploadedOrQueued+1>n?(this._itemError("retryFailTooManyItems"),!1):(this.log("Retrying upload for '"+t+"' (id: "+e+")..."),!0))):(this.log("'"+e+"' is not a valid file ID","error"),!1)},_onCancel:function(e,t){this._netUploadedOrQueued--,clearTimeout(this._retryTimeouts[e]);var n=qq.indexOf(this._storedIds,e);!this._options.autoUpload&&n>=0&&this._storedIds.splice(n,1),this._uploadData.setStatus(e,qq.status.CANCELED)},_onComplete:function(e,t,n,r){return n.success?(n.thumbnailUrl&&(this._thumbnailUrls[e]=n.thumbnailUrl),this._netUploaded++,this._uploadData.setStatus(e,qq.status.UPLOAD_SUCCESSFUL)):(this._netUploadedOrQueued--,this._uploadData.setStatus(e,qq.status.UPLOAD_FAILED),!0===n[this._options.retry.preventRetryResponseProperty]&&(this._preventRetries[e]=!0)),this._maybeParseAndSendUploadError(e,t,n,r),!!n.success},_onDelete:function(e){this._uploadData.setStatus(e,qq.status.DELETING)},_onDeleteComplete:function(e,t,n){this.getName(e);n?this._handleDeleteFailed(e,t):this._handleDeleteSuccess(e)},_onInputChange:function(e){var t;if(qq.supportedFeatures.ajaxUploading){for(t=0;t<e.files.length;t++)this._annotateWithButtonId(e.files[t],e);this.addFiles(e.files)}else e.value.length>0&&this.addFiles(e);qq.each(this._buttons,function(e,t){t.reset()})},_onProgress:function(e,t,n,r){this._totalProgress&&this._totalProgress.onIndividualProgress(e,n,r)},_onSubmit:function(e,t){},_onSubmitCallbackSuccess:function(e,t){this._onSubmit.apply(this,arguments),this._uploadData.setStatus(e,qq.status.SUBMITTED),this._onSubmitted.apply(this,arguments),this._options.autoUpload?(this._options.callbacks.onSubmitted.apply(this,arguments),this._uploadFile(e)):(this._storeForLater(e),this._options.callbacks.onSubmitted.apply(this,arguments))},_onSubmitDelete:function(e,t,n){var r,o=this.getUuid(e);return t&&(r=qq.bind(t,this,e,o,n)),this._isDeletePossible()?(this._handleCheckedCallback({name:"onSubmitDelete",callback:qq.bind(this._options.callbacks.onSubmitDelete,this,e),onSuccess:r||qq.bind(this._deleteHandler.sendDelete,this,e,o,n),identifier:e}),!0):(this.log("Delete request ignored for ID "+e+", delete feature is disabled or request not possible due to CORS on a user agent that does not support pre-flighting.","warn"),!1)},_onSubmitted:function(e){},_onTotalProgress:function(e,t){this._options.callbacks.onTotalProgress(e,t)},_onUploadPrep:function(e){},_onUpload:function(e,t){this._uploadData.setStatus(e,qq.status.UPLOADING)},_onUploadChunk:function(e,t){},_onUploadStatusChange:function(e,t,n){n===qq.status.PAUSED&&clearTimeout(this._retryTimeouts[e])},_onValidateBatchCallbackFailure:function(e){var t=this;qq.each(e,function(e,n){t._fileOrBlobRejected(n.id)})},_onValidateBatchCallbackSuccess:function(e,t,n,r,o){var i,a=this._currentItemLimit,s=this._netUploadedOrQueued;0===a||s<=a?t.length>0?this._handleCheckedCallback({name:"onValidate",callback:qq.bind(this._options.callbacks.onValidate,this,e[0],o),onSuccess:qq.bind(this._onValidateCallbackSuccess,this,t,0,n,r),onFailure:qq.bind(this._onValidateCallbackFailure,this,t,0,n,r),identifier:"Item '"+t[0].file.name+"', size: "+t[0].file.size}):this._itemError("noFilesError"):(this._onValidateBatchCallbackFailure(t),i=this._options.messages.tooManyItemsError.replace(/\{netItems\}/g,s).replace(/\{itemLimit\}/g,a),this._batchError(i))},_onValidateCallbackFailure:function(e,t,n,r){var o=t+1;this._fileOrBlobRejected(e[t].id,e[t].file.name),this._maybeProcessNextItemAfterOnValidateCallback(!1,e,o,n,r)},_onValidateCallbackSuccess:function(e,t,n,r){var o=this,i=t+1,a=this._getValidationDescriptor(e[t]);this._validateFileOrBlobData(e[t],a).then(function(){o._upload(e[t].id,n,r),o._maybeProcessNextItemAfterOnValidateCallback(!0,e,i,n,r)},function(){o._maybeProcessNextItemAfterOnValidateCallback(!1,e,i,n,r)})},_prepareItemsForUpload:function(e,t,n){if(0===e.length)return void this._itemError("noFilesError");var r=this._getValidationDescriptors(e),o=this._getButtonId(e[0].file),i=this._getButton(o);this._handleCheckedCallback({name:"onValidateBatch",callback:qq.bind(this._options.callbacks.onValidateBatch,this,r,i),onSuccess:qq.bind(this._onValidateBatchCallbackSuccess,this,r,e,t,n,i),onFailure:qq.bind(this._onValidateBatchCallbackFailure,this,e),identifier:"batch validation"})},_preventLeaveInProgress:function(){var e=this;this._disposeSupport.attach(window,"beforeunload",function(t){if(e.getInProgress())return t=t||window.event,t.returnValue=e._options.messages.onLeave,e._options.messages.onLeave})},_refreshSessionData:function(){var e=this,t=this._options.session;qq.Session&&null!=this._options.session.endpoint&&(this._session||(qq.extend(t,{cors:this._options.cors}),t.log=qq.bind(this.log,this),t.addFileRecord=qq.bind(this._addCannedFile,this),this._session=new qq.Session(t)),setTimeout(function(){e._session.refresh().then(function(t,n){e._sessionRequestComplete(),e._options.callbacks.onSessionRequestComplete(t,!0,n)},function(t,n){e._options.callbacks.onSessionRequestComplete(t,!1,n)})},0))},_sessionRequestComplete:function(){},_setSize:function(e,t){this._uploadData.updateSize(e,t),this._totalProgress&&this._totalProgress.onNewSize(e)},_shouldAutoRetry:function(e,t,n){var r=this._uploadData.retrieve({id:e});return!!(!this._preventRetries[e]&&this._options.retry.enableAuto&&r.status!==qq.status.PAUSED&&(void 0===this._autoRetries[e]&&(this._autoRetries[e]=0),this._autoRetries[e]<this._options.retry.maxAutoAttempts))&&(this._autoRetries[e]+=1,!0)},_storeForLater:function(e){this._storedIds.push(e)},_trackButton:function(e){var t;(t=qq.supportedFeatures.ajaxUploading?this._handler.getFile(e).qqButtonId:this._getButtonId(this._handler.getInput(e)))&&(this._buttonIdsForFileIds[e]=t)},_updateFormSupportAndParams:function(e){this._options.form.element=e,this._formSupport=qq.FormSupport&&new qq.FormSupport(this._options.form,qq.bind(this.uploadStoredFiles,this),qq.bind(this.log,this)),this._formSupport&&this._formSupport.attachedToForm&&(this._paramsStore.addReadOnly(null,this._formSupport.getFormInputsAsObject),this._options.autoUpload=this._formSupport.newAutoUpload,this._formSupport.newEndpoint&&this.setEndpoint(this._formSupport.newEndpoint))},_upload:function(e,t,n){var r=this.getName(e);t&&this.setParams(t,e),n&&this.setEndpoint(n,e),this._handleCheckedCallback({name:"onSubmit",callback:qq.bind(this._options.callbacks.onSubmit,this,e,r),onSuccess:qq.bind(this._onSubmitCallbackSuccess,this,e,r),onFailure:qq.bind(this._fileOrBlobRejected,this,e,r),identifier:e})},_uploadFile:function(e){this._handler.upload(e)||this._uploadData.setStatus(e,qq.status.QUEUED)},_uploadStoredFiles:function(){for(var e,t,n=this;this._storedIds.length;)e=this._storedIds.shift(),this._uploadFile(e);(t=this.getUploads({status:qq.status.SUBMITTING}).length)&&(qq.log("Still waiting for "+t+" files to clear submit queue. Will re-parse stored IDs array shortly."),setTimeout(function(){n._uploadStoredFiles()},1e3))},_validateFileOrBlobData:function(e,t){var n=this,r=function(){return e.file instanceof qq.BlobProxy?e.file.referenceBlob:e.file}(),o=t.name,i=t.size,a=this._getButtonId(e.file),s=this._getValidationBase(a),u=new qq.Promise;return u.then(function(){},function(){n._fileOrBlobRejected(e.id,o)}),qq.isFileOrInput(r)&&!this._isAllowedExtension(s.allowedExtensions,o)?(this._itemError("typeError",o,r),u.failure()):this._options.validation.allowEmpty||0!==i?i>0&&s.sizeLimit&&i>s.sizeLimit?(this._itemError("sizeError",o,r),u.failure()):i>0&&i<s.minSizeLimit?(this._itemError("minSizeError",o,r),u.failure()):(qq.ImageValidation&&qq.supportedFeatures.imagePreviews&&qq.isFile(r)?new qq.ImageValidation(r,qq.bind(n.log,n)).validate(s.image).then(u.success,function(e){n._itemError(e+"ImageError",o,r),u.failure()}):u.success(),u):(this._itemError("emptyError",o,r),u.failure())},_wrapCallbacks:function(){var e,t,n;e=this,t=function(t,n,r){var o;try{return n.apply(e,r)}catch(n){o=n.message||n.toString(),e.log("Caught exception in '"+t+"' callback - "+o,"error")}};for(n in this._options.callbacks)!function(){var r,o;r=n,o=e._options.callbacks[r],e._options.callbacks[r]=function(){return t(r,o,arguments)}}()}}}(),function(){"use strict";qq.FineUploaderBasic=function(e){var t=this;this._options={debug:!1,button:null,multiple:!0,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,request:{customHeaders:{},endpoint:"/server/upload",filenameParam:"qqfilename",forceMultipart:!0,inputName:"qqfile",method:"POST",params:{},paramsInBody:!0,totalFileSizeName:"qqtotalfilesize",uuidName:"qquuid"},validation:{allowedExtensions:[],sizeLimit:0,minSizeLimit:0,itemLimit:0,stopOnFirstInvalidFile:!0,acceptFiles:null,image:{maxHeight:0,maxWidth:0,minHeight:0,minWidth:0},allowEmpty:!1},callbacks:{onSubmit:function(e,t){},onSubmitted:function(e,t){},onComplete:function(e,t,n,r){},onAllComplete:function(e,t){},onCancel:function(e,t){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,r){},onResume:function(e,t,n){},onProgress:function(e,t,n,r){},onTotalProgress:function(e,t){},onError:function(e,t,n,r){},onAutoRetry:function(e,t,n){},onManualRetry:function(e,t){},onValidateBatch:function(e){},onValidate:function(e){},onSubmitDelete:function(e){},onDelete:function(e){},onDeleteComplete:function(e,t,n){},onPasteReceived:function(e){},onStatusChange:function(e,t,n){},onSessionRequestComplete:function(e,t,n){}},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",tooManyItemsError:"Too many items ({netItems}) would be uploaded.  Item limit is {itemLimit}.",maxHeightImageError:"Image is too tall.",maxWidthImageError:"Image is too wide.",minHeightImageError:"Image is not tall enough.",minWidthImageError:"Image is not wide enough.",retryFailTooManyItems:"Retry failed - you have reached your file limit.",onLeave:"The files are being uploaded, if you leave now the upload will be canceled.",unsupportedBrowserIos8Safari:"Unrecoverable error - this browser does not permit file uploading of any kind due to serious bugs in iOS8 Safari.  Please use iOS8 Chrome until Apple fixes these issues."},retry:{enableAuto:!1,maxAutoAttempts:3,autoAttemptDelay:5,preventRetryResponseProperty:"preventRetry"},classes:{buttonHover:"qq-upload-button-hover",buttonFocus:"qq-upload-button-focus"},chunking:{enabled:!1,concurrent:{enabled:!1},mandatory:!1,paramNames:{partIndex:"qqpartindex",partByteOffset:"qqpartbyteoffset",chunkSize:"qqchunksize",totalFileSize:"qqtotalfilesize",totalParts:"qqtotalparts"},partSize:2e6,success:{endpoint:null}},resume:{enabled:!1,recordsExpireIn:7,paramNames:{resuming:"qqresume"}},formatFileName:function(e){return e},text:{defaultResponseError:"Upload failure reason unknown",fileInputTitle:"file input",sizeSymbols:["kB","MB","GB","TB","PB","EB"]},deleteFile:{enabled:!1,method:"DELETE",endpoint:"/server/upload",customHeaders:{},params:{}},cors:{expected:!1,sendCredentials:!1,allowXdr:!1},blobs:{defaultName:"misc_data"},paste:{targetElement:null,defaultName:"pasted_image"},camera:{ios:!1,button:null},extraButtons:[],session:{endpoint:null,params:{},customHeaders:{},refreshOnReset:!0},form:{element:"qq-form",autoUpload:!1,interceptSubmit:!0},scaling:{customResizer:null,sendOriginal:!0,orient:!0,defaultType:null,defaultQuality:80,failureText:"Failed to scale",includeExif:!1,sizes:[]},workarounds:{iosEmptyVideos:!0,ios8SafariUploads:!0,ios8BrowserCrash:!1}},qq.extend(this._options,e,!0),this._buttons=[],this._extraButtonSpecs={},this._buttonIdsForFileIds=[],this._wrapCallbacks(),this._disposeSupport=new qq.DisposeSupport,this._storedIds=[],this._autoRetries=[],this._retryTimeouts=[],this._preventRetries=[],this._thumbnailUrls=[],this._netUploadedOrQueued=0,this._netUploaded=0,this._uploadData=this._createUploadDataTracker(),this._initFormSupportAndParams(),this._customHeadersStore=this._createStore(this._options.request.customHeaders),this._deleteFileCustomHeadersStore=this._createStore(this._options.deleteFile.customHeaders),this._deleteFileParamsStore=this._createStore(this._options.deleteFile.params),this._endpointStore=this._createStore(this._options.request.endpoint),this._deleteFileEndpointStore=this._createStore(this._options.deleteFile.endpoint),this._handler=this._createUploadHandler(),this._deleteHandler=qq.DeleteFileAjaxRequester&&this._createDeleteHandler(),this._options.button&&(this._defaultButtonId=this._createUploadButton({element:this._options.button,title:this._options.text.fileInputTitle}).getButtonId()),this._generateExtraButtonSpecs(),this._handleCameraAccess(),this._options.paste.targetElement&&(qq.PasteSupport?this._pasteHandler=this._createPasteHandler():this.log("Paste support module not found","error")),this._preventLeaveInProgress(),this._imageGenerator=qq.ImageGenerator&&new qq.ImageGenerator(qq.bind(this.log,this)),this._refreshSessionData(),this._succeededSinceLastAllComplete=[],this._failedSinceLastAllComplete=[],this._scaler=qq.Scaler&&new qq.Scaler(this._options.scaling,qq.bind(this.log,this))||{},this._scaler.enabled&&(this._customNewFileHandler=qq.bind(this._scaler.handleNewFile,this._scaler)),qq.TotalProgress&&qq.supportedFeatures.progressBar&&(this._totalProgress=new qq.TotalProgress(qq.bind(this._onTotalProgress,this),function(e){var n=t._uploadData.retrieve({id:e});return n&&n.size||0})),this._currentItemLimit=this._options.validation.itemLimit},qq.FineUploaderBasic.prototype=qq.basePublicApi,qq.extend(qq.FineUploaderBasic.prototype,qq.basePrivateApi)}(),qq.AjaxRequester=function(e){"use strict";function t(){return qq.indexOf(["GET","POST","HEAD"],x.method)>=0}function n(e){var t=!1;return qq.each(t,function(e,n){if(qq.indexOf(["Accept","Accept-Language","Content-Language","Content-Type"],n)<0)return t=!0,!1}),t}function r(e){return x.cors.expected&&void 0===e.withCredentials}function o(){var e;return(window.XMLHttpRequest||window.ActiveXObject)&&(e=qq.createXhrInstance(),void 0===e.withCredentials&&(e=new XDomainRequest,e.onload=function(){},e.onerror=function(){},e.ontimeout=function(){},e.onprogress=function(){})),e}function i(e,t){var n=y[e].xhr;return n||(n=t||(x.cors.expected?o():qq.createXhrInstance()),y[e].xhr=n),n}function a(e){var t,n=qq.indexOf(_,e),r=x.maxConnections;delete y[e],_.splice(n,1),_.length>=r&&n<r&&(t=_[r-1],c(t))}function s(e,t){var n=i(e),o=x.method,s=!0===t;a(e),s?q(o+" request for "+e+" has failed","error"):r(n)||g(n.status)||(s=!0,q(o+" request for "+e+" has failed - response code "+n.status,"error")),x.onComplete(e,n,s)}function u(e){var t,n=y[e].additionalParams,r=x.mandatedParams;return x.paramsStore.get&&(t=x.paramsStore.get(e)),n&&qq.each(n,function(e,n){t=t||{},t[e]=n}),r&&qq.each(r,function(e,n){t=t||{},t[e]=n}),t}function c(e,t){var n,o=i(e,t),a=x.method,s=u(e),c=y[e].payload;return x.onSend(e),n=l(e,s,y[e].additionalQueryParams),r(o)?(o.onload=p(e),o.onerror=h(e)):o.onreadystatechange=f(e),d(e),o.open(a,n,!0),x.cors.expected&&x.cors.sendCredentials&&!r(o)&&(o.withCredentials=!0),m(e),q("Sending "+a+" request for "+e),c?o.send(c):b||!s?o.send():s&&x.contentType&&x.contentType.toLowerCase().indexOf("application/x-www-form-urlencoded")>=0?o.send(qq.obj2url(s,"")):s&&x.contentType&&x.contentType.toLowerCase().indexOf("application/json")>=0?o.send(JSON.stringify(s)):o.send(s),o}function l(e,t,n){var r=x.endpointStore.get(e),o=y[e].addToPath;return void 0!=o&&(r+="/"+o),b&&t&&(r=qq.obj2url(t,r)),n&&(r=qq.obj2url(n,r)),r}function f(e){return function(){4===i(e).readyState&&s(e)}}function d(e){var t=x.onProgress;t&&(i(e).upload.onprogress=function(n){n.lengthComputable&&t(e,n.loaded,n.total)})}function p(e){return function(){s(e)}}function h(e){return function(){s(e,!0)}}function m(e){var o=i(e),a=x.customHeaders,s=y[e].additionalHeaders||{},u=x.method,c={};r(o)||(x.acceptHeader&&o.setRequestHeader("Accept",x.acceptHeader),x.allowXRequestedWithAndCacheControl&&(x.cors.expected&&t()&&!n(a)||(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Cache-Control","no-cache"))),!x.contentType||"POST"!==u&&"PUT"!==u||o.setRequestHeader("Content-Type",x.contentType),qq.extend(c,qq.isFunction(a)?a(e):a),qq.extend(c,s),qq.each(c,function(e,t){o.setRequestHeader(e,t)}))}function g(e){return qq.indexOf(x.successfulResponseCodes[x.method],e)>=0}function v(e,t,n,r,o,i,a){if(y[e]={addToPath:n,additionalParams:r,additionalQueryParams:o,additionalHeaders:i,payload:a},_.push(e)<=x.maxConnections)return c(e,t)}var q,b,_=[],y={},x={acceptHeader:null,validMethods:["PATCH","POST","PUT"],method:"POST",contentType:"application/x-www-form-urlencoded",maxConnections:3,customHeaders:{},endpointStore:{},paramsStore:{},mandatedParams:{},allowXRequestedWithAndCacheControl:!0,successfulResponseCodes:{DELETE:[200,202,204],PATCH:[200,201,202,203,204],POST:[200,201,202,203,204],PUT:[200,201,202,203,204],GET:[200]},cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onSend:function(e){},onComplete:function(e,t,n){},onProgress:null};if(qq.extend(x,e),q=x.log,qq.indexOf(x.validMethods,x.method)<0)throw new Error("'"+x.method+"' is not a supported method for this type of request!");b="GET"===x.method||"DELETE"===x.method,qq.extend(this,{initTransport:function(e){var t,n,r,o,i,a;return{withPath:function(e){return t=e,this},withParams:function(e){return n=e,this},withQueryParams:function(e){return a=e,this},withHeaders:function(e){return r=e,this},withPayload:function(e){return o=e,this},withCacheBuster:function(){return i=!0,this},send:function(s){return i&&qq.indexOf(["GET","DELETE"],x.method)>=0&&(n.qqtimestamp=(new Date).getTime()),v(e,s,t,n,a,r,o)}}},canceled:function(e){a(e)}})},qq.UploadHandler=function(e){"use strict";var t=e.proxy,n={},r=t.onCancel,o=t.getName;qq.extend(this,{add:function(e,t){n[e]=t,n[e].temp={}},cancel:function(e){var t=this,i=new qq.Promise;r(e,o(e),i).then(function(){t.isValid(e)&&(n[e].canceled=!0,t.expunge(e)),i.success()})},expunge:function(e){delete n[e]},getThirdPartyFileId:function(e){return n[e].key},isValid:function(e){return void 0!==n[e]},reset:function(){n={}},_getFileState:function(e){return n[e]},_setThirdPartyFileId:function(e,t){n[e].key=t},_wasCanceled:function(e){return!!n[e].canceled}})},qq.UploadHandlerController=function(e,t){"use strict";var n,r,o,i=this,a=!1,s=!1,u={paramsStore:{},maxConnections:3,chunking:{enabled:!1,multiple:{enabled:!1}},log:function(e,t){},onProgress:function(e,t,n,r){},onComplete:function(e,t,n,r){},onCancel:function(e,t){},onUploadPrep:function(e){},onUpload:function(e,t){},onUploadChunk:function(e,t,n){},onUploadChunkSuccess:function(e,t,n,r){},onAutoRetry:function(e,t,n,r){},onResume:function(e,t,n){},onUuidChanged:function(e,t){},getName:function(e){},setSize:function(e,t){},isQueued:function(e){},getIdsInProxyGroup:function(e){},getIdsInBatch:function(e){}},c={done:function(e,t,n,r){var i=o._getChunkData(e,t);o._getFileState(e).attemptingResume=!1,delete o._getFileState(e).temp.chunkProgress[t],o._getFileState(e).loaded+=i.size,u.onUploadChunkSuccess(e,o._getChunkDataForCallback(i),n,r)},finalize:function(e){var t=u.getSize(e),n=u.getName(e);r("All chunks have been uploaded for "+e+" - finalizing...."),o.finalizeChunks(e).then(function(i,a){r("Finalize successful for "+e);var s=d.normalizeResponse(i,!0);u.onProgress(e,n,t,t),o._maybeDeletePersistedChunkData(e),d.cleanup(e,s,a)},function(t,o){var i=d.normalizeResponse(t,!1);r("Problem finalizing chunks for file ID "+e+" - "+i.error,"error"),i.reset&&c.reset(e),u.onAutoRetry(e,n,i,o)||d.cleanup(e,i,o)})},handleFailure:function(e,t,n,i){var a=u.getName(t);r("Chunked upload request failed for "+t+", chunk "+e),o.clearCachedChunk(t,e);var f,p=d.normalizeResponse(n,!1);p.reset?c.reset(t):(f=qq.indexOf(o._getFileState(t).chunking.inProgress,e))>=0&&(o._getFileState(t).chunking.inProgress.splice(f,1),o._getFileState(t).chunking.remaining.unshift(e)),o._getFileState(t).temp.ignoreFailure||(s&&(o._getFileState(t).temp.ignoreFailure=!0,r(qq.format("Going to attempt to abort these chunks: {}. These are currently in-progress: {}.",JSON.stringify(Object.keys(o._getXhrs(t))),JSON.stringify(o._getFileState(t).chunking.inProgress))),qq.each(o._getXhrs(t),function(e,n){r(qq.format("Attempting to abort file {}.{}. XHR readyState {}. ",t,e,n.readyState)),n.abort(),n._cancelled=!0}),o.moveInProgressToRemaining(t),l.free(t,!0)),u.onAutoRetry(t,a,p,i)||d.cleanup(t,p,i))},hasMoreParts:function(e){return!!o._getFileState(e).chunking.remaining.length},nextPart:function(e){var t=o._getFileState(e).chunking.remaining.shift();return t>=o._getTotalChunks(e)&&(t=null),t},reset:function(e){r("Server or callback has ordered chunking effort to be restarted on next attempt for item ID "+e,"error"),o._maybeDeletePersistedChunkData(e),o.reevaluateChunking(e),o._getFileState(e).loaded=0},sendNext:function(e){var t=u.getSize(e),n=u.getName(e),i=c.nextPart(e),a=o._getChunkData(e,i),f=o._getFileState(e).attemptingResume,p=o._getFileState(e).chunking.inProgress||[];null==o._getFileState(e).loaded&&(o._getFileState(e).loaded=0),f&&!1===u.onResume(e,n,a)&&(c.reset(e),i=c.nextPart(e),a=o._getChunkData(e,i),f=!1),null==i&&0===p.length?c.finalize(e):(r(qq.format("Sending chunked upload request for item {}.{}, bytes {}-{} of {}.",e,i,a.start+1,a.end,t)),u.onUploadChunk(e,n,o._getChunkDataForCallback(a)),p.push(i),o._getFileState(e).chunking.inProgress=p,s&&l.open(e,i),s&&l.available()&&o._getFileState(e).chunking.remaining.length&&c.sendNext(e),0===a.blob.size?(r(qq.format("Chunk {} for file {} will not be uploaded, zero sized chunk.",i,e),"error"),c.handleFailure(i,e,"File is no longer available",null)):o.uploadChunk(e,i,f).then(function(t,n){r("Chunked upload request succeeded for "+e+", chunk "+i),o.clearCachedChunk(e,i);var a=o._getFileState(e).chunking.inProgress||[],s=d.normalizeResponse(t,!0),u=qq.indexOf(a,i);r(qq.format("Chunk {} for file {} uploaded successfully.",i,e)),c.done(e,i,s,n),u>=0&&a.splice(u,1),o._maybePersistChunkedState(e),c.hasMoreParts(e)||0!==a.length?c.hasMoreParts(e)?c.sendNext(e):r(qq.format("File ID {} has no more chunks to send and these chunk indexes are still marked as in-progress: {}",e,JSON.stringify(a))):c.finalize(e)},function(t,n){c.handleFailure(i,e,t,n)}).done(function(){o.clearXhr(e,i)}))}},l={_open:[],_openChunks:{},_waiting:[],available:function(){var e=u.maxConnections,t=0,n=0;return qq.each(l._openChunks,function(e,r){t++,n+=r.length}),e-(l._open.length-t+n)},free:function(e,t){var n,i=!t,a=qq.indexOf(l._waiting,e),s=qq.indexOf(l._open,e);delete l._openChunks[e],d.getProxyOrBlob(e)instanceof qq.BlobProxy&&(r("Generated blob upload has ended for "+e+", disposing generated blob."),delete o._getFileState(e).file),a>=0?l._waiting.splice(a,1):i&&s>=0&&(l._open.splice(s,1),(n=l._waiting.shift())>=0&&(l._open.push(n),d.start(n)))},getWaitingOrConnected:function(){var e=[];return qq.each(l._openChunks,function(t,n){n&&n.length&&e.push(parseInt(t))}),qq.each(l._open,function(t,n){l._openChunks[n]||e.push(parseInt(n))}),e=e.concat(l._waiting)},isUsingConnection:function(e){return qq.indexOf(l._open,e)>=0},open:function(e,t){return null==t&&l._waiting.push(e),!!l.available()&&(null==t?(l._waiting.pop(),l._open.push(e)):function(){var n=l._openChunks[e]||[];n.push(t),l._openChunks[e]=n}(),!0)},reset:function(){l._waiting=[],l._open=[]}},f={send:function(e,t){o._getFileState(e).loaded=0,r("Sending simple upload request for "+e),o.uploadFile(e).then(function(n,o){r("Simple upload request succeeded for "+e);var i=d.normalizeResponse(n,!0),a=u.getSize(e);u.onProgress(e,t,a,a),d.maybeNewUuid(e,i),d.cleanup(e,i,o)},function(n,o){r("Simple upload request failed for "+e);var i=d.normalizeResponse(n,!1);u.onAutoRetry(e,t,i,o)||d.cleanup(e,i,o)})}},d={cancel:function(e){r("Cancelling "+e),u.paramsStore.remove(e),l.free(e)},cleanup:function(e,t,n){var r=u.getName(e);u.onComplete(e,r,t,n),o._getFileState(e)&&o._clearXhrs&&o._clearXhrs(e),l.free(e)},getProxyOrBlob:function(e){return o.getProxy&&o.getProxy(e)||o.getFile&&o.getFile(e)},initHandler:function(){var e=t?qq[t]:qq.traditional,n=qq.supportedFeatures.ajaxUploading?"Xhr":"Form";o=new e[n+"UploadHandler"](u,{getDataByUuid:u.getDataByUuid,getName:u.getName,getSize:u.getSize,getUuid:u.getUuid,log:r,onCancel:u.onCancel,onProgress:u.onProgress,onUuidChanged:u.onUuidChanged}),o._removeExpiredChunkingRecords&&o._removeExpiredChunkingRecords()},isDeferredEligibleForUpload:function(e){return u.isQueued(e)},maybeDefer:function(e,t){return t&&!o.getFile(e)&&t instanceof qq.BlobProxy?(u.onUploadPrep(e),r("Attempting to generate a blob on-demand for "+e),t.create().then(function(t){r("Generated an on-demand blob for "+e),o.updateBlob(e,t),u.setSize(e,t.size),o.reevaluateChunking(e),d.maybeSendDeferredFiles(e)},function(t){var o={};t&&(o.error=t),r(qq.format("Failed to generate blob for ID {}.  Error message: {}.",e,t),"error"),u.onComplete(e,u.getName(e),qq.extend(o,n),null),d.maybeSendDeferredFiles(e),l.free(e)}),!1):d.maybeSendDeferredFiles(e)},maybeSendDeferredFiles:function(e){var t=u.getIdsInProxyGroup(e),n=!1;return t&&t.length?(r("Maybe ready to upload proxy group file "+e),qq.each(t,function(t,r){if(d.isDeferredEligibleForUpload(r)&&o.getFile(r))n=r===e,d.now(r);else if(d.isDeferredEligibleForUpload(r))return!1})):(n=!0,d.now(e)),n},maybeNewUuid:function(e,t){void 0!==t.newUuid&&u.onUuidChanged(e,t.newUuid)},normalizeResponse:function(e,t){var n=e;return qq.isObject(e)||(n={},qq.isString(e)&&!t&&(n.error=e)),n.success=t,n},now:function(e){var t=u.getName(e);if(!i.isValid(e))throw new qq.Error(e+" is not a valid file ID to upload!");u.onUpload(e,t),a&&o._shouldChunkThisFile(e)?c.sendNext(e):f.send(e,t)},start:function(e){var t=d.getProxyOrBlob(e);return t?d.maybeDefer(e,t):(d.now(e),!0)}};qq.extend(this,{add:function(e,t){o.add.apply(this,arguments)},upload:function(e){return!!l.open(e)&&d.start(e)},retry:function(e){return s&&(o._getFileState(e).temp.ignoreFailure=!1),l.isUsingConnection(e)?d.start(e):i.upload(e)},cancel:function(e){var t=o.cancel(e);qq.isGenericPromise(t)?t.then(function(){d.cancel(e)}):!1!==t&&d.cancel(e)},cancelAll:function(){var e,t=l.getWaitingOrConnected();if(t.length)for(e=t.length-1;e>=0;e--)i.cancel(t[e]);l.reset()},getFile:function(e){return o.getProxy&&o.getProxy(e)?o.getProxy(e).referenceBlob:o.getFile&&o.getFile(e)},isProxied:function(e){return!(!o.getProxy||!o.getProxy(e))},getInput:function(e){if(o.getInput)return o.getInput(e)},reset:function(){r("Resetting upload handler"),i.cancelAll(),l.reset(),o.reset()},expunge:function(e){if(i.isValid(e))return o.expunge(e)},isValid:function(e){return o.isValid(e)},getResumableFilesData:function(){return o.getResumableFilesData?o.getResumableFilesData():[]},getThirdPartyFileId:function(e){if(i.isValid(e))return o.getThirdPartyFileId(e)},pause:function(e){return!!(i.isResumable(e)&&o.pause&&i.isValid(e)&&o.pause(e))&&(l.free(e),o.moveInProgressToRemaining(e),!0)},isResumable:function(e){return!!o.isResumable&&o.isResumable(e)}}),qq.extend(u,e),r=u.log,a=u.chunking.enabled&&qq.supportedFeatures.chunking,s=a&&u.chunking.concurrent.enabled,n=function(){var e={};return e[u.preventRetryParam]=!0,e}(),d.initHandler()},qq.WindowReceiveMessage=function(e){"use strict";var t={log:function(e,t){}},n={};qq.extend(t,e),qq.extend(this,{receiveMessage:function(e,t){var r=function(e){t(e.data)};window.postMessage?n[e]=qq(window).attach("message",r):log("iframe message passing not supported in this browser!","error")},stopReceivingMessages:function(e){if(window.postMessage){var t=n[e];t&&t()}}})},qq.FormUploadHandler=function(e){"use strict";function t(e){delete l[e],d&&(clearTimeout(f[e]),delete f[e],g.stopReceivingMessages(e));var t=document.getElementById(a._getIframeName(e));t&&(t.setAttribute("src","javascript:false;"),qq(t).remove())}function n(e){return e.split("_")[0]}function r(e){var t=qq.toElement("<iframe src='javascript:false;' name='"+e+"' />");return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t}function o(e,t){var r=e.id,o=n(r),i=h(o);c[i]=t,l[o]=qq(e).attach("load",function(){a.getInput(o)&&(m("Received iframe load event for CORS upload request (iframe name "+r+")"),f[r]=setTimeout(function(){var e="No valid message received from loaded iframe for iframe name "+r;m(e,"error"),t({error:e})},1e3))}),g.receiveMessage(r,function(e){m("Received the following window message: '"+e+"'");var t,o=(n(r),a._parseJsonResponse(e)),i=o.uuid;i&&c[i]?(m("Handling response for iframe name "+r),clearTimeout(f[r]),delete f[r],a._detachLoadEvent(r),t=c[i],delete c[i],g.stopReceivingMessages(r),t(o)):i||m("'"+e+"' does not contain a UUID - ignoring.")})}var i=e.options,a=this,s=e.proxy,u=qq.getUniqueId(),c={},l={},f={},d=i.isCors,p=i.inputName,h=s.getUuid,m=s.log,g=new qq.WindowReceiveMessage({log:m});qq.extend(this,new qq.UploadHandler(e)),qq.override(this,function(e){return{add:function(t,n){e.add(t,{input:n}),n.setAttribute("name",p),n.parentNode&&qq(n).remove()},expunge:function(n){t(n),e.expunge(n)},isValid:function(t){return e.isValid(t)&&void 0!==a._getFileState(t).input}}}),qq.extend(this,{getInput:function(e){return a._getFileState(e).input},_attachLoadEvent:function(e,t){var n;d?o(e,t):l[e.id]=qq(e).attach("load",function(){if(m("Received response for "+e.id),e.parentNode){try{if(e.contentDocument&&e.contentDocument.body&&"false"==e.contentDocument.body.innerHTML)return}catch(e){m("Error when attempting to access iframe during handling of upload response ("+e.message+")","error"),n={success:!1}}t(n)}})},_createIframe:function(e){return r(a._getIframeName(e))},_detachLoadEvent:function(e){void 0!==l[e]&&(l[e](),delete l[e])},_getIframeName:function(e){return e+"_"+u},_initFormForUpload:function(e){var t=e.method,n=e.endpoint,r=e.params,o=e.paramsInBody,i=e.targetName,a=qq.toElement("<form method='"+t+"' enctype='multipart/form-data'></form>"),s=n;return o?qq.obj2Inputs(r,a):s=qq.obj2url(r,n),a.setAttribute("action",s),a.setAttribute("target",i),a.style.display="none",document.body.appendChild(a),a},_parseJsonResponse:function(e){var t={};try{t=qq.parseJson(e)}catch(e){m("Error when attempting to parse iframe upload response ("+e.message+")","error")}return t}})},qq.XhrUploadHandler=function(e){"use strict";function t(e){qq.each(n._getXhrs(e),function(t,r){var o=n._getAjaxRequester(e,t);r.onreadystatechange=null,r.upload.onprogress=null,r.abort(),o&&o.canceled&&o.canceled(e)})}var n=this,r=e.options.namespace,o=e.proxy,i=e.options.chunking,a=e.options.resume,s=i&&e.options.chunking.enabled&&qq.supportedFeatures.chunking,u=a&&e.options.resume.enabled&&s&&qq.supportedFeatures.resume,c=o.getName,l=o.getSize,f=o.getUuid,d=o.getEndpoint,p=o.getDataByUuid,h=o.onUuidChanged,m=o.onProgress,g=o.log;qq.extend(this,new qq.UploadHandler(e)),qq.override(this,function(e){return{add:function(t,r){if(qq.isFile(r)||qq.isBlob(r))e.add(t,{file:r});else{if(!(r instanceof qq.BlobProxy))throw new Error("Passed obj is not a File, Blob, or proxy");e.add(t,{proxy:r})}n._initTempState(t),u&&n._maybePrepareForResume(t)},expunge:function(r){t(r),n._maybeDeletePersistedChunkData(r),n._clearXhrs(r),e.expunge(r)}}}),qq.extend(this,{clearCachedChunk:function(e,t){delete n._getFileState(e).temp.cachedChunks[t]},clearXhr:function(e,t){var r=n._getFileState(e).temp;r.xhrs&&delete r.xhrs[t],r.ajaxRequesters&&delete r.ajaxRequesters[t]},finalizeChunks:function(e,t){var r=n._getTotalChunks(e)-1,o=n._getXhr(e,r);return t?(new qq.Promise).success(t(o),o):(new qq.Promise).success({},o)},getFile:function(e){return n.isValid(e)&&n._getFileState(e).file},getProxy:function(e){return n.isValid(e)&&n._getFileState(e).proxy},getResumableFilesData:function(){var e=[];return n._iterateResumeRecords(function(t,r){n.moveInProgressToRemaining(null,r.chunking.inProgress,r.chunking.remaining);var o={name:r.name,remaining:r.chunking.remaining,size:r.size,uuid:r.uuid};r.key&&(o.key=r.key),e.push(o)}),e},isResumable:function(e){return!!i&&n.isValid(e)&&!n._getFileState(e).notResumable},moveInProgressToRemaining:function(e,t,r){var o=t||n._getFileState(e).chunking.inProgress,i=r||n._getFileState(e).chunking.remaining;o&&(g(qq.format("Moving these chunks from in-progress {}, to remaining.",JSON.stringify(o))),o.reverse(),qq.each(o,function(e,t){i.unshift(t)}),o.length=0)},pause:function(e){if(n.isValid(e))return g(qq.format("Aborting XHR upload for {} '{}' due to pause instruction.",e,c(e))),n._getFileState(e).paused=!0,t(e),!0},reevaluateChunking:function(e){if(i&&n.isValid(e)){var t,r,o=n._getFileState(e);if(delete o.chunking,o.chunking={},(t=n._getTotalChunks(e))>1||i.mandatory){for(o.chunking.enabled=!0,o.chunking.parts=t,o.chunking.remaining=[],r=0;r<t;r++)o.chunking.remaining.push(r);n._initTempState(e)}else o.chunking.enabled=!1}},updateBlob:function(e,t){n.isValid(e)&&(n._getFileState(e).file=t)},_clearXhrs:function(e){var t=n._getFileState(e).temp;qq.each(t.ajaxRequesters,function(e){delete t.ajaxRequesters[e]}),qq.each(t.xhrs,function(e){delete t.xhrs[e]})},_createXhr:function(e,t){return n._registerXhr(e,t,qq.createXhrInstance())},_getAjaxRequester:function(e,t){var r=null==t?-1:t;return n._getFileState(e).temp.ajaxRequesters[r]},_getChunkData:function(e,t){var r=i.partSize,o=l(e),a=n.getFile(e),s=r*t,u=s+r>=o?o:s+r,c=n._getTotalChunks(e),f=this._getFileState(e).temp.cachedChunks,d=f[t]||qq.sliceBlob(a,s,u);return f[t]=d,{part:t,start:s,end:u,count:c,blob:d,size:u-s}},_getChunkDataForCallback:function(e){return{partIndex:e.part,startByte:e.start+1,endByte:e.end,totalParts:e.count}},_getLocalStorageId:function(e){var t=c(e),n=l(e),o=i.partSize,a=d(e);return qq.format("qq{}resume{}-{}-{}-{}-{}",r,"5.0",t,n,o,a)},_getMimeType:function(e){return n.getFile(e).type},_getPersistableData:function(e){return n._getFileState(e).chunking},_getTotalChunks:function(e){if(i){var t=l(e),n=i.partSize;return Math.ceil(t/n)}},_getXhr:function(e,t){var r=null==t?-1:t;return n._getFileState(e).temp.xhrs[r]},_getXhrs:function(e){return n._getFileState(e).temp.xhrs},_iterateResumeRecords:function(e){u&&qq.each(localStorage,function(t,n){if(0===t.indexOf(qq.format("qq{}resume",r))){var o=JSON.parse(n);e(t,o)}})},_initTempState:function(e){n._getFileState(e).temp={ajaxRequesters:{},chunkProgress:{},xhrs:{},cachedChunks:{}}},_markNotResumable:function(e){n._getFileState(e).notResumable=!0},_maybeDeletePersistedChunkData:function(e){var t;return!!(u&&n.isResumable(e)&&(t=n._getLocalStorageId(e))&&localStorage.getItem(t))&&(localStorage.removeItem(t),!0)},_maybePrepareForResume:function(e){var t,r,o=n._getFileState(e);u&&void 0===o.key&&(t=n._getLocalStorageId(e),(r=localStorage.getItem(t))&&(r=JSON.parse(r),p(r.uuid)?n._markNotResumable(e):(g(qq.format("Identified file with ID {} and name of {} as resumable.",e,c(e))),h(e,r.uuid),o.key=r.key,o.chunking=r.chunking,o.loaded=r.loaded,o.attemptingResume=!0,n.moveInProgressToRemaining(e))))},_maybePersistChunkedState:function(e){var t,r,o=n._getFileState(e);if(u&&n.isResumable(e)){t=n._getLocalStorageId(e),r={name:c(e),size:l(e),uuid:f(e),key:o.key,chunking:o.chunking,loaded:o.loaded,lastUpdated:Date.now()};try{localStorage.setItem(t,JSON.stringify(r))}catch(t){g(qq.format("Unable to save resume data for '{}' due to error: '{}'.",e,t.toString()),"warn")}}},_registerProgressHandler:function(e,t,r){var o=n._getXhr(e,t),i=c(e),a={simple:function(t,n){var r=l(e);t===n?m(e,i,r,r):m(e,i,t>=r?r-1:t,r)},chunked:function(o,a){var s=n._getFileState(e).temp.chunkProgress,u=n._getFileState(e).loaded,c=o,f=a,d=l(e),p=c-(f-r),h=u;s[t]=p,qq.each(s,function(e,t){h+=t}),m(e,i,h,d)}};o.upload.onprogress=function(e){if(e.lengthComputable){a[null==r?"simple":"chunked"](e.loaded,e.total)}}},_registerXhr:function(e,t,r,o){var i=null==t?-1:t,a=n._getFileState(e).temp;return a.xhrs=a.xhrs||{},a.ajaxRequesters=a.ajaxRequesters||{},a.xhrs[i]=r,o&&(a.ajaxRequesters[i]=o),r},_removeExpiredChunkingRecords:function(){var e=a.recordsExpireIn;n._iterateResumeRecords(function(t,n){var r=new Date(n.lastUpdated);r.setDate(r.getDate()+e),r.getTime()<=Date.now()&&(g("Removing expired resume record with key "+t),localStorage.removeItem(t))})},_shouldChunkThisFile:function(e){var t=n._getFileState(e);return t.chunking||n.reevaluateChunking(e),t.chunking.enabled}})},qq.DeleteFileAjaxRequester=function(e){"use strict";var t,n={method:"DELETE",uuidParamName:"qquuid",endpointStore:{},maxConnections:3,customHeaders:function(e){return{}},paramsStore:{},cors:{expected:!1,sendCredentials:!1},log:function(e,t){},onDelete:function(e){},onDeleteComplete:function(e,t,n){}};qq.extend(n,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["POST","DELETE"],method:n.method,endpointStore:n.endpointStore,paramsStore:n.paramsStore,mandatedParams:function(){return"POST"===n.method.toUpperCase()?{_method:"DELETE"}:{}}(),maxConnections:n.maxConnections,customHeaders:function(e){return n.customHeaders.get(e)},log:n.log,onSend:n.onDelete,onComplete:n.onDeleteComplete,cors:n.cors})),qq.extend(this,{sendDelete:function(e,r,o){var i=o||{};n.log("Submitting delete file request for "+e),"DELETE"===n.method?t.initTransport(e).withPath(r).withParams(i).send():(i[n.uuidParamName]=r,t.initTransport(e).withParams(i).send())}})},function(){function e(e){var t,n=e.naturalWidth,r=e.naturalHeight,o=document.createElement("canvas");return n*r>1048576&&(o.width=o.height=1,t=o.getContext("2d"),t.drawImage(e,1-n,0),0===t.getImageData(0,0,1,1).data[3])}function t(e,t,n){var r,o,i,a,s=document.createElement("canvas"),u=0,c=n,l=n;for(s.width=1,s.height=n,r=s.getContext("2d"),r.drawImage(e,0,0),o=r.getImageData(0,0,1,n).data;l>u;)i=o[4*(l-1)+3],0===i?c=l:u=l,l=c+u>>1;return a=l/n,0===a?1:a}function n(e,t,n,r){var i=document.createElement("canvas"),a=n.mime||"image/jpeg",s=new qq.Promise;return o(e,t,i,n,r).then(function(){s.success(i.toDataURL(a,n.quality||.8))}),s}function r(e){if(!qq.ios())throw new qq.Error("Downsampled dimensions can only be reliably calculated for iOS!");if(e.origHeight*e.origWidth>5241e3)return{newHeight:Math.round(Math.sqrt(e.origHeight/e.origWidth*5241e3)),newWidth:Math.round(Math.sqrt(e.origWidth/e.origHeight*5241e3))}}function o(n,o,s,u,c){var l,f=n.naturalWidth,d=n.naturalHeight,p=u.width,h=u.height,m=s.getContext("2d"),g=new qq.Promise;return m.save(),u.resize?i({blob:o,canvas:s,image:n,imageHeight:d,imageWidth:f,orientation:u.orientation,resize:u.resize,targetHeight:h,targetWidth:p}):(qq.supportedFeatures.unlimitedScaledImageSize||(l=r({origWidth:p,origHeight:h}))&&(qq.log(qq.format("Had to reduce dimensions due to device limitations from {}w / {}h to {}w / {}h",p,h,l.newWidth,l.newHeight),"warn"),p=l.newWidth,h=l.newHeight),a(s,p,h,u.orientation),qq.ios()?function(){e(n)&&(f/=2,d/=2);var r,o,i,a=1024,s=document.createElement("canvas"),u=c?t(n,f,d):1,l=Math.ceil(a*p/f),g=Math.ceil(a*h/d/u),v=0,q=0;for(s.width=s.height=a,r=s.getContext("2d");v<d;){for(o=0,i=0;o<f;)r.clearRect(0,0,a,a),r.drawImage(n,-o,-v),m.drawImage(s,0,0,a,a,i,q,l,g),o+=a,i+=l;v+=a,q+=g}m.restore(),s=r=null}():m.drawImage(n,0,0,p,h),s.qqImageRendered&&s.qqImageRendered(),g.success(),g)}function i(e){var t=e.blob,n=e.image,r=e.imageHeight,o=e.imageWidth,i=e.orientation,s=new qq.Promise,u=e.resize,c=document.createElement("canvas"),l=c.getContext("2d"),f=e.canvas,d=e.targetHeight,p=e.targetWidth;return a(c,o,r,i),f.height=d,f.width=p,l.drawImage(n,0,0),u({blob:t,height:d,image:n,sourceCanvas:c,targetCanvas:f,width:p}).then(function(){f.qqImageRendered&&f.qqImageRendered(),s.success()},s.failure),s}function a(e,t,n,r){switch(r){case 5:case 6:case 7:case 8:e.width=n,e.height=t;break;default:e.width=t,e.height=n}var o=e.getContext("2d");switch(r){case 2:o.translate(t,0),o.scale(-1,1);break;case 3:o.translate(t,n),o.rotate(Math.PI);break;case 4:o.translate(0,n),o.scale(1,-1);break;case 5:o.rotate(.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(.5*Math.PI),o.translate(0,-n);break;case 7:o.rotate(.5*Math.PI),o.translate(t,-n),o.scale(-1,1);break;case 8:o.rotate(-.5*Math.PI),o.translate(-t,0)}}function s(e,t){var n=this;window.Blob&&e instanceof Blob&&function(){var t=new Image,r=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!r)throw Error("No createObjectURL function found to create blob url");t.src=r.createObjectURL(e),n.blob=e,e=t}(),e.naturalWidth||e.naturalHeight||(e.onload=function(){var e=n.imageLoadListeners;e&&(n.imageLoadListeners=null,setTimeout(function(){for(var t=0,n=e.length;t<n;t++)e[t]()},0))},e.onerror=t,this.imageLoadListeners=[]),this.srcImage=e}s.prototype.render=function(e,t){t=t||{};var r,i=this,a=this.srcImage.naturalWidth,s=this.srcImage.naturalHeight,u=t.width,c=t.height,l=t.maxWidth,f=t.maxHeight,d=!this.blob||"image/jpeg"===this.blob.type,p=e.tagName.toLowerCase();if(this.imageLoadListeners)return void this.imageLoadListeners.push(function(){i.render(e,t)});u&&!c?c=s*u/a<<0:c&&!u?u=a*c/s<<0:(u=a,c=s),l&&u>l&&(u=l,c=s*u/a<<0),f&&c>f&&(c=f,u=a*c/s<<0),r={width:u,height:c},qq.each(t,function(e,t){r[e]=t}),"img"===p?function(){var t=e.src;n(i.srcImage,i.blob,r,d).then(function(n){e.src=n,t===e.src&&e.onload()})}():"canvas"===p&&o(this.srcImage,this.blob,e,r,d),"function"==typeof this.onrender&&this.onrender(e)},qq.MegaPixImage=s}(),qq.ImageGenerator=function(e){"use strict";function t(e){return"img"===e.tagName.toLowerCase()}function n(e){return"canvas"===e.tagName.toLowerCase()}function r(){return void 0!==(new Image).crossOrigin}function o(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")}function i(e){var t=e.split("/"),n=t[t.length-1].split("?")[0],r=qq.getExtension(n);switch(r=r&&r.toLowerCase()){case"jpeg":case"jpg":return"image/jpeg";case"png":return"image/png";case"bmp":return"image/bmp";case"gif":return"image/gif";case"tiff":case"tif":return"image/tiff"}}function a(e){var t,n,r,o=document.createElement("a");return o.href=e,t=o.protocol,r=o.port,n=o.hostname,t.toLowerCase()!==window.location.protocol.toLowerCase()||(n.toLowerCase()!==window.location.hostname.toLowerCase()||r!==window.location.port&&!qq.ie())}function s(t,n){t.onload=function(){t.onload=null,t.onerror=null,n.success(t)},t.onerror=function(){t.onload=null,t.onerror=null,e("Problem drawing thumbnail!","error"),n.failure(t,"Problem drawing thumbnail!")}}function u(e,t){e.qqImageRendered=function(){t.success(e)}}function c(r,o){var i=t(r)||n(r);return t(r)?s(r,o):n(r)?u(r,o):(o.failure(r),e(qq.format("Element container of type {} is not supported!",r.tagName),"error")),i}function l(t,n,r){var o=new qq.Promise,i=new qq.Identify(t,e),a=r.maxSize,s=null==r.orient||r.orient,u=function(){n.onerror=null,n.onload=null,e("Could not render preview, file may be too large!","error"),o.failure(n,"Browser cannot render image!")};return i.isPreviewable().then(function(i){var l={parse:function(){return(new qq.Promise).success()}},f=s?new qq.Exif(t,e):l,d=new qq.MegaPixImage(t,u);c(n,o)&&f.parse().then(function(e){var t=e&&e.Orientation;d.render(n,{maxWidth:a,maxHeight:a,orientation:t,mime:i,resize:r.customResizeFunction})},function(t){e(qq.format("EXIF data could not be parsed ({}).  Assuming orientation = 1.",t)),d.render(n,{maxWidth:a,maxHeight:a,mime:i,resize:r.customResizeFunction})})},function(){e("Not previewable"),o.failure(n,"Not previewable")}),o}function f(e,t,n,r,o){var s=new Image,u=new qq.Promise;c(s,u),a(e)&&(s.crossOrigin="anonymous"),s.src=e,u.then(function(){c(t,n),new qq.MegaPixImage(s).render(t,{maxWidth:r,maxHeight:r,mime:i(e),resize:o})},n.failure)}function d(e,t,n,r){c(t,n),qq(t).css({maxWidth:r+"px",maxHeight:r+"px"}),t.src=e}function p(e,i,s){var u=new qq.Promise,l=s.scale,p=l?s.maxSize:null;return l&&t(i)?o()?a(e)&&!r()?d(e,i,u,p):f(e,i,u,p):d(e,i,u,p):n(i)?f(e,i,u,p):c(i,u)&&(i.src=e),u}qq.extend(this,{generate:function(t,n,r){return qq.isString(t)?(e("Attempting to update thumbnail based on server response."),p(t,n,r||{})):(e("Attempting to draw client-side image preview."),l(t,n,r||{}))}}),this._testing={},this._testing.isImg=t,this._testing.isCanvas=n,this._testing.isCrossOrigin=a,this._testing.determineMimeOfFileName=i},qq.Exif=function(e,t){"use strict";function n(e){for(var t=0,n=0;e.length>0;)t+=parseInt(e.substring(0,2),16)*Math.pow(2,n),e=e.substring(2,e.length),n+=8;return t}function r(t,n){var o=t,i=n;return void 0===o&&(o=2,i=new qq.Promise),qq.readBlobToHex(e,o,4).then(function(e){var t,n=/^ffe([0-9])/.exec(e);n?"1"!==n[1]?(t=parseInt(e.slice(4,8),16),r(o+t+2,i)):i.success(o):i.failure("No EXIF header to be found!")}),i}function o(){var t=new qq.Promise;return qq.readBlobToHex(e,0,6).then(function(e){0!==e.indexOf("ffd8")?t.failure("Not a valid JPEG!"):r().then(function(e){t.success(e)},function(e){t.failure(e)})}),t}function i(t){var n=new qq.Promise;return qq.readBlobToHex(e,t+10,2).then(function(e){n.success("4949"===e)}),n}function a(t,r){var o=new qq.Promise;return qq.readBlobToHex(e,t+18,2).then(function(e){if(r)return o.success(n(e));o.success(parseInt(e,16))}),o}function s(t,n){var r=t+20,o=12*n;return qq.readBlobToHex(e,r,o)}function u(e){for(var t=[],n=0;n+24<=e.length;)t.push(e.slice(n,n+24)),n+=24;return t}function c(e,t){var r=qq.extend([],l),o={};return qq.each(t,function(t,i){var a,s,u,c=i.slice(0,4),l=e?n(c):parseInt(c,16),d=r.indexOf(l);if(d>=0&&(s=f[l].name,u=f[l].bytes,a=i.slice(16,16+2*u),o[s]=e?n(a):parseInt(a,16),r.splice(d,1)),0===r.length)return!1}),o}var l=[274],f={274:{name:"Orientation",bytes:2}};qq.extend(this,{parse:function(){var n=new qq.Promise,r=function(e){t(qq.format("EXIF header parse failed: '{}' ",e)),n.failure(e)};return o().then(function(o){t(qq.format("Moving forward with EXIF header parsing for '{}'",void 0===e.name?"blob":e.name)),i(o).then(function(e){t(qq.format("EXIF Byte order is {} endian",e?"little":"big")),a(o,e).then(function(i){t(qq.format("Found {} APP1 directory entries",i)),s(o,i).then(function(r){var o=u(r),i=c(e,o);t("Successfully parsed some EXIF tags"),n.success(i)},r)},r)},r)},r),n}}),this._testing={},this._testing.parseLittleEndian=n},qq.Identify=function(e,t){"use strict";function n(e,t){var n=!1,r=[].concat(e);return qq.each(r,function(e,r){if(0===t.indexOf(r))return n=!0,!1}),n}qq.extend(this,{isPreviewable:function(){var r=this,o=new qq.Promise,i=!1,a=void 0===e.name?"blob":e.name;return t(qq.format("Attempting to determine if {} can be rendered in this browser",a)),t("First pass: check type attribute of blob object."),this.isPreviewableSync()?(t("Second pass: check for magic bytes in file header."),qq.readBlobToHex(e,0,4).then(function(e){qq.each(r.PREVIEWABLE_MIME_TYPES,function(t,r){if(n(r,e))return("image/tiff"!==t||qq.supportedFeatures.tiffPreviews)&&(i=!0,o.success(t)),!1}),t(qq.format("'{}' is {} able to be rendered in this browser",a,i?"":"NOT")),i||o.failure()},function(){t("Error reading file w/ name '"+a+"'.  Not able to be rendered in this browser."),o.failure()})):o.failure(),o},isPreviewableSync:function(){var n=e.type,r=qq.indexOf(Object.keys(this.PREVIEWABLE_MIME_TYPES),n)>=0,o=!1,i=void 0===e.name?"blob":e.name;return r&&(o="image/tiff"!==n||qq.supportedFeatures.tiffPreviews),!o&&t(i+" is not previewable in this browser per the blob's type attr"),o}})},qq.Identify.prototype.PREVIEWABLE_MIME_TYPES={"image/jpeg":"ffd8ff","image/gif":"474946","image/png":"89504e","image/bmp":"424d","image/tiff":["49492a00","4d4d002a"]},qq.ImageValidation=function(e,t){"use strict";function n(e){var t=!1;return qq.each(e,function(e,n){if(n>0)return t=!0,!1}),t}function r(){var n=new qq.Promise;return new qq.Identify(e,t).isPreviewable().then(function(){var r=new Image,o=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;o?(r.onerror=function(){t("Cannot determine dimensions for image.  May be too large.","error"),n.failure()},r.onload=function(){n.success({width:this.width,height:this.height})},r.src=o.createObjectURL(e)):(t("No createObjectURL function available to generate image URL!","error"),n.failure())},n.failure),n}function o(e,t){var n;return qq.each(e,function(e,r){if(r>0){var o=/(max|min)(Width|Height)/.exec(e),i=o[2].charAt(0).toLowerCase()+o[2].slice(1),a=t[i];switch(o[1]){case"min":if(a<r)return n=e,!1;break;case"max":if(a>r)return n=e,!1}}}),n}this.validate=function(e){var i=new qq.Promise;return t("Attempting to validate image."),n(e)?r().then(function(t){var n=o(e,t);n?i.failure(n):i.success()},i.success):i.success(),i}},qq.Session=function(e){"use strict";function t(e){if(qq.isArray(e))return!0;r.log("Session response is not an array.","error")}function n(e,n,o,i){var a=!1;n=n&&t(e),n&&qq.each(e,function(e,t){if(null==t.uuid)a=!0,r.log(qq.format("Session response item {} did not include a valid UUID - ignoring.",e),"error");else if(null==t.name)a=!0,r.log(qq.format("Session response item {} did not include a valid name - ignoring.",e),"error");else try{return r.addFileRecord(t),!0}catch(e){a=!0,r.log(e.message,"error")}return!1}),i[n&&!a?"success":"failure"](e,o)}var r={endpoint:null,params:{},customHeaders:{},cors:{},addFileRecord:function(e){},log:function(e,t){}};qq.extend(r,e,!0),this.refresh=function(){var e=new qq.Promise,t=function(t,r,o){n(t,r,o,e)},o=qq.extend({},r);return new qq.SessionAjaxRequester(qq.extend(o,{onComplete:t})).queryServer(),e}},qq.SessionAjaxRequester=function(e){"use strict";function t(e,t,n){var o=null;if(null!=t.responseText)try{o=qq.parseJson(t.responseText)}catch(e){r.log("Problem parsing session response: "+e.message,"error"),n=!0}r.onComplete(o,!n,t)}var n,r={endpoint:null,customHeaders:{},params:{},cors:{expected:!1,sendCredentials:!1},onComplete:function(e,t,n){},log:function(e,t){}};qq.extend(r,e),n=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["GET"],method:"GET",endpointStore:{get:function(){return r.endpoint}},customHeaders:r.customHeaders,log:r.log,onComplete:t,cors:r.cors})),qq.extend(this,{queryServer:function(){var e=qq.extend({},r.params);r.log("Session query request."),n.initTransport("sessionRefresh").withParams(e).withCacheBuster().send()}})},qq.Scaler=function(e,t){"use strict";var n=e.customResizer,r=e.sendOriginal,o=e.orient,i=e.defaultType,a=e.defaultQuality/100,s=e.failureText,u=e.includeExif,c=this._getSortedSizes(e.sizes);qq.extend(this,{enabled:qq.supportedFeatures.scaling&&c.length>0,getFileRecords:function(e,l,f){var d=this,p=[],h=f.blob?f.blob:f;return new qq.Identify(h,t).isPreviewableSync()?(qq.each(c,function(e,r){var c=d._determineOutputType({defaultType:i,requestedType:r.type,refType:h.type});p.push({uuid:qq.getUniqueId(),name:d._getName(l,{name:r.name,type:c,refType:h.type}),blob:new qq.BlobProxy(h,qq.bind(d._generateScaledImage,d,{customResizeFunction:n,maxSize:r.maxSize,orient:o,type:c,quality:a,failedText:s,includeExif:u,log:t}))})}),p.push({uuid:e,name:l,size:h.size,blob:r?h:null})):p.push({uuid:e,name:l,size:h.size,blob:h}),p},handleNewFile:function(e,t,n,r,o,i,a,s){var u=this,c=(e.qqButtonId||e.blob&&e.blob.qqButtonId,[]),l=null,f=s.addFileToHandler,d=s.uploadData,p=s.paramsStore,h=qq.getUniqueId();qq.each(u.getFileRecords(n,t,e),function(e,t){var n,r=t.size;t.blob instanceof qq.BlobProxy&&(r=-1),n=d.addFile({uuid:t.uuid,name:t.name,size:r,batchId:i,proxyGroupId:h}),t.blob instanceof qq.BlobProxy?c.push(n):l=n,t.blob?(f(n,t.blob),o.push({id:n,file:t.blob})):d.setStatus(n,qq.status.REJECTED)}),null!==l&&(qq.each(c,function(e,t){var n={qqparentuuid:d.retrieve({id:l}).uuid,qqparentsize:d.retrieve({id:l}).size};n[a]=d.retrieve({id:t}).uuid,d.setParentId(t,l),p.addReadOnly(t,n)}),c.length&&function(){var e={};e[a]=d.retrieve({id:l}).uuid,p.addReadOnly(l,e)}())}})},qq.extend(qq.Scaler.prototype,{scaleImage:function(e,t,n){"use strict";if(!qq.supportedFeatures.scaling)throw new qq.Error("Scaling is not supported in this browser!");var r=new qq.Promise,o=n.log,i=n.getFile(e),a=n.uploadData.retrieve({id:e}),s=a&&a.name,u=a&&a.uuid,c={customResizer:t.customResizer,sendOriginal:!1,orient:t.orient,defaultType:t.type||null,defaultQuality:t.quality,failedToScaleText:"Unable to scale",sizes:[{name:"",maxSize:t.maxSize}]},l=new qq.Scaler(c,o);return qq.Scaler&&qq.supportedFeatures.imagePreviews&&i?qq.bind(function(){var t=l.getFileRecords(u,s,i)[0];t&&t.blob instanceof qq.BlobProxy?t.blob.create().then(r.success,r.failure):(o(e+" is not a scalable image!","error"),r.failure())},this)():(r.failure(),o("Could not generate requested scaled image for "+e+".  Scaling is either not possible in this browser, or the file could not be located.","error")),r},_determineOutputType:function(e){"use strict";var t=e.requestedType,n=e.defaultType,r=e.refType;return n||t?t&&qq.indexOf(Object.keys(qq.Identify.prototype.PREVIEWABLE_MIME_TYPES),t)>=0?"image/tiff"===t?qq.supportedFeatures.tiffPreviews?t:n:t:n:"image/jpeg"!==r?"image/png":r},_getName:function(e,t){"use strict";var n=e.lastIndexOf("."),r=t.type||"image/png",o=t.refType,i="",a=qq.getExtension(e),s="";return t.name&&t.name.trim().length&&(s=" ("+t.name+")"),n>=0?(i=e.substr(0,n),o!==r&&(a=r.split("/")[1]),i+=s+"."+a):i=e+s,i},_getSortedSizes:function(e){"use strict";return e=qq.extend([],e),e.sort(function(e,t){return e.maxSize>t.maxSize?1:e.maxSize<t.maxSize?-1:0})},_generateScaledImage:function(e,t){"use strict";var n=this,r=e.customResizeFunction,o=e.log,i=e.maxSize,a=e.orient,s=e.type,u=e.quality,c=e.failedText,l=e.includeExif&&"image/jpeg"===t.type&&"image/jpeg"===s,f=new qq.Promise,d=new qq.ImageGenerator(o),p=document.createElement("canvas");return o("Attempting to generate scaled version for "+t.name),d.generate(t,p,{maxSize:i,orient:a,customResizeFunction:r}).then(function(){var e=p.toDataURL(s,u),r=function(){o("Success generating scaled version for "+t.name);var n=qq.dataUriToBlob(e);f.success(n)};l?n._insertExifHeader(t,e,o).then(function(t){e=t,r()},function(){o("Problem inserting EXIF header into scaled image.  Using scaled image w/out EXIF data.","error"),r()}):r()},function(){o("Failed attempt to generate scaled version for "+t.name,"error"),f.failure(c)}),f},_insertExifHeader:function(e,t,n){"use strict";var r=new FileReader,o=new qq.Promise,i="";return r.onload=function(){i=r.result,o.success(qq.ExifRestorer.restore(i,t))},r.onerror=function(){n("Problem reading "+e.name+" during attempt to transfer EXIF data to scaled version.","error"),o.failure()},r.readAsDataURL(e),o},_dataUriToBlob:function(e){"use strict";var t,n,r,o;return t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURI(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(t.length),o=new Uint8Array(r),qq.each(t,function(e,t){o[e]=t.charCodeAt(0)}),this._createBlob(r,n)},_createBlob:function(e,t){"use strict";var n=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,r=n&&new n;return r?(r.append(e),r.getBlob(t)):new Blob([e],{type:t})}}),qq.ExifRestorer=function(){var e={};return e.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e.encode64=function(e){var t,n,r,o,i,a="",s="",u="",c=0;do{t=e[c++],n=e[c++],s=e[c++],r=t>>2,o=(3&t)<<4|n>>4,i=(15&n)<<2|s>>6,u=63&s,isNaN(n)?i=u=64:isNaN(s)&&(u=64),a=a+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(u),t=n=s="",r=o=i=u=""}while(c<e.length);return a},e.restore=function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var n=this.decode64(e.replace("data:image/jpeg;base64,","")),r=this.slice2Segments(n),o=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(o)},e.exifManipulation=function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},e.getExifArray=function(e){for(var t,n=0;n<e.length;n++)if(t=e[n],255==t[0]&225==t[1])return t;return[]},e.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),o=r.indexOf(255,3),i=r.slice(0,o),a=r.slice(o),s=i;return s=s.concat(t),s=s.concat(a)},e.slice2Segments=function(e){for(var t=0,n=[];;){if(255==e[t]&218==e[t+1])break;if(255==e[t]&216==e[t+1])t+=2;else{var r=256*e[t+2]+e[t+3],o=t+r+2,i=e.slice(t,o);n.push(i),t=o}if(t>e.length)break}return n},e.decode64=function(e){var t,n,r,o,i,a="",s="",u=0,c=[];if(/[^A-Za-z0-9\+\/\=]/g.exec(e))throw new Error("There were invalid base64 characters in the input text.  Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='");e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{r=this.KEY_STR.indexOf(e.charAt(u++)),o=this.KEY_STR.indexOf(e.charAt(u++)),i=this.KEY_STR.indexOf(e.charAt(u++)),s=this.KEY_STR.indexOf(e.charAt(u++)),t=r<<2|o>>4,n=(15&o)<<4|i>>2,a=(3&i)<<6|s,c.push(t),64!=i&&c.push(n),64!=s&&c.push(a),t=n=a="",r=o=i=s=""}while(u<e.length);return c},e}(),qq.TotalProgress=function(e,t){"use strict";var n={},r=0,o=0,i=-1,a=-1,s=function(t,n){t===i&&n===a||e(t,n),i=t,a=n},u=function(e,t){var n=!0;return qq.each(e,function(e,r){if(qq.indexOf(t,r)>=0)return n=!1,!1}),n},c=function(e){d(e,-1,-1),delete n[e]},l=function(e,t,n){(0===t.length||u(t,n))&&(s(o,o),this.reset())},f=function(e){var r=t(e);r>0&&(d(e,0,r),n[e]={loaded:0,total:r})},d=function(e,t,i){var a=n[e]?n[e].loaded:0,u=n[e]?n[e].total:0;-1===t&&-1===i?(r-=a,o-=u):(t&&(r+=t-a),i&&(o+=i-u)),s(r,o)};qq.extend(this,{onAllComplete:l,onStatusChange:function(e,t,n){n===qq.status.CANCELED||n===qq.status.REJECTED?c(e):n===qq.status.SUBMITTING&&f(e)},onIndividualProgress:function(e,t,r){d(e,t,r),n[e]={loaded:t,total:r}},onNewSize:function(e){f(e)},reset:function(){n={},r=0,o=0}})},qq.PasteSupport=function(e){"use strict";function t(e){return e.type&&0===e.type.indexOf("image/")}function n(){o&&o()}var r,o;r={targetElement:null,callbacks:{log:function(e,t){},pasteReceived:function(e){}}},qq.extend(r,e),function(){o=qq(r.targetElement).attach("paste",function(e){var n=e.clipboardData;n&&qq.each(n.items,function(e,n){if(t(n)){var o=n.getAsFile();r.callbacks.pasteReceived(o)}})})}(),qq.extend(this,{reset:function(){n()}})},qq.FormSupport=function(e,t,n){"use strict";function r(e){e.getAttribute("action")&&(a.newEndpoint=e.getAttribute("action"))}function o(e,t){if(!e.checkValidity||e.checkValidity())return!0;n("Form did not pass validation checks - will not upload.","error"),t()}function i(e){var n=e.submit;qq(e).attach("submit",function(r){r=r||window.event,r.preventDefault?r.preventDefault():r.returnValue=!1,o(e,n)&&t()}),e.submit=function(){o(e,n)&&t()}}var a=this,s=e.interceptSubmit,u=e.element,c=e.autoUpload;qq.extend(this,{newEndpoint:null,newAutoUpload:c,attachedToForm:!1,getFormInputsAsObject:function(){return null==u?null:a._form2Obj(u)}}),u=function(e){return e&&(qq.isString(e)&&(e=document.getElementById(e)),e&&(n("Attaching to form element."),r(e),s&&i(e))),e}(u),this.attachedToForm=!!u},qq.extend(qq.FormSupport.prototype,{_form2Obj:function(e){"use strict";var t={},n=function(e){var t=["button","image","reset","submit"];return qq.indexOf(t,e.toLowerCase())<0},r=function(e){return qq.indexOf(["checkbox","radio"],e.toLowerCase())>=0},o=function(e){return!(!r(e.type)||e.checked)||e.disabled&&"hidden"!==e.type.toLowerCase()},i=function(e){var t=null;return qq.each(qq(e).children(),function(e,n){if("option"===n.tagName.toLowerCase()&&n.selected)return t=n.value,!1}),t};return qq.each(e.elements,function(e,r){if(!qq.isInput(r,!0)&&"textarea"!==r.tagName.toLowerCase()||!n(r.type)||o(r)){if("select"===r.tagName.toLowerCase()&&!o(r)){var a=i(r);null!==a&&(t[r.name]=a)}}else t[r.name]=r.value}),t}}),qq.traditional=qq.traditional||{},qq.traditional.FormUploadHandler=function(e,t){"use strict";function n(e,t){var n,r,i;try{r=t.contentDocument||t.contentWindow.document,i=r.body.innerHTML,s("converting iframe's innerHTML to JSON"),s("innerHTML = "+i),i&&i.match(/^<pre/i)&&(i=r.body.firstChild.firstChild.nodeValue),n=o._parseJsonResponse(i)}catch(e){s("Error when attempting to parse form upload response ("+e.message+")","error"),n={success:!1}}return n}function r(t,n){var r=e.paramsStore.get(t),s="get"===e.method.toLowerCase()?"GET":"POST",u=e.endpointStore.get(t),c=i(t);return r[e.uuidName]=a(t),r[e.filenameParam]=c,o._initFormForUpload({method:s,endpoint:u,params:r,paramsInBody:e.paramsInBody,targetName:n.name})}var o=this,i=t.getName,a=t.getUuid,s=t.log;this.uploadFile=function(t){var i,a=o.getInput(t),u=o._createIframe(t),c=new qq.Promise;return i=r(t,u),i.appendChild(a),o._attachLoadEvent(u,function(r){s("iframe loaded");var i=r||n(t,u);o._detachLoadEvent(t),e.cors.expected||qq(u).remove(),i.success?c.success(i):c.failure(i)}),s("Sending upload request for "+t),i.submit(),qq(i).remove(),c},qq.extend(this,new qq.FormUploadHandler({options:{isCors:e.cors.expected,inputName:e.inputName},proxy:{onCancel:e.onCancel,getName:i,getUuid:a,log:s}}))},qq.traditional=qq.traditional||{},qq.traditional.XhrUploadHandler=function(e,t){"use strict";var n=this,r=t.getName,o=t.getSize,i=t.getUuid,a=t.log,s=e.forceMultipart||e.paramsInBody,u=function(t,n,i){var a=o(t),u=r(t);n[e.chunking.paramNames.partIndex]=i.part,n[e.chunking.paramNames.partByteOffset]=i.start,n[e.chunking.paramNames.chunkSize]=i.size,n[e.chunking.paramNames.totalParts]=i.count,n[e.totalFileSizeName]=a,s&&(n[e.filenameParam]=u)},c=new qq.traditional.AllChunksDoneAjaxRequester({cors:e.cors,endpoint:e.chunking.success.endpoint,log:a}),l=function(e,t){var n=new qq.Promise;return t.onreadystatechange=function(){if(4===t.readyState){var r=p(e,t);r.success?n.success(r.response,t):n.failure(r.response,t)}},n},f=function(t){var a=e.paramsStore.get(t),s=r(t),u=o(t);return a[e.uuidName]=i(t),a[e.filenameParam]=s,a[e.totalFileSizeName]=u,a[e.chunking.paramNames.totalParts]=n._getTotalChunks(t),a},d=function(e,t){return qq.indexOf([200,201,202,203,204],e.status)<0||!t.success||t.reset},p=function(e,t){var n;return a("xhr - server response received for "+e),a("responseText = "+t.responseText),n=h(!0,t),{success:!d(t,n),response:n}},h=function(e,t){var n={};try{a(qq.format("Received response status {} with body: {}",t.status,t.responseText)),n=qq.parseJson(t.responseText)}catch(t){e&&a("Error when attempting to parse xhr response text ("+t.message+")","error")}return n},m=function(t){var r=new qq.Promise;return c.complete(t,n._createXhr(t),f(t),e.customHeaders.get(t)).then(function(e){r.success(h(!1,e),e)},function(e){r.failure(h(!1,e),e)}),r},g=function(t,n,a,u){var c=new FormData,l=e.method,f=e.endpointStore.get(u),d=r(u),p=o(u);return t[e.uuidName]=i(u),t[e.filenameParam]=d,s&&(t[e.totalFileSizeName]=p),e.paramsInBody||(s||(t[e.inputName]=d),f=qq.obj2url(t,f)),n.open(l,f,!0),e.cors.expected&&e.cors.sendCredentials&&(n.withCredentials=!0),s?(e.paramsInBody&&qq.obj2FormData(t,c),c.append(e.inputName,a),c):a},v=function(t,r){var o=e.customHeaders.get(t),i=n.getFile(t);r.setRequestHeader("Accept","application/json"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Cache-Control","no-cache"),s||(r.setRequestHeader("Content-Type","application/octet-stream"),r.setRequestHeader("X-Mime-Type",i.type)),qq.each(o,function(e,t){r.setRequestHeader(e,t)})};qq.extend(this,{uploadChunk:function(t,r,i){var a,s,c,f=n._getChunkData(t,r),d=n._createXhr(t,r);o(t);return a=l(t,d),n._registerProgressHandler(t,r,f.size),c=e.paramsStore.get(t),u(t,c,f),i&&(c[e.resume.paramNames.resuming]=!0),s=g(c,d,f.blob,t),v(t,d),d.send(s),a},uploadFile:function(t){var r,o,i,a,s=n.getFile(t);return o=n._createXhr(t),n._registerProgressHandler(t),r=l(t,o),i=e.paramsStore.get(t),a=g(i,o,s,t),v(t,o),o.send(a),r}}),qq.extend(this,new qq.XhrUploadHandler({options:qq.extend({namespace:"traditional"},e),proxy:qq.extend({getEndpoint:e.endpointStore.get},t)})),qq.override(this,function(t){return{finalizeChunks:function(n){return e.chunking.success.endpoint?m(n):t.finalizeChunks(n,qq.bind(h,this,!0))}}})},qq.traditional.AllChunksDoneAjaxRequester=function(e){"use strict";var t,n={cors:{allowXdr:!1,expected:!1,sendCredentials:!1},endpoint:null,log:function(e,t){}},r={},o={get:function(e){return n.endpoint}};qq.extend(n,e),t=qq.extend(this,new qq.AjaxRequester({acceptHeader:"application/json",validMethods:["POST"],method:"POST",endpointStore:o,allowXRequestedWithAndCacheControl:!1,cors:n.cors,log:n.log,onComplete:function(e,t,n){var o=r[e];delete r[e],n?o.failure(t):o.success(t)}})),qq.extend(this,{complete:function(e,o,i,a){var s=new qq.Promise;return n.log("Submitting All Chunks Done request for "+e),r[e]=s,t.initTransport(e).withParams(i).withHeaders(a).send(o),s}})}}(window)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.MessageTypes=void 0;!function(e){e.question="question",e.answer="answer"}(r||(t.MessageTypes=r={}));var o=t.MessageContentTypes=void 0;!function(e){e.text="text",e.image="image",e.file="file",e.robot="robot",e.voice="voice"}(o||(t.MessageContentTypes=o={}));var i=t.ClientSendTypes=void 0;!function(e){e.authenticate="authenticate",e.heartbeat="heartbeat",e.message="message",e.transfer="transfer",e.preview="preview",e.ServicerOp="ServicerOp"}(i||(t.ClientSendTypes=i={}));var a=t.ClientGetTypes=void 0;!function(e){e.authenticate="authenticate",e.message="message",e.ServicerOp="ServicerOp",e.transfer="transfer",e.warn="warn",e.success="success",e.LeaveMsg="LeaveMsg"}(a||(t.ClientGetTypes=a={}));var s=t.ClientGetOperations=void 0;!function(e){e.direct_talk="direct_talk",e.invite="invite",e.invite_feedback="invite_feedback",e.end="end"}(s||(t.ClientGetOperations=s={}));var u=t.ClientSendOperations=void 0;!function(e){e.accept_invite="accept_invite",e.refuse_invite="refuse_invite"}(u||(t.ClientSendOperations=u={}));var c=t.TargetTypes=void 0;!function(e){e.robot="robot",e.staff="human",e.comment="msgBox"}(c||(t.TargetTypes=c={}))},function(e,t,n){"use strict";var r=n(296),o=n(297),i=n(112);e.exports={formats:i,parse:o,stringify:r}},function(e,t,n){"use strict";var r=n(111),o=n(112),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},a=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return a.call(e)},skipNulls:!1,strictNullHandling:!1},u=function e(t,n,o,i,a,u,c,l,f,d,p,h){var m=t;if("function"==typeof c)m=c(n,m);else if(m instanceof Date)m=d(m);else if(null===m){if(i)return u&&!h?u(n,s.encoder):n;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||r.isBuffer(m)){if(u){return[p(h?n:u(n,s.encoder))+"="+p(u(m,s.encoder))]}return[p(n)+"="+p(String(m))]}var g=[];if(void 0===m)return g;var v;if(Array.isArray(c))v=c;else{var q=Object.keys(m);v=l?q.sort(l):q}for(var b=0;b<v.length;++b){var _=v[b];a&&null===m[_]||(g=Array.isArray(m)?g.concat(e(m[_],o(n,_),o,i,a,u,c,l,f,d,p,h)):g.concat(e(m[_],n+(f?"."+_:"["+_+"]"),o,i,a,u,c,l,f,d,p,h)))}return g};e.exports=function(e,t){var n=e,a=t?r.assign({},t):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===a.delimiter?s.delimiter:a.delimiter,l="boolean"==typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,f="boolean"==typeof a.skipNulls?a.skipNulls:s.skipNulls,d="boolean"==typeof a.encode?a.encode:s.encode,p="function"==typeof a.encoder?a.encoder:s.encoder,h="function"==typeof a.sort?a.sort:null,m=void 0!==a.allowDots&&a.allowDots,g="function"==typeof a.serializeDate?a.serializeDate:s.serializeDate,v="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:s.encodeValuesOnly;if(void 0===a.format)a.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,a.format))throw new TypeError("Unknown format option provided.");var q,b,_=o.formatters[a.format];"function"==typeof a.filter?(b=a.filter,n=b("",n)):Array.isArray(a.filter)&&(b=a.filter,q=b);var y=[];if("object"!=typeof n||null===n)return"";var x;x=a.arrayFormat in i?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var w=i[x];q||(q=Object.keys(n)),h&&q.sort(h);for(var S=0;S<q.length;++S){var C=q[S];f&&null===n[C]||(y=y.concat(u(n[C],C,w,l,f,d?p:null,b,h,m,g,_,v)))}var E=y.join(c),T=!0===a.addQueryPrefix?"?":"";return E.length>0?T+E:""}},function(e,t,n){"use strict";var r=n(111),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,s=r.split(t.delimiter,a),u=0;u<s.length;++u){var c,l,f=s[u],d=f.indexOf("]="),p=-1===d?f.indexOf("="):d+1;-1===p?(c=t.decoder(f,i.decoder),l=t.strictNullHandling?null:""):(c=t.decoder(f.slice(0,p),i.decoder),l=t.decoder(f.slice(p+1),i.decoder)),o.call(n,c)?n[c]=[].concat(n[c]).concat(l):n[c]=l}return n},s=function(e,t,n){for(var r=t,o=e.length-1;o>=0;--o){var i,a=e[o];if("[]"===a)i=[],i=i.concat(r);else{i=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(i=[],i[u]=r):i[s]=r}r=i}return r},u=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=i.exec(r),c=u?r.slice(0,u.index):r,l=[];if(c){if(!n.plainObjects&&o.call(Object.prototype,c)&&!n.allowPrototypes)return;l.push(c)}for(var f=0;null!==(u=a.exec(r))&&f<n.depth;){if(f+=1,!n.plainObjects&&o.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(u[1])}return u&&l.push("["+r.slice(u.index)+"]"),s(l,t,n)}};e.exports=function(e,t){var n=t?r.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth="number"==typeof n.depth?n.depth:i.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:i.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,""===e||null===e||void 0===e)return n.plainObjects?Object.create(null):{};for(var o="string"==typeof e?a(e,n):e,s=n.plainObjects?Object.create(null):{},c=Object.keys(o),l=0;l<c.length;++l){var f=c[l],d=u(f,o[f],n);s=r.merge(s,d,n)}return r.compact(s)}}]).default;